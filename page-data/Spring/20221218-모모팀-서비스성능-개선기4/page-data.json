{"componentChunkName":"component---src-templates-blog-post-js","path":"/Spring/20221218-모모팀-서비스성능-개선기4/","result":{"data":{"site":{"siteMetadata":{"author":"Seongwon","comment":{"utterances":"Seongwon97/Seongwon97.github.io"},"sponsor":{"buyMeACoffeeId":"seongwon"}}},"markdownRemark":{"excerpt":"기존의 동기 처리 이벤트 기존 모모팀의 불필요한 찜하기 데이터의 삭제 로직은 모임이 삭제되었을 때, 또는 회원이 탈퇴하였을 때 연관된 찜하기 데이터가 삭제되도록 이벤트 기반으로 구현되어있었다. 바로 코드를 살펴보겠다. 기존 코드는 일반적인 @EventListener와 함께 비동기 처리를 하지 않아 동기로 작동하고 있었다. 그리하여 Participant와 …","html":"<h1 id=\"기존의-동기-처리-이벤트\" style=\"position:relative;\"><a href=\"#%EA%B8%B0%EC%A1%B4%EC%9D%98-%EB%8F%99%EA%B8%B0-%EC%B2%98%EB%A6%AC-%EC%9D%B4%EB%B2%A4%ED%8A%B8\" aria-label=\"기존의 동기 처리 이벤트 permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>기존의 동기 처리 이벤트</h1>\n<p>기존 모모팀의 불필요한 찜하기 데이터의 삭제 로직은 모임이 삭제되었을 때, 또는 회원이 탈퇴하였을 때 연관된 찜하기 데이터가 삭제되도록 이벤트 기반으로 구현되어있었다. 바로 코드를 살펴보겠다. 기존 코드는 일반적인 <code>@EventListener</code>와 함께 비동기 처리를 하지 않아 동기로 작동하고 있었다. 그리하여 Participant와 Group이 트랜잭션을 서로 공유하고 있었다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"java\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">RequiredArgsConstructor</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">Slf4j</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">Component</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">public</span><span class=\"mtk4\"> </span><span class=\"mtk9\">class</span><span class=\"mtk4\"> </span><span class=\"mtk11\">FavoriteDeleteEventListener</span><span class=\"mtk4\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">private</span><span class=\"mtk4\"> </span><span class=\"mtk9\">final</span><span class=\"mtk4\"> </span><span class=\"mtk11\">FavoriteRepository</span><span class=\"mtk4\"> favoriteRepository</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk1\">@</span><span class=\"mtk11\">EventListener</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">public</span><span class=\"mtk3\"> </span><span class=\"mtk9\">void</span><span class=\"mtk3\"> deleteGroup</span><span class=\"mtk1\">(</span><span class=\"mtk11\">GroupDeleteEvent</span><span class=\"mtk1\"> </span><span class=\"mtk4 mtki\">event</span><span class=\"mtk1\">)</span><span class=\"mtk3\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">favoriteRepository</span><span class=\"mtk1\">.</span><span class=\"mtk3\">deleteAllByGroupId</span><span class=\"mtk1\">(</span><span class=\"mtk11\">event</span><span class=\"mtk1\">.</span><span class=\"mtk3\">getId</span><span class=\"mtk1\">());</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">log</span><span class=\"mtk1\">.</span><span class=\"mtk3\">info</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;EventListener Thread Id : {}&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk11\">Thread</span><span class=\"mtk1\">.</span><span class=\"mtk3\">currentThread</span><span class=\"mtk1\">().</span><span class=\"mtk3\">getId</span><span class=\"mtk1\">());</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk1\">...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p>테스트를 해보면 서비스 로직과 이벤트 리스너의 실행 쓰레드 ID가 같은 것을 확인할 수 있다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 7.666666666666668%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAX0lEQVQI102MSwpAIQwDPZILcafWv6j3v04eDQhvUWg7yZhaK97knNFaw70X5xz03jHGIAshwFqLlBL/IsL8nJN3KQXeexg9tKCivTfhP/SkzjkKVbzWYke5shgj+7p/UJxG5Lp97ZgAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled\"\n        title=\"Untitled\"\n        src=\"/static/5938c5a47e137465adbe5874fb77752c/c1b63/img.png\"\n        srcset=\"/static/5938c5a47e137465adbe5874fb77752c/5a46d/img.png 300w,\n/static/5938c5a47e137465adbe5874fb77752c/0a47e/img.png 600w,\n/static/5938c5a47e137465adbe5874fb77752c/c1b63/img.png 1200w,\n/static/5938c5a47e137465adbe5874fb77752c/d61c2/img.png 1800w,\n/static/5938c5a47e137465adbe5874fb77752c/e8950/img.png 2000w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>두 로직이 트랜잭션을 공유한다는 것은 찜하기 데이터의 삭제 쿼리를 실행하는 과정에서 문제가 발생하여도 모임 삭제 쿼리까지 롤백된다는 것을 의미한다. 사용자는 모임을 삭제하라고 요청을 보냈을 때, 사용자가 원하는 모임 외에 부가적으로 연관된 데이터의 삭제가 실패했다는 이유로 모임 삭제가 실패하게 된다.</p>\n<p>앞서 모모팀은 찜하기 기능을 부가기능으로 판단하고 모임 로직과의 의존성을 분리하기 위해 Event방식을 사용하였다. 하지만 이벤트를 하나의 트랜잭션으로 묶어 동기 처리로 동작하는 처리방식은 부가기능의 장애가 모임 로직에 영향을 주는 코드가 되어 장애 측면에서 <strong>모임이 부가기능에 의존</strong>하는 코드를 만들게 된다.</p>\n<p>이러한 부가기능의 장애가 메인 기능으로 전파되는 문제를 해결하고자 Event 처리의 동작 방식을 비동기로 변경하는 작업을 진행해보려 한다.</p>\n<h1 id=\"event를-비동기로-처리\" style=\"position:relative;\"><a href=\"#event%EB%A5%BC-%EB%B9%84%EB%8F%99%EA%B8%B0%EB%A1%9C-%EC%B2%98%EB%A6%AC\" aria-label=\"event를 비동기로 처리 permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Event를 비동기로 처리</h1>\n<p>이벤트를 비동기로 처리하기 위해서는 먼저 <code>@EnableAsync</code>를 스프링부트 애플리케이션을 실행시키는 메인 클래스 또는 설정 클래스에 붙여 비동기를 활성화시켜줘야 한다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"java\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">Configuration</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">EnableAsync</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">public</span><span class=\"mtk4\"> </span><span class=\"mtk9\">class</span><span class=\"mtk4\"> </span><span class=\"mtk11\">AsyncConfiguration</span><span class=\"mtk4\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p>그 후에는 비동기 처리를 할 이벤트 처리를 할 <code>@EventListener</code>이 붙은 메서드에 <code>@Async</code>를 붙여주면 해당 로직은 비동기처리가 된다. 그리고 이전에는 동기로 처리하며 트랜잭션을 공유하기에 메서드에 <code>@Transactional</code>을 붙여주지 않아도 되었다. 하지만 비동기로 처리하게 되며 트랜잭션이 분리되어 둘의 찜하기 데이터를 삭제하는 로직은 트랜잭션이 없게 되어 메서드 또는 클래스에 <code>@Transactional</code>어노테이션을 통해 트랜잭션을 부여해주어야 한다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"java\" data-index=\"2\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">RequiredArgsConstructor</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">Slf4j</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">Transactional</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">Component</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">public</span><span class=\"mtk4\"> </span><span class=\"mtk9\">class</span><span class=\"mtk4\"> </span><span class=\"mtk11\">FavoriteDeleteEventListener</span><span class=\"mtk4\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">private</span><span class=\"mtk4\"> </span><span class=\"mtk9\">final</span><span class=\"mtk4\"> </span><span class=\"mtk11\">FavoriteRepository</span><span class=\"mtk4\"> favoriteRepository</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk1\">@</span><span class=\"mtk11\">EventListener</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk1\">@</span><span class=\"mtk11\">Async</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">public</span><span class=\"mtk3\"> </span><span class=\"mtk9\">void</span><span class=\"mtk3\"> deleteGroup</span><span class=\"mtk1\">(</span><span class=\"mtk11\">GroupDeleteEvent</span><span class=\"mtk1\"> </span><span class=\"mtk4 mtki\">event</span><span class=\"mtk1\">)</span><span class=\"mtk3\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">favoriteRepository</span><span class=\"mtk1\">.</span><span class=\"mtk3\">deleteAllByGroupId</span><span class=\"mtk1\">(</span><span class=\"mtk11\">event</span><span class=\"mtk1\">.</span><span class=\"mtk3\">getId</span><span class=\"mtk1\">());</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">log</span><span class=\"mtk1\">.</span><span class=\"mtk3\">info</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;EventListener Thread Id : {}&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk11\">Thread</span><span class=\"mtk1\">.</span><span class=\"mtk3\">currentThread</span><span class=\"mtk1\">().</span><span class=\"mtk3\">getId</span><span class=\"mtk1\">());</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk1\">...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p>테스트를 통해 확인해보겠다. 앞서 동일한 트랜잭션 내에서 실행되었던 로직들이 비동기로 처리되며 서로 다른 트랜잭션에서 실행되는 것을 확인할 수 있다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 7.333333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAQElEQVQI1x2MywkAUQgDtybBi4gifrD/hrL4DjlkmOQzM7g7VBVVhcxEd2NmXo8I7C6YGUT0+LFzbnf+RUTexw93SiL/C4H4+wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled\"\n        title=\"Untitled\"\n        src=\"/static/41b533f94d52c86f85c116e05986f2e7/c1b63/img_1.png\"\n        srcset=\"/static/41b533f94d52c86f85c116e05986f2e7/5a46d/img_1.png 300w,\n/static/41b533f94d52c86f85c116e05986f2e7/0a47e/img_1.png 600w,\n/static/41b533f94d52c86f85c116e05986f2e7/c1b63/img_1.png 1200w,\n/static/41b533f94d52c86f85c116e05986f2e7/d61c2/img_1.png 1800w,\n/static/41b533f94d52c86f85c116e05986f2e7/e8950/img_1.png 2000w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<h1 id=\"비동기-thread-pool-지정\" style=\"position:relative;\"><a href=\"#%EB%B9%84%EB%8F%99%EA%B8%B0-thread-pool-%EC%A7%80%EC%A0%95\" aria-label=\"비동기 thread pool 지정 permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>비동기 Thread pool 지정</h1>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 22.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAABFElEQVQY0z2O23KCQBBE+Y0kxgSxVAT2wt4VViAYzcWkKvn/b+kMPOSh68zO9PRO0o1XDOc3jJcP+OMJBatRCjWT1RYFVxDKgUkD6xsoG2BDg+v7jfwRvDY0t9gVDE/ZBomyHpwa05I0k7mFO0RY0vSuKIjTbKL01I9nMNMiFx659NgyjS23szaVRpKWDjlTYELPVzRxQNePiKcB1h3ApYKkKybuKCQtDNKKyDyWhcVzaeY6ZWGuk7VwlK6xp7CcNHFZaNzlBgtaWJQBj1XAw97gPtfYVQqu1nD0QSB6UmMdXuIJ/bFFcq0lLkrhLCVGKXALHr9dj+/Y4auJMz/J+Kot2orm5PnhJUS6glxl/1LZmpThD7HqoBP+40s7AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled\"\n        title=\"Untitled\"\n        src=\"/static/20753e25d194f9a2aad81815821ef446/c1b63/img_2.png\"\n        srcset=\"/static/20753e25d194f9a2aad81815821ef446/5a46d/img_2.png 300w,\n/static/20753e25d194f9a2aad81815821ef446/0a47e/img_2.png 600w,\n/static/20753e25d194f9a2aad81815821ef446/c1b63/img_2.png 1200w,\n/static/20753e25d194f9a2aad81815821ef446/d61c2/img_2.png 1800w,\n/static/20753e25d194f9a2aad81815821ef446/e8950/img_2.png 2000w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>스프링 가이드를 살펴보면 아래와 같이 <code>Executor</code> 빈을 정의하지 않으면 <code>@EnableAsync</code>와 <code>@Async</code>를 통해 비동기 처리만 하게 된다면 비동기 작업을 <code>SimpleAsyncTaskExecutor</code>를 매번 만들어 처리한다는 것을 알 수 있다.</p>\n<p>실제로 그런지 임시로 비동기로 처리하는 이벤트를 발생시키는 메서드를 만들고 100번 루프를 돌리며 테스트를 해보겠다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"java\" data-index=\"3\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">Service</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">public</span><span class=\"mtk4\"> </span><span class=\"mtk9\">class</span><span class=\"mtk4\"> </span><span class=\"mtk11\">GroupModifyService</span><span class=\"mtk4\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">\t</span><span class=\"mtk1\">...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">\t</span><span class=\"mtk9\">public</span><span class=\"mtk3\"> </span><span class=\"mtk9\">void</span><span class=\"mtk3\"> publishEvent</span><span class=\"mtk1\">(</span><span class=\"mtk11\">Long</span><span class=\"mtk1\"> </span><span class=\"mtk4 mtki\">id</span><span class=\"mtk1\">)</span><span class=\"mtk3\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">applicationEventPublisher</span><span class=\"mtk1\">.</span><span class=\"mtk3\">publishEvent</span><span class=\"mtk1\">(</span><span class=\"mtk9\">new</span><span class=\"mtk1\"> </span><span class=\"mtk3\">GroupDeleteEvent</span><span class=\"mtk1\">(id));</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"java\" data-index=\"4\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">SpringBootTest</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">class</span><span class=\"mtk4\"> </span><span class=\"mtk11\">FavoriteDeleteEventListenerTest</span><span class=\"mtk4\"> </span><span class=\"mtk1\">{</span><span class=\"mtk4\">\t\t</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">\t</span><span class=\"mtk1\">...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">\t</span><span class=\"mtk1\">@</span><span class=\"mtk11\">DisplayName</span><span class=\"mtk4\">(</span><span class=\"mtk6\">&quot;비동기 처리를 하는 쓰레드를 테스트한다.&quot;</span><span class=\"mtk4\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk1\">@</span><span class=\"mtk11\">Test</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">void</span><span class=\"mtk3\"> asyncThreadExecutorTest</span><span class=\"mtk1\">()</span><span class=\"mtk3\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk9\">for</span><span class=\"mtk1\"> (</span><span class=\"mtk9\">int</span><span class=\"mtk1\"> </span><span class=\"mtk4\">i</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">0</span><span class=\"mtk1\">; i </span><span class=\"mtk8\">&lt;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">100</span><span class=\"mtk1\">; i++) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk11\">groupModifyService</span><span class=\"mtk1\">.</span><span class=\"mtk3\">publishEvent</span><span class=\"mtk1\">(</span><span class=\"mtk7\">1L</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">\t</span><span class=\"mtk1\">...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 20.666666666666668%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAd0lEQVQY053PMQ7DIAwF0BynzUJjFFOMQZAt6pz7H+WHUIZUnZLB0pdtPdlDzhkiAkuExzhioRc2Ybx5hvcCVcWxU0pBSqllYwyccy3HGFuFEFpvOIPPCgY7YVXpoL8EMvM/qDThU0Ffh1fBnwupv6z2C9658Ojtav6GEkAo3PAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled\"\n        title=\"Untitled\"\n        src=\"/static/4f6381c82b6c0418b47b675506f98e50/c1b63/img_3.png\"\n        srcset=\"/static/4f6381c82b6c0418b47b675506f98e50/5a46d/img_3.png 300w,\n/static/4f6381c82b6c0418b47b675506f98e50/0a47e/img_3.png 600w,\n/static/4f6381c82b6c0418b47b675506f98e50/c1b63/img_3.png 1200w,\n/static/4f6381c82b6c0418b47b675506f98e50/d61c2/img_3.png 1800w,\n/static/4f6381c82b6c0418b47b675506f98e50/e8950/img_3.png 2000w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>테스트 결과는 <code>Task-N</code> 이라는 이름의 스레드가 생성되어 비동기 작업이 실행되는 것을 확인할 수 있다. 매번 작업을 실행할 때마다 스레드를 만들고 제거하는 것은 성능 측면에서 저하를 불러일으킨다. 이를 해결하는 대표적인 방법은 Thread Pool을 만들어 필요한 스레드를 먼저 만들고 스레드를 재사용하는 방법이 있다.</p>\n<p>스레드 풀을 만들기 위해 기존 <code>@EnableAsync</code>를 처리하기 위해 생성한 설정 클래스에 <code>ThreadPoolTaskExecutor</code>를 반환하는 <code>Executor</code> 빈을 재정의하고 다시 테스트를 진행해보았다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"java\" data-index=\"5\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">Configuration</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">EnableAsync</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">public</span><span class=\"mtk4\"> </span><span class=\"mtk9\">class</span><span class=\"mtk4\"> </span><span class=\"mtk11\">AsyncConfiguration</span><span class=\"mtk4\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk1\">@</span><span class=\"mtk11\">Bean</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">public</span><span class=\"mtk3\"> </span><span class=\"mtk11\">Executor</span><span class=\"mtk3\"> asyncThreadTaskExecutor</span><span class=\"mtk1\">()</span><span class=\"mtk3\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">ThreadPoolTaskExecutor</span><span class=\"mtk1\"> </span><span class=\"mtk4\">threadPoolTaskExecutor</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk9\">new</span><span class=\"mtk1\"> </span><span class=\"mtk3\">ThreadPoolTaskExecutor</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">threadPoolTaskExecutor</span><span class=\"mtk1\">.</span><span class=\"mtk3\">setCorePoolSize</span><span class=\"mtk1\">(</span><span class=\"mtk7\">4</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">threadPoolTaskExecutor</span><span class=\"mtk1\">.</span><span class=\"mtk3\">setMaxPoolSize</span><span class=\"mtk1\">(</span><span class=\"mtk7\">4</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">threadPoolTaskExecutor</span><span class=\"mtk1\">.</span><span class=\"mtk3\">setThreadNamePrefix</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;momo-pool&quot;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk9\">return</span><span class=\"mtk1\"> threadPoolTaskExecutor;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p>결과는 아래와 같이 미리 만들어둔 스레드 풀에서 요청을 처리하기 위해 스레드를 생성하여 재사용하는 것을 확인할 수 있다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 23.333333333333332%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAvklEQVQY011QWwrDMAzrhZbCmmfbPNsNBrv/dbTII2P0Q2DHiixrCiEgxijY9x3sb0rhae54px2H1bDWYts2pJR+3GVZBKzXdZW5cw4Ti5yzkAkOVRes1qC0huYdvPfysdaKUorAGAOttdRjCc2I4CBRkL2aZ5ze4nEeOIMTIpc2LuigMF1TlP0wI4J09H8KH78ONWonH13Q91M441IKE3Q3HDKqEdfEc9iMHNgzw0fP8JWjZGguGZJ/zZBghh8GkaiJdQH/wQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled\"\n        title=\"Untitled\"\n        src=\"/static/5be58014a701b9181154e233d644bf68/c1b63/img_4.png\"\n        srcset=\"/static/5be58014a701b9181154e233d644bf68/5a46d/img_4.png 300w,\n/static/5be58014a701b9181154e233d644bf68/0a47e/img_4.png 600w,\n/static/5be58014a701b9181154e233d644bf68/c1b63/img_4.png 1200w,\n/static/5be58014a701b9181154e233d644bf68/d61c2/img_4.png 1800w,\n/static/5be58014a701b9181154e233d644bf68/e8950/img_4.png 2000w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<h1 id=\"이벤트-바인딩-시점-지정\" style=\"position:relative;\"><a href=\"#%EC%9D%B4%EB%B2%A4%ED%8A%B8-%EB%B0%94%EC%9D%B8%EB%94%A9-%EC%8B%9C%EC%A0%90-%EC%A7%80%EC%A0%95\" aria-label=\"이벤트 바인딩 시점 지정 permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>이벤트 바인딩 시점 지정</h1>\n<p>Spring 4.2부터는 트랜잭션의 동작 단계별로 이벤트 리스너를 바인딩하는 <code>@TransactionalEventListener</code> 을 제공하고 있다. 기존의 <code>@EventListener</code>대신 <code>@TransactionalEventListener</code> 를 사용하며 아래의 옵션을 지정하면 이벤트를 publish하는 트랜잭션의 동작을 기준으로 바인딩 시점을 지정할 수 있다.</p>\n<ul>\n<li><code>AFTER_COMMIT</code> (기본값) - 트랜잭션이 성공적으로 마무리(commit)됬을 때 이벤트 실행</li>\n<li><code>AFTER_ROLLBACK</code> – 트랜잭션이 rollback 되었을 때 이벤트 실행</li>\n<li><code>AFTER_COMPLETION</code> – 트랜잭션이 마무리 되었을 때(commit or rollback) 이벤트 실행</li>\n<li><code>BEFORE_COMMIT</code> - 트랜잭션의 커밋 전에 이벤트 실행</li>\n</ul>\n<p>프로젝트의 코드에서는 모임 또는 회원이 성공적으로 삭제되었을 때, 연관된 찜하기 데이터가 삭제되어야함으로 옵션의 기본값인 <code>AFTER_COMMIT</code>를 사용하였다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"java\" data-index=\"6\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">RequiredArgsConstructor</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">Slf4j</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">Transactional</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">Component</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">public</span><span class=\"mtk4\"> </span><span class=\"mtk9\">class</span><span class=\"mtk4\"> </span><span class=\"mtk11\">FavoriteDeleteEventListener</span><span class=\"mtk4\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">private</span><span class=\"mtk4\"> </span><span class=\"mtk9\">final</span><span class=\"mtk4\"> </span><span class=\"mtk11\">FavoriteRepository</span><span class=\"mtk4\"> favoriteRepository</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk1\">@</span><span class=\"mtk11\">TransactionalEventListener</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk1\">@</span><span class=\"mtk11\">Async</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">public</span><span class=\"mtk3\"> </span><span class=\"mtk9\">void</span><span class=\"mtk3\"> deleteGroup</span><span class=\"mtk1\">(</span><span class=\"mtk11\">GroupDeleteEvent</span><span class=\"mtk1\"> </span><span class=\"mtk4 mtki\">event</span><span class=\"mtk1\">)</span><span class=\"mtk3\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">favoriteRepository</span><span class=\"mtk1\">.</span><span class=\"mtk3\">deleteAllByGroupId</span><span class=\"mtk1\">(</span><span class=\"mtk11\">event</span><span class=\"mtk1\">.</span><span class=\"mtk3\">getId</span><span class=\"mtk1\">());</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">log</span><span class=\"mtk1\">.</span><span class=\"mtk3\">info</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;EventListener Thread Id : {}&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk11\">Thread</span><span class=\"mtk1\">.</span><span class=\"mtk3\">currentThread</span><span class=\"mtk1\">().</span><span class=\"mtk3\">getId</span><span class=\"mtk1\">());</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk1\">...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<h1 id=\"reference\" style=\"position:relative;\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📚Reference</h1>\n<ul>\n<li><a href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#context-functionality-events-async\">Core Technologies</a></li>\n<li><a href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/data-access.html#transaction-event\">Data Access</a></li>\n<li><a href=\"https://spring.io/guides/gs/async-method/\">Creating Asynchronous Methods</a></li>\n<li><a href=\"https://www.baeldung.com/spring-events#transaction-bound-events\">Baeldung- Spring Events</a></li>\n<li><a href=\"https://jeong-pro.tistory.com/238\">Spring ApplicationEvent 비동기로 처리될 것만 같지?</a></li>\n</ul>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .one-dark-pro {\n    background-color: #282c34;\n    color: #abb2bf;\n  }\n  .one-dark-pro .mtki { font-style: italic; }\n  .one-dark-pro .mtk1 { color: #ABB2BF; }\n  .one-dark-pro .mtk11 { color: #E5C07B; }\n  .one-dark-pro .mtk9 { color: #C678DD; }\n  .one-dark-pro .mtk4 { color: #E06C75; }\n  .one-dark-pro .mtk3 { color: #61AFEF; }\n  .one-dark-pro .mtk6 { color: #98C379; }\n  .one-dark-pro .mtk8 { color: #56B6C2; }\n  .one-dark-pro .mtk7 { color: #D19A66; }\n  .one-dark-pro .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));\n  }\n</style>","tableOfContents":"<ul>\n<li><a href=\"/Spring/20221218-%EB%AA%A8%EB%AA%A8%ED%8C%80-%EC%84%9C%EB%B9%84%EC%8A%A4%EC%84%B1%EB%8A%A5-%EA%B0%9C%EC%84%A0%EA%B8%B04/#%EA%B8%B0%EC%A1%B4%EC%9D%98-%EB%8F%99%EA%B8%B0-%EC%B2%98%EB%A6%AC-%EC%9D%B4%EB%B2%A4%ED%8A%B8\">기존의 동기 처리 이벤트</a></li>\n<li><a href=\"/Spring/20221218-%EB%AA%A8%EB%AA%A8%ED%8C%80-%EC%84%9C%EB%B9%84%EC%8A%A4%EC%84%B1%EB%8A%A5-%EA%B0%9C%EC%84%A0%EA%B8%B04/#event%EB%A5%BC-%EB%B9%84%EB%8F%99%EA%B8%B0%EB%A1%9C-%EC%B2%98%EB%A6%AC\">Event를 비동기로 처리</a></li>\n<li><a href=\"/Spring/20221218-%EB%AA%A8%EB%AA%A8%ED%8C%80-%EC%84%9C%EB%B9%84%EC%8A%A4%EC%84%B1%EB%8A%A5-%EA%B0%9C%EC%84%A0%EA%B8%B04/#%EB%B9%84%EB%8F%99%EA%B8%B0-thread-pool-%EC%A7%80%EC%A0%95\">비동기 Thread pool 지정</a></li>\n<li><a href=\"/Spring/20221218-%EB%AA%A8%EB%AA%A8%ED%8C%80-%EC%84%9C%EB%B9%84%EC%8A%A4%EC%84%B1%EB%8A%A5-%EA%B0%9C%EC%84%A0%EA%B8%B04/#%EC%9D%B4%EB%B2%A4%ED%8A%B8-%EB%B0%94%EC%9D%B8%EB%94%A9-%EC%8B%9C%EC%A0%90-%EC%A7%80%EC%A0%95\">이벤트 바인딩 시점 지정</a></li>\n<li><a href=\"/Spring/20221218-%EB%AA%A8%EB%AA%A8%ED%8C%80-%EC%84%9C%EB%B9%84%EC%8A%A4%EC%84%B1%EB%8A%A5-%EA%B0%9C%EC%84%A0%EA%B8%B04/#reference\">📚Reference</a></li>\n</ul>","frontmatter":{"date":"2022년 12월 18일","title":"모모팀 서비스 성능 개선기4 (비동기 처리를 통한 장애 전파 제거)","tags":["SpringFramework","성능 개선기","Event","TransactionalEventListener","Async"]}}},"pageContext":{"slug":"/Spring/20221218-모모팀-서비스성능-개선기4/","previous":{"fields":{"slug":"/DevOps/20221026-모모팀-인프라-개선기-3편/"},"frontmatter":{"title":"모모팀 인프라 개선기 3편 (무중단 배포)"}},"next":{"fields":{"slug":"/Kotlin/20230118-Kotlin-변수타입-null/"},"frontmatter":{"title":"[Kotlin] 코틀린의 변수와 null"}}}},"staticQueryHashes":["3911196313","4111100897"]}