{"componentChunkName":"component---src-templates-blog-post-js","path":"/Java/20220314-이펙티브자바-12-toString재정의/","result":{"data":{"site":{"siteMetadata":{"author":"Seongwon","comment":{"utterances":"Seongwon97/Seongwon97.github.io"},"sponsor":{"buyMeACoffeeId":"seongwon"}}},"markdownRemark":{"excerpt":"이 글은 Effective Java 3/E의 내용을 요약한 글입니다. 자세한 내용은 책을 참고하시기 바랍니다. toString 메서드 Object의 기본 toString메서드는 기본적으로 클래스 이름@16진수로 표현한 해시코드를 반환합니다. 실제로 Object.java파일의 toString메서드를 보면 다음과 같습니다. 위의 메서드를 보면 처음 말한바와 …","html":"<blockquote>\n<p>이 글은 Effective Java 3/E의 내용을 요약한 글입니다. 자세한 내용은 책을 참고하시기 바랍니다.</p>\n</blockquote>\n<h1 id=\"tostring-메서드\" style=\"position:relative;\"><a href=\"#tostring-%EB%A9%94%EC%84%9C%EB%93%9C\" aria-label=\"tostring 메서드 permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>toString 메서드</h1>\n<p>Object의 기본 toString메서드는 기본적으로 <code>클래스 이름@16진수로 표현한 해시코드</code>를 반환합니다.</p>\n<p>실제로 Object.java파일의 toString메서드를 보면 다음과 같습니다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"java\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">public</span><span class=\"mtk4\"> </span><span class=\"mtk11\">String</span><span class=\"mtk4\"> </span><span class=\"mtk3\">toString</span><span class=\"mtk4\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">return</span><span class=\"mtk4\"> </span><span class=\"mtk3\">getClass</span><span class=\"mtk4\">()</span><span class=\"mtk1\">.</span><span class=\"mtk3\">getName</span><span class=\"mtk1\">()</span><span class=\"mtk4\"> </span><span class=\"mtk8\">+</span><span class=\"mtk4\"> </span><span class=\"mtk6\">&quot;@&quot;</span><span class=\"mtk4\"> </span><span class=\"mtk8\">+</span><span class=\"mtk4\"> </span><span class=\"mtk11\">Integer</span><span class=\"mtk1\">.</span><span class=\"mtk3\">toHexString</span><span class=\"mtk1\">(</span><span class=\"mtk3\">hashCode</span><span class=\"mtk1\">());</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">}</span></span></span></code></pre>\n<p>위의 메서드를 보면 처음 말한바와 같이 <code>클래스 이름@16진수로 표현한 해시코드</code>을 return 하는 것을 확인할 수 있습니다.</p>\n<p>테스트를 해보면 다음과 같습니다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"java\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">public</span><span class=\"mtk4\"> </span><span class=\"mtk9\">class</span><span class=\"mtk4\"> </span><span class=\"mtk11\">Car</span><span class=\"mtk4\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">  </span><span class=\"mtk9\">private</span><span class=\"mtk4\"> </span><span class=\"mtk11\">String</span><span class=\"mtk4\"> name</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">  </span><span class=\"mtk9\">private</span><span class=\"mtk4\"> </span><span class=\"mtk9\">int</span><span class=\"mtk4\"> position</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">public</span><span class=\"mtk4\"> </span><span class=\"mtk9\">class</span><span class=\"mtk4\"> </span><span class=\"mtk11\">Main</span><span class=\"mtk4\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">public</span><span class=\"mtk3\"> </span><span class=\"mtk9\">static</span><span class=\"mtk3\"> </span><span class=\"mtk9\">void</span><span class=\"mtk3\"> main</span><span class=\"mtk1\">(</span><span class=\"mtk11\">String</span><span class=\"mtk1\">[] </span><span class=\"mtk4 mtki\">args</span><span class=\"mtk1\">)</span><span class=\"mtk3\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">Car</span><span class=\"mtk1\"> </span><span class=\"mtk4\">car</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk9\">new</span><span class=\"mtk1\"> </span><span class=\"mtk3\">Car</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">System</span><span class=\"mtk1\">.</span><span class=\"mtk11\">out</span><span class=\"mtk1\">.</span><span class=\"mtk3\">println</span><span class=\"mtk1\">(car);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5 mtki\">// 출력 결과 : Car@6b71769e</span></span></span></code></pre>\n<p>테스트 결과를 보면 Car를 출력하였을 때 <code>Car@6b71769e</code>라는 결과가 나온 것을 확인할 수 있습니다. 하지만 이러한 형태의 문자열은 일반적으로 우리가 원하는 결과가 아니고 정보를 얻을 수 있는 좋은 정보도 아닙니다.</p>\n<p>toString의 일반 규약을 보면 \"간결하면서 사람이 읽기 쉬운 형태의 유익한 정보를 반환해야한다.\"와 \"모든 하위 클래스에서 이 메서드를 재정의하라\"라고 합니다.\n따라서 우리는 toString이 유익한 정보를 반환하도록 재정의해줘야 합니다.</p>\n<p>여기서 모든 클래스에서 toString을 재정의하라는 것은 도대체 왜 그런 걸까요?\n그것은 바로 디버깅을 위해서 입니다. toString메서드는 우리가 따로 호출하지 않더라도 오류가 발생하여 로깅할 때와 같이 자동으로 호출되기도 합니다.\n만약 toString을 재정의 하지 않고 <code>Car@6b71769e</code>와 같은 결과만을 본다면 해당 메시지는 쓸모 없는 메시지가 될 것이라 꼭 toString을 재정의하여야 한다는 것입니다.</p>\n<h1 id=\"tostring-재정의하기\" style=\"position:relative;\"><a href=\"#tostring-%EC%9E%AC%EC%A0%95%EC%9D%98%ED%95%98%EA%B8%B0\" aria-label=\"tostring 재정의하기 permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>toString 재정의하기</h1>\n<ul>\n<li>좋은 toString 재정의를 하려면 객체가 가진 모든 정보를 반환하는 것이 좋다.</li>\n<li>만약 객체가 가진 정보(필드)가 너무 거대하거나 객체의 상태가 문자열로 표현하기에 적합하지 않다면 요약 정보를 담아 출력을 하도록 한다.</li>\n<li>\n<p>구현을 할 때는 <strong>포맷을 문서화할지 정해야한다.</strong></p>\n<ul>\n<li>포맷을 문서화하면 해당 객체는 표준적이고, 명확하고, 사람이 읽기 쉽게 된다.</li>\n<li>전화번호 같이 <code>000-0000-0000</code>와 같은 것은 포맷을 문서화하는 것이 좋다.</li>\n<li><font color =\"red\">하지만 포맷을 명시하면 해당 클래스는 앞서 정의한 포맷에 얽매이게 된다.</font></li>\n<li>프로그래머들이 해당 문자열을 파싱해서 데이터를 사용한다면, 포맷 값이 변화하면 관련 내용들이 모두 변경되게 된다.</li>\n<li>포맷을 명시하지 않는다면 향후 정보를 더 넣거나 포맷을 개선할 수 있는 유연성을 얻게 된다.</li>\n</ul>\n</li>\n<li>\n<p>포맷을 명시하든 아니든 의도는 명확히 밝혀야한다.</p>\n<ul>\n<li>포맷을 명시한다면 포맷에 대한 정보까지 주석으로 남겨두는 것이 좋고, 포맷을 명시하지 않는다면 형식이 변경될 수 있다고 명시해야한다.</li>\n</ul>\n</li>\n</ul>\n<blockquote>\n<p>하지만 toString으로 반환되는 값을 통해 로직을 작성하는 것은 좋지 않아 사용하지 않는 것이 좋다!!\n그 대신 해당 정보를 얻어올 수 있는 API를 제공해야한다. 즉, getter를 통해 개발자들이 필요한 정보를 얻어 올 수 있도록 하는 것이 좋다.</p>\n</blockquote>\n<h1 id=\"핵심-정리\" style=\"position:relative;\"><a href=\"#%ED%95%B5%EC%8B%AC-%EC%A0%95%EB%A6%AC\" aria-label=\"핵심 정리 permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>핵심 정리</h1>\n<p>모든 구체 클래스에서 Object의 toString을 재정의하자. 상위 클래스에서 이미 알맞게 재정의한 경우는 예외다.\ntoString을 재정의한 클래스는 사용하기에도 즐겁고 그 클래스를 사용한 시스템을 디버깅하기 쉽게 해준다.\ntoString은 해당 객체에 관한 명확하고 유용한 정보를 읽기 좋은 형태로 반환해야 한다.</p>\n<h1 id=\"add\" style=\"position:relative;\"><a href=\"#add\" aria-label=\"add permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Add</h1>\n<p>우아한 테크코스 Level1의 1단계 미션을 진행하며 다음과 같은 피드백을 받았습니다.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 781px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 59.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAAB0UlEQVQoz6VT25KiUAzk/z9uH2ZqdRwFBLnfDxdFQHvSEWZrt2qelqpUwuHY6e5EK89SRHGCIAyR5QXqukHdNDCmxbIsmOcZs+Tn84mfnqYx6Poek9y1pmlCnCQaaZohy3Ikaap1UZTajPX9fsfyeOCxBn88TbM2HMcRo3wnlkUWYRQhimJcLgEuQYiz58NxXHj+Bb6c8f37TDLvV1WNxhhVYtpW67btYLFDFMcKRNnMBGcErIVhGEbwBTyQzLv8VpTlCtKqRax7kW3RGWXneSI7VclxnGi9WcEmBN0sYWaj6/WqVvwlue9adEJ/aQ3+5+HMODjr4+3Xy6tVXlFWGIZB6A9ou06mXoskg0FkLRJU9BrMUwG26ZMpw5JzNdx2HBxPNk62g8PhqJnvHAIb9QImnX5g92eldMr0JBHPUvEnl10sxfBSmPKMRt9uI27i0231i95RQS8NuKMbqEomoOuecSI7ic/jSZkxOzwXplwd9+zJQDKdqIJJI1qy/AtIP8iKbLI810hlsZNYViQM0NQVJvVn0iXmfZ3sOlWdsMQmW/ZwURa/dx84fB6FrYuDG2HnG7zZGd6dHDs7xH6/x27/ukP2ZVXJX67RoRnZwQ3wCx34kZ0BV9uuAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"toString 피드백\"\n        title=\"toString 피드백\"\n        src=\"/static/bdbc6517ea04d106a727ec5e2aa3690a/7fee5/toString_Override.png\"\n        srcset=\"/static/bdbc6517ea04d106a727ec5e2aa3690a/5a46d/toString_Override.png 300w,\n/static/bdbc6517ea04d106a727ec5e2aa3690a/0a47e/toString_Override.png 600w,\n/static/bdbc6517ea04d106a727ec5e2aa3690a/7fee5/toString_Override.png 781w\"\n        sizes=\"(max-width: 781px) 100vw, 781px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>Domain에 toString을 재정의하여 OutputView에서 <code>System.out.println(car)</code>와 같이 사용을 하다보니 domain과 view의 관계가 엮이게 되었습니다.\n즉, view의 출력 결과를 변경하려면 domain을 변경해야하는 문제점이 생긴 것입니다.</p>\n<p>여기서 다시 알 수 있는 것은 MVC패턴에서 toString재정의한 내용을 view에서 사용하면 model과 view의 관계가 엮이게 된다는 문제가 생긴다는 것을 알 수 있습니다.</p>\n<blockquote>\n<p>toString으로 반환되는 값을 통해 로직을 작성하는 것은 좋지 않아 사용하지 않는 것이 좋다(remind)❗️❗️\n하지만 디버깅을 위해 toString의 재정의는 꼭 하자❗️❗️</p>\n</blockquote>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .one-dark-pro {\n    background-color: #282c34;\n    color: #abb2bf;\n  }\n  .one-dark-pro .mtki { font-style: italic; }\n  .one-dark-pro .mtk9 { color: #C678DD; }\n  .one-dark-pro .mtk4 { color: #E06C75; }\n  .one-dark-pro .mtk11 { color: #E5C07B; }\n  .one-dark-pro .mtk3 { color: #61AFEF; }\n  .one-dark-pro .mtk1 { color: #ABB2BF; }\n  .one-dark-pro .mtk8 { color: #56B6C2; }\n  .one-dark-pro .mtk6 { color: #98C379; }\n  .one-dark-pro .mtk5 { color: #7F848E; }\n  .one-dark-pro .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));\n  }\n</style>","tableOfContents":"<ul>\n<li><a href=\"/Java/20220314-%EC%9D%B4%ED%8E%99%ED%8B%B0%EB%B8%8C%EC%9E%90%EB%B0%94-12-toString%EC%9E%AC%EC%A0%95%EC%9D%98/#tostring-%EB%A9%94%EC%84%9C%EB%93%9C\">toString 메서드</a></li>\n<li><a href=\"/Java/20220314-%EC%9D%B4%ED%8E%99%ED%8B%B0%EB%B8%8C%EC%9E%90%EB%B0%94-12-toString%EC%9E%AC%EC%A0%95%EC%9D%98/#tostring-%EC%9E%AC%EC%A0%95%EC%9D%98%ED%95%98%EA%B8%B0\">toString 재정의하기</a></li>\n<li><a href=\"/Java/20220314-%EC%9D%B4%ED%8E%99%ED%8B%B0%EB%B8%8C%EC%9E%90%EB%B0%94-12-toString%EC%9E%AC%EC%A0%95%EC%9D%98/#%ED%95%B5%EC%8B%AC-%EC%A0%95%EB%A6%AC\">핵심 정리</a></li>\n<li><a href=\"/Java/20220314-%EC%9D%B4%ED%8E%99%ED%8B%B0%EB%B8%8C%EC%9E%90%EB%B0%94-12-toString%EC%9E%AC%EC%A0%95%EC%9D%98/#add\">Add</a></li>\n</ul>","frontmatter":{"date":"2022년 03월 14일","title":"[Effective Java] Item12. toString을 항상 재정의하라","tags":["Java","Effective Java","toString"]}}},"pageContext":{"slug":"/Java/20220314-이펙티브자바-12-toString재정의/","previous":{"fields":{"slug":"/Java/20220312-이펙티브자바-9/"},"frontmatter":{"title":"[Effective Java] Item9. try-finally보다는 try-with-resources를 사용하라"}},"next":{"fields":{"slug":"/Java/20220314-이펙티브자바-11/"},"frontmatter":{"title":"[Effective Java] Item11. equals를 재정의하려거든 hashCode도 재정의하라"}}}},"staticQueryHashes":["3911196313","4111100897"]}