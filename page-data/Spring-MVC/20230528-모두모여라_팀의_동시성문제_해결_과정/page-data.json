{"componentChunkName":"component---src-templates-blog-post-js","path":"/Spring-MVC/20230528-ëª¨ë‘ëª¨ì—¬ë¼_íŒ€ì˜_ë™ì‹œì„±ë¬¸ì œ_í•´ê²°_ê³¼ì •/","result":{"data":{"site":{"siteMetadata":{"author":"Seongwon","comment":{"utterances":"Seongwon97/Seongwon97.github.io"},"sponsor":{"buyMeACoffeeId":"seongwon"}}},"markdownRemark":{"excerpt":"ì´ë²ˆ ê²Œì‹œê¸€ì€ ëª¨ì„ í”Œë«í¼ì¸ ëª¨ë‘ëª¨ì—¬ë¼ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ë©° ë™ì‹œì„± ë¬¸ì œë¥¼ í•´ê²°í•œ ê³¼ì •ì— ëŒ€í•´ ì •ë¦¬í•œ ê²Œì‹œê¸€ì…ë‹ˆë‹¤. ë‹¨ì¼ ì„œë²„ì—ì„œ ê°„ë‹¨í•˜ê²Œ í•´ê²°í•œ ë°©ë²•ìœ¼ë¡œë¶€í„° ìµœì¢…ì ìœ¼ë¡œ ë¶„ì‚°ë½ì„ ì ìš©í•œ ê³¼ì •ê¹Œì§€ ì „ ê³¼ì •ì„ ì •ë¦¬í•˜ì˜€ìŠµë‹ˆë‹¤. (ì•ì˜ ê³¼ì •ì€ ê°„ë‹¨íˆ ì„¤ëª…í•˜ê³  ìµœì¢… ì ìš©í•œ ë¶„ì‚°ë½ì— ëŒ€í•´ ìì„¸íˆ ì„¤ëª…í•˜ë ¤ í•©ë‹ˆë‹¤.) ëª¨ë‘ëª¨ì—¬ë¼ ì„œë¹„ìŠ¤ì˜ ëª¨ì„ ì°¸ì—¬ ê¸°ëŠ¥ì€ ëª¨ì„ ë³„ë¡œ ì£¼ìµœâ€¦","html":"<p>ì´ë²ˆ ê²Œì‹œê¸€ì€ ëª¨ì„ í”Œë«í¼ì¸ ëª¨ë‘ëª¨ì—¬ë¼ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ë©° ë™ì‹œì„± ë¬¸ì œë¥¼ í•´ê²°í•œ ê³¼ì •ì— ëŒ€í•´ ì •ë¦¬í•œ ê²Œì‹œê¸€ì…ë‹ˆë‹¤. ë‹¨ì¼ ì„œë²„ì—ì„œ ê°„ë‹¨í•˜ê²Œ í•´ê²°í•œ ë°©ë²•ìœ¼ë¡œë¶€í„° ìµœì¢…ì ìœ¼ë¡œ ë¶„ì‚°ë½ì„ ì ìš©í•œ ê³¼ì •ê¹Œì§€ ì „ ê³¼ì •ì„ ì •ë¦¬í•˜ì˜€ìŠµë‹ˆë‹¤. (ì•ì˜ ê³¼ì •ì€ ê°„ë‹¨íˆ ì„¤ëª…í•˜ê³  ìµœì¢… ì ìš©í•œ ë¶„ì‚°ë½ì— ëŒ€í•´ ìì„¸íˆ ì„¤ëª…í•˜ë ¤ í•©ë‹ˆë‹¤.)</p>\n<p>ëª¨ë‘ëª¨ì—¬ë¼ ì„œë¹„ìŠ¤ì˜ ëª¨ì„ ì°¸ì—¬ ê¸°ëŠ¥ì€ ëª¨ì„ ë³„ë¡œ ì£¼ìµœìê°€ ì •í•œ ëª¨ì„ì˜ ì¸ì› ì œí•œì´ ìˆìŠµë‹ˆë‹¤. ë™ì‹œì„± ë¬¸ì œì— ëŒ€í•œ ì•„ë¬´ëŸ° ì²˜ë¦¬ê°€ ì—†ëŠ” ìƒí™©ì—ì„œ ì—¬ëŸ¬ ì°¸ì—¬ìê°€ ë™ì‹œì— ì°¸ì—¬ ìš”ì²­ì„ í•  ê²½ìš° ëª¨ì„ì˜ ì œí•œ ì¸ì›ì„ ë„˜ëŠ” ì°¸ì—¬ìê°€ ìƒê²¨ë‚˜ëŠ” ë¬¸ì œê°€ ë°œìƒí•˜ì˜€ìŠµë‹ˆë‹¤.</p>\n<p>ë¨¼ì € ë¬¸ì œ ìƒí™©ì„ ì•Œì•„ë³´ê³ ì ê¸°ì¡´ ë¡œì§ì„ ì‚´í´ë³´ê³  ëª¨ì„ ì°¸ì—¬ì— ëŒ€í•œ ë™ì‹œì„± í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•˜ë©° í…ŒìŠ¤íŠ¸ë¥¼ í•´ë³´ê² ìŠµë‹ˆë‹¤. ëª¨ì„ ì°¸ì—¬ ë¡œì§ì„ ì‚´í´ë³´ë©´ ì•„ë˜ì™€ ê°™ì´ JPAë¥¼ í†µí•´ ëª¨ì„(Group)ê³¼ íšŒì›(Member) ì •ë³´ë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì½ì–´ì˜¨ í›„ì— ëª¨ì„ ì°¸ì—¬ë¥¼ ì§„í–‰í•˜ì˜€ìŠµë‹ˆë‹¤.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"java\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">RequiredArgsConstructor</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">Transactional</span><span class=\"mtk4\">(</span><span class=\"mtk7\">readOnly</span><span class=\"mtk4\"> </span><span class=\"mtk8\">=</span><span class=\"mtk4\"> </span><span class=\"mtk7\">true</span><span class=\"mtk4\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">Service</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">public</span><span class=\"mtk4\"> </span><span class=\"mtk9\">class</span><span class=\"mtk4\"> </span><span class=\"mtk11\">ParticipateService</span><span class=\"mtk4\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">private</span><span class=\"mtk4\"> </span><span class=\"mtk9\">final</span><span class=\"mtk4\"> </span><span class=\"mtk11\">MemberFindService</span><span class=\"mtk4\"> memberFindService</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">private</span><span class=\"mtk4\"> </span><span class=\"mtk9\">final</span><span class=\"mtk4\"> </span><span class=\"mtk11\">GroupFindService</span><span class=\"mtk4\"> groupFindService</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk1\">@</span><span class=\"mtk11\">Transactional</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">public</span><span class=\"mtk3\"> </span><span class=\"mtk9\">void</span><span class=\"mtk3\"> participate</span><span class=\"mtk1\">(</span><span class=\"mtk11\">Long</span><span class=\"mtk1\"> </span><span class=\"mtk4 mtki\">groupId</span><span class=\"mtk1\">, </span><span class=\"mtk11\">Long</span><span class=\"mtk1\"> </span><span class=\"mtk4 mtki\">memberId</span><span class=\"mtk1\">)</span><span class=\"mtk3\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">Group</span><span class=\"mtk1\"> </span><span class=\"mtk4\">group</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">groupFindService</span><span class=\"mtk1\">.</span><span class=\"mtk3\">findGroup</span><span class=\"mtk1\">(groupId);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">Member</span><span class=\"mtk1\"> </span><span class=\"mtk4\">member</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">memberFindService</span><span class=\"mtk1\">.</span><span class=\"mtk3\">findMember</span><span class=\"mtk1\">(memberId);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">group</span><span class=\"mtk1\">.</span><span class=\"mtk3\">participate</span><span class=\"mtk1\">(member);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p>ë‹¤ìŒìœ¼ë¡œ í…ŒìŠ¤íŠ¸ ì½”ë“œì…ë‹ˆë‹¤. ë™ì‹œì„± ë¬¸ì œë¥¼ í…ŒìŠ¤íŠ¸í•˜ê¸° ìœ„í•´ì„œëŠ” ë™ì‹œ ìš”ì²­ì„ í…ŒìŠ¤íŠ¸ì½”ë“œë¡œ ì‘ì„±í•´ì•¼í•˜ê¸°ì— <code>CountDownLatch</code>ì™€ <code>ExecutorService</code>ë¥¼ í†µí•´ ë³„ë„ì˜ ìŠ¤ë ˆë“œì—ì„œ ì°¸ì—¬ë¡œì§ì´ ë™ì‹œì— ì²˜ë¦¬ë˜ë„ë¡ í•˜ì˜€ìŠµë‹ˆë‹¤.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"java\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">Sql</span><span class=\"mtk4\">(</span><span class=\"mtk7\">value</span><span class=\"mtk4\"> </span><span class=\"mtk8\">=</span><span class=\"mtk4\"> </span><span class=\"mtk6\">&quot;classpath:init.sql&quot;</span><span class=\"mtk1\">,</span><span class=\"mtk4\"> </span><span class=\"mtk7\">executionPhase</span><span class=\"mtk4\"> </span><span class=\"mtk8\">=</span><span class=\"mtk4\"> BEFORE_TEST_METHOD)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">Sql</span><span class=\"mtk4\">(</span><span class=\"mtk7\">value</span><span class=\"mtk4\"> </span><span class=\"mtk8\">=</span><span class=\"mtk4\"> </span><span class=\"mtk6\">&quot;classpath:truncate.sql&quot;</span><span class=\"mtk1\">,</span><span class=\"mtk4\"> </span><span class=\"mtk7\">executionPhase</span><span class=\"mtk4\"> </span><span class=\"mtk8\">=</span><span class=\"mtk4\"> AFTER_TEST_METHOD)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">TestConstructor</span><span class=\"mtk4\">(</span><span class=\"mtk7\">autowireMode</span><span class=\"mtk4\"> </span><span class=\"mtk8\">=</span><span class=\"mtk4\"> </span><span class=\"mtk11\">TestConstructor</span><span class=\"mtk1\">.</span><span class=\"mtk11\">AutowireMode</span><span class=\"mtk1\">.</span><span class=\"mtk4\">ALL)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">RequiredArgsConstructor</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">SpringBootTest</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">class</span><span class=\"mtk4\"> </span><span class=\"mtk11\">ParticipateServiceConcurrencyTest</span><span class=\"mtk4\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">private</span><span class=\"mtk4\"> </span><span class=\"mtk9\">final</span><span class=\"mtk4\"> </span><span class=\"mtk11\">ParticipateService</span><span class=\"mtk4\"> participateService</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">private</span><span class=\"mtk4\"> </span><span class=\"mtk9\">final</span><span class=\"mtk4\"> </span><span class=\"mtk11\">GroupRepository</span><span class=\"mtk4\"> groupRepository</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">private</span><span class=\"mtk4\"> </span><span class=\"mtk9\">final</span><span class=\"mtk4\"> </span><span class=\"mtk11\">MemberRepository</span><span class=\"mtk4\"> memberRepository</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">private</span><span class=\"mtk4\"> </span><span class=\"mtk11\">Member</span><span class=\"mtk4\"> host</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk1\">@</span><span class=\"mtk11\">BeforeEach</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">void</span><span class=\"mtk3\"> setUp</span><span class=\"mtk1\">()</span><span class=\"mtk3\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">this</span><span class=\"mtk1\">.</span><span class=\"mtk4\">host</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">memberRepository</span><span class=\"mtk1\">.</span><span class=\"mtk3\">save</span><span class=\"mtk1\">(</span><span class=\"mtk11\">MOMO</span><span class=\"mtk1\">.</span><span class=\"mtk3\">toMember</span><span class=\"mtk1\">());</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk1\">@</span><span class=\"mtk11\">DisplayName</span><span class=\"mtk4\">(</span><span class=\"mtk6\">&quot;ëª¨ì„ ì°¸ì—¬ ë™ì‹œ ìš”ì²­ì´ ì˜¬ ê²½ìš°ì—ë„ ì •ì›ì„ ë„˜ì–´ì„  ì¸ì›ì´ ëª¨ì„ì— ì°¸ì—¬í•  ìˆ˜ ì—†ë‹¤&quot;</span><span class=\"mtk4\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk1\">@</span><span class=\"mtk11\">Test</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">void</span><span class=\"mtk3\"> participateConcurrencyTest</span><span class=\"mtk1\">()</span><span class=\"mtk3\"> </span><span class=\"mtk9\">throws</span><span class=\"mtk3\"> </span><span class=\"mtk11\">InterruptedException</span><span class=\"mtk3\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk9\">int</span><span class=\"mtk1\"> </span><span class=\"mtk4\">capacity</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">3</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk9\">int</span><span class=\"mtk1\"> </span><span class=\"mtk4\">numOfParticipants</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">50</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk9\">long</span><span class=\"mtk1\"> </span><span class=\"mtk4\">groupId</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">groupRepository</span><span class=\"mtk1\">.</span><span class=\"mtk3\">save</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk11\">MOMO_STUDY</span><span class=\"mtk1\">.</span><span class=\"mtk3\">builder</span><span class=\"mtk1\">()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        .</span><span class=\"mtk3\">capacity</span><span class=\"mtk1\">(capacity)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        .</span><span class=\"mtk3\">toGroup</span><span class=\"mtk1\">(host)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        ).</span><span class=\"mtk3\">getId</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">List</span><span class=\"mtk1\">&lt;</span><span class=\"mtk11\">Long</span><span class=\"mtk1\">&gt; </span><span class=\"mtk4\">participantIds</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk9\">new</span><span class=\"mtk1\"> </span><span class=\"mtk11\">ArrayList</span><span class=\"mtk1\">&lt;&gt;();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk9\">for</span><span class=\"mtk1\"> (</span><span class=\"mtk9\">int</span><span class=\"mtk1\"> </span><span class=\"mtk4\">i</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">0</span><span class=\"mtk1\">; i </span><span class=\"mtk8\">&lt;</span><span class=\"mtk1\"> numOfParticipants; i++) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk11\">Member</span><span class=\"mtk1\"> </span><span class=\"mtk4\">savedMember</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">memberRepository</span><span class=\"mtk1\">.</span><span class=\"mtk3\">save</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span><span class=\"mtk9\">new</span><span class=\"mtk1\"> </span><span class=\"mtk3\">Member</span><span class=\"mtk1\">(</span><span class=\"mtk11\">UserId</span><span class=\"mtk1\">.</span><span class=\"mtk3\">momo</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;user&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk8\">+</span><span class=\"mtk1\"> i),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                            </span><span class=\"mtk11\">Password</span><span class=\"mtk1\">.</span><span class=\"mtk3\">encrypt</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;User123!&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk9\">new</span><span class=\"mtk1\"> </span><span class=\"mtk3\">SHA256Encoder</span><span class=\"mtk1\">()),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                            </span><span class=\"mtk11\">UserName</span><span class=\"mtk1\">.</span><span class=\"mtk3\">from</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;user&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk8\">+</span><span class=\"mtk1\"> i)));</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk11\">participantIds</span><span class=\"mtk1\">.</span><span class=\"mtk3\">add</span><span class=\"mtk1\">(</span><span class=\"mtk11\">savedMember</span><span class=\"mtk1\">.</span><span class=\"mtk3\">getId</span><span class=\"mtk1\">());</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">CountDownLatch</span><span class=\"mtk1\"> </span><span class=\"mtk4\">latch</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk9\">new</span><span class=\"mtk1\"> </span><span class=\"mtk3\">CountDownLatch</span><span class=\"mtk1\">(numOfParticipants);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">ExecutorService</span><span class=\"mtk1\"> </span><span class=\"mtk4\">executor</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Executors</span><span class=\"mtk1\">.</span><span class=\"mtk3\">newFixedThreadPool</span><span class=\"mtk1\">(numOfParticipants);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk9\">for</span><span class=\"mtk1\"> (</span><span class=\"mtk11\">Long</span><span class=\"mtk1\"> </span><span class=\"mtk4\">participantId</span><span class=\"mtk1\"> </span><span class=\"mtk9\">:</span><span class=\"mtk1\"> participantIds) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk11\">executor</span><span class=\"mtk1\">.</span><span class=\"mtk3\">submit</span><span class=\"mtk1\">(() </span><span class=\"mtk9\">-&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk9\">try</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span><span class=\"mtk11\">participateService</span><span class=\"mtk1\">.</span><span class=\"mtk3\">participate</span><span class=\"mtk1\">(groupId, participantId);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                } </span><span class=\"mtk9\">finally</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span><span class=\"mtk11\">latch</span><span class=\"mtk1\">.</span><span class=\"mtk3\">countDown</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            });</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">executor</span><span class=\"mtk1\">.</span><span class=\"mtk3\">shutdown</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">latch</span><span class=\"mtk1\">.</span><span class=\"mtk3\">await</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk9\">long</span><span class=\"mtk1\"> </span><span class=\"mtk4\">actual</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">participateService</span><span class=\"mtk1\">.</span><span class=\"mtk3\">findParticipants</span><span class=\"mtk1\">(groupId).</span><span class=\"mtk3\">size</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk3\">assertThat</span><span class=\"mtk1\">(actual).</span><span class=\"mtk3\">isEqualTo</span><span class=\"mtk1\">(capacity);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p>ê²°ê³¼ë¥¼ ì‚´í´ë³´ë©´ ì•„ë˜ì™€ ê°™ì´ 3ëª…ì˜ ì¸ì› ì œí•œì´ ìˆëŠ” ëª¨ì„ì¸ë° 11ëª…ì˜ ì°¸ì—¬ìê°€ ë°œìƒí•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ì¦‰, ë™ì‹œì„± ë¬¸ì œì— ëŒ€í•œ ì œì–´ê°€ í•„ìš”í•œ ìƒí™©ì…ë‹ˆë‹¤.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 13.999999999999998%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAoklEQVQI11XN2Q6CMBCFYV7HjVZwgUIXKIpUiVyY+P5P8luIF3rx5ZxMJjPJ9AxMrzfXMOL7QNffuQwPatdRWb+onUeZFt1e0K5FCYGWkny3Y7Ve/0lEaVE+cGrvnKPCPyi7kVMTOLphMc8P9oaor0jV4PaSPs8x8WghUoo0pYxPZom2DbW2PwxVtHTzFbuOaeJuqSq6LGM45FRSkG63X5slP4SjZTpQPH/1AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled\"\n        title=\"Untitled\"\n        src=\"/static/0ca2bac81c96d1e4f8331ad99a4ffe7d/c1b63/img.png\"\n        srcset=\"/static/0ca2bac81c96d1e4f8331ad99a4ffe7d/5a46d/img.png 300w,\n/static/0ca2bac81c96d1e4f8331ad99a4ffe7d/0a47e/img.png 600w,\n/static/0ca2bac81c96d1e4f8331ad99a4ffe7d/c1b63/img.png 1200w,\n/static/0ca2bac81c96d1e4f8331ad99a4ffe7d/5fada/img.png 1706w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<h1 id=\"í•´ê²°-ê³¼ì •-1---synchronized\" style=\"position:relative;\"><a href=\"#%ED%95%B4%EA%B2%B0-%EA%B3%BC%EC%A0%95-1---synchronized\" aria-label=\"í•´ê²° ê³¼ì • 1   synchronized permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>í•´ê²° ê³¼ì • 1 - synchronized</h1>\n<p>ì²«ë²ˆì§¸ í•´ê²° ì±…ìœ¼ë¡œëŠ” ìë°”ì—ì„œ í•˜ë‚˜ì˜ ìŠ¤ë ˆë“œë§Œì´ ì„ê³„ êµ¬ì—­(Critical Section)ì— ì ‘ê·¼í•˜ë„ë¡ ì§€ì›í•´ì£¼ëŠ” <code>synchronized</code>ë¥¼ í†µí•´ í•´ê²°í•˜ì˜€ìŠµë‹ˆë‹¤. ë‹¨ìˆœíˆ ê¸°ì¡´ ì°¸ì—¬ ë©”ì„œë“œì— <code>synchronized</code>ë§Œ ë¶™ì—¬ì£¼ëŠ” ì‘ì—…ë§Œìœ¼ë¡œë„ ê¸°ì¡´ì— ë°œìƒí•˜ë˜ ë™ì‹œì„± ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.</p>\n<h2 id=\"ì½”ë“œ-ë°-ê²°ê³¼\" style=\"position:relative;\"><a href=\"#%EC%BD%94%EB%93%9C-%EB%B0%8F-%EA%B2%B0%EA%B3%BC\" aria-label=\"ì½”ë“œ ë° ê²°ê³¼ permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì½”ë“œ ë° ê²°ê³¼</h2>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"java\" data-index=\"2\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">RequiredArgsConstructor</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">Transactional</span><span class=\"mtk4\">(</span><span class=\"mtk7\">readOnly</span><span class=\"mtk4\"> </span><span class=\"mtk8\">=</span><span class=\"mtk4\"> </span><span class=\"mtk7\">true</span><span class=\"mtk4\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">Service</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">public</span><span class=\"mtk4\"> </span><span class=\"mtk9\">class</span><span class=\"mtk4\"> </span><span class=\"mtk11\">ParticipateService</span><span class=\"mtk4\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">private</span><span class=\"mtk4\"> </span><span class=\"mtk9\">final</span><span class=\"mtk4\"> </span><span class=\"mtk11\">MemberFindService</span><span class=\"mtk4\"> memberFindService</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">private</span><span class=\"mtk4\"> </span><span class=\"mtk9\">final</span><span class=\"mtk4\"> </span><span class=\"mtk11\">GroupFindService</span><span class=\"mtk4\"> groupFindService</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk1\">@</span><span class=\"mtk11\">Transactional</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">public</span><span class=\"mtk3\"> </span><span class=\"mtk9\">synchronized</span><span class=\"mtk3\"> </span><span class=\"mtk9\">void</span><span class=\"mtk3\"> participate</span><span class=\"mtk1\">(</span><span class=\"mtk11\">Long</span><span class=\"mtk1\"> </span><span class=\"mtk4 mtki\">groupId</span><span class=\"mtk1\">, </span><span class=\"mtk11\">Long</span><span class=\"mtk1\"> </span><span class=\"mtk4 mtki\">memberId</span><span class=\"mtk1\">)</span><span class=\"mtk3\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">Group</span><span class=\"mtk1\"> </span><span class=\"mtk4\">group</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">groupFindService</span><span class=\"mtk1\">.</span><span class=\"mtk3\">findGroup</span><span class=\"mtk1\">(groupId);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">Member</span><span class=\"mtk1\"> </span><span class=\"mtk4\">member</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">memberFindService</span><span class=\"mtk1\">.</span><span class=\"mtk3\">findMember</span><span class=\"mtk1\">(memberId);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">group</span><span class=\"mtk1\">.</span><span class=\"mtk3\">participate</span><span class=\"mtk1\">(member);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1064px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 12%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAgElEQVQI1zWKSw6CMABEuQvRjUqM6AbRUiNQY4si9nf/gzyLxsXLm5lMtjw0FKKl6kfq20QpNetjz6ZWrKrum4uTYrFvyHdn8lL8mPO/J2/TZyYTjURcJEornPOEEHlbi/ceax0xxrQFXtOE1oZheGDMgEl+jiPaGO5pb9uOa+IDtJZHfqaweKkAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled\"\n        title=\"Untitled\"\n        src=\"/static/2c2fcb14468ed88dce4dff85028df3e4/dd104/img_1.png\"\n        srcset=\"/static/2c2fcb14468ed88dce4dff85028df3e4/5a46d/img_1.png 300w,\n/static/2c2fcb14468ed88dce4dff85028df3e4/0a47e/img_1.png 600w,\n/static/2c2fcb14468ed88dce4dff85028df3e4/dd104/img_1.png 1064w\"\n        sizes=\"(max-width: 1064px) 100vw, 1064px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<blockquote>\n<p>ê´€ë ¨ PR: <a href=\"https://github.com/woowacourse-teams/2022-momo/pull/431\">https://github.com/woowacourse-teams/2022-momo/pull/431</a></p>\n</blockquote>\n<h2 id=\"ë‚¨ì•„ìˆëŠ”-ë¬¸ì œ\" style=\"position:relative;\"><a href=\"#%EB%82%A8%EC%95%84%EC%9E%88%EB%8A%94-%EB%AC%B8%EC%A0%9C\" aria-label=\"ë‚¨ì•„ìˆëŠ” ë¬¸ì œ permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë‚¨ì•„ìˆëŠ” ë¬¸ì œ</h2>\n<p>í•˜ì§€ë§Œ í•´ë‹¹ ë°©ë²•ì€ ë‹¨ì¼ ì„œë²„ì—ì„œëŠ” í•´ê²°ë²•ì´ ë  ìˆ˜ ìˆìœ¼ë‚˜, Nê°œì˜ ì„œë²„ë¥¼ ìš´ì˜í•˜ëŠ” ë¶„ì‚° í™˜ê²½ì—ì„œëŠ” ê°ê°ì˜ ì„œë²„ì—ì„œ 1ê°œì˜ ìš”ì²­ì”© ë™ì‘ì‹œí‚¨ë‹¤ í•˜ë”ë¼ë„ ì „ì²´ì ì¸ ì‹œìŠ¤í…œì„ ë³´ë©´ Nê°œì˜ ë™ì¼ ìš”ì²­ì´ ì‹¤í–‰ë˜ì–´ ë™ì‹œ ì ‘ê·¼ì„ ì œì–´í•˜ì§€ ëª»í•˜ê²Œ ë©ë‹ˆë‹¤.</p>\n<p>ê·¸ëŸ¼ ë‹¤ì¤‘ ì„œë²„ì—ì„œ ë™ì‹œì„± ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” ë°©ë²•ì€ ë¬´ì—‡ì´ ìˆì„ê¹Œìš”?? ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œëŠ” JPAì—ì„œ ì œê³µí•˜ëŠ” <strong>ë‚™ê´€ì ë½</strong>, ë°ì´í„°ë² ì´ìŠ¤ì— x-lockì„ ê±°ëŠ” <strong>ë¹„ê´€ì ë½</strong>, ë½ì€ ê´€ë¦¬í•˜ëŠ” ì™¸ë¶€ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì´ìš©í•œ <strong>ë¶„ì‚°ë½</strong>ì´ ì¡´ì¬í•©ë‹ˆë‹¤. ì´ ì¤‘ì—ì„œ ëª¨ë‘ëª¨ì—¬ë¼ íŒ€ì€ ë¨¼ì € ë‚™ê´€ì ë½ê³¼ ë¹„ê´€ì ë½ì„ ê³ ë ¤í•˜ë©° ë¡œì§ì„ ìˆ˜ì •í•´ë´¤ìŠµë‹ˆë‹¤.</p>\n<blockquote>\n<p>ğŸ“ŒÂ í•´ë‹¹ ê²Œì‹œê¸€ì€ í”„ë¡œì íŠ¸ì—ì„œ ë°œìƒí•œ ë¬¸ì œë¥¼ ê¸°ë¡í•˜ê³  ì •ë¦¬í•˜ëŠ” ê²Œì‹œê¸€ì¸ ë§Œí¼ ìì„¸í•œ ì´ë¡ ì— ëŒ€í•´ ë‹¤ë£¨ì§€ ì•Šê³  ìˆìŠµë‹ˆë‹¤. ë‚™ê´€ì ë½, ë¹„ê´€ì ë½, ë¶„ì‚°ë½ì— ëŒ€í•´ ìì„¸íˆ ì•Œê³ ì‹¶ìœ¼ì‹œë©´ ì•„ë˜ì˜ í¬ìŠ¤íŠ¸ë¥¼ í™•ì¸í•´ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤.</p>\n<p><a href=\"https://seongwon.dev/Spring-MVC/20230430-%EB%B9%84%EA%B4%80%EC%A0%81%EB%9D%BD%EA%B3%BC_%EB%82%99%EA%B4%80%EC%A0%81%EB%9D%BD/\">ë¹„ê´€ì  ë½(Pessimistic Lock)ê³¼ ë‚™ê´€ì  ë½(Optimistic Lock)</a></p>\n<p><a href=\"https://seongwon.dev/MSA/20230503-Redis%EB%A5%BC_%ED%86%B5%ED%95%9C_%EB%B6%84%EC%82%B0%EB%9D%BD%EC%9C%BC%EB%A1%9C_%EB%8F%99%EC%8B%9C%EC%84%B1_%EB%AC%B8%EC%A0%9C_%EC%A0%9C%EC%96%B4%ED%95%98%EA%B8%B0/\">Redisë¥¼ í†µí•œ ë¶„ì‚°ë½(Distribution Lock)ìœ¼ë¡œ ë™ì‹œì„± ë¬¸ì œ ì œì–´í•˜ê¸°</a></p>\n</blockquote>\n<h1 id=\"í•´ê²°-ê³¼ì •-2---ë¹„ê´€ì -ë½-vs-ë‚™ê´€ì -ë½\" style=\"position:relative;\"><a href=\"#%ED%95%B4%EA%B2%B0-%EA%B3%BC%EC%A0%95-2---%EB%B9%84%EA%B4%80%EC%A0%81-%EB%9D%BD-vs-%EB%82%99%EA%B4%80%EC%A0%81-%EB%9D%BD\" aria-label=\"í•´ê²° ê³¼ì • 2   ë¹„ê´€ì  ë½ vs ë‚™ê´€ì  ë½ permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>í•´ê²° ê³¼ì • 2 - ë¹„ê´€ì  ë½ vs ë‚™ê´€ì  ë½</h1>\n<p>ìš°ë¦¬ íŒ€ì€ ì„œë¹„ìŠ¤ì˜ íŠ¹ì„±ì„ ê³ ë ¤í•˜ì—¬ ë‚™ê´€ì  ë½ê³¼ ë¹„ê´€ì  ë½ ì¤‘ ë¹„ê´€ì  ë½ì„ ì„ íƒ ë° ì ìš©í•˜ì˜€ìŠµë‹ˆë‹¤. ì„ íƒ ì´ìœ ëŠ” ì¶©ëŒì— ëŒ€í•œ ì¦ì€ ë¡¤ë°± ì²˜ë¦¬ë¡œ ì¸í•´ ì„±ëŠ¥ì´ ë” ì•ˆ ì¢‹ì•„ì§ˆ ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ì—ˆë‹¤.</p>\n<p>ì´í•´ë¥¼ ë•ê¸° ìœ„í•´ ìƒí™© ì˜ˆì‹œë¥¼ í•œë²ˆ ë“¤ì–´ë³´ê² ìŠµë‹ˆë‹¤. 10ëª…ë§Œ ì°¸ì—¬ ê°€ëŠ¥í•œ ëª¨ì„ ì„œë¹„ìŠ¤ì— ë‚™ê´€ì  ë½ì´ ê±¸ë ¤ìˆê³  1000ëª…ì´ ë™ì‹œ ìš”ì²­ì„ í•˜ì˜€ë‹¤ ê°€ì •í•˜ë©´ ìµœì´ˆë¡œ ë°ì´í„°ë² ì´ìŠ¤ì— Commit ìš”ì²­ì´ ì²˜ë¦¬ëœ 1ëª…ì€ í†µê³¼í•˜ë©° ì—”í‹°í‹°ì˜ ë²„ì „ì„ ë³€ê²½í•˜ê²Œ ë©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ì´í›„ì˜ ë‚¨ì€ 999ëª…ì€ ì—…ë°ì´íŠ¸ ì‹œì ì— ë²„ì „ì„ í™•ì¸í•˜ì˜€ëŠ”ë° ë²„ì „ì´ ë³€ê²½ë˜ì—ˆê¸°ì— ì·¨ì†Œë˜ê³  ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì˜¤ë¥˜ ì²˜ë¦¬ ë¡œì§ì— ë”°ë¼ ë‹¤ì‹œ ì¬ì‹œë„ë¥¼ ìš”ì²­í•˜ê²Œ ë©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ë‹¤ìŒ í•œëª…ì´ ìš”ì²­ì„ ì²˜ë¦¬í•˜ê²Œë˜ê³  ë‚¨ì€ 998ëª…ì€ ë‹¤ì‹œ ìƒˆë¡œìš´ ë²„ì „ì„ ì½ê³  ì¬ì‹œë„ë¥¼ í•´ì•¼í•œë‹¤â€¦(ë°˜ë³µ)</p>\n<p>ì´ì™€ ê°™ì´ ì¸ê¸° ìˆëŠ” ëª¨ì„ì— ì°¸ì—¬ ë™ì‹œ ìš”ì²­ì´ ë°œìƒí•  ê²½ìš°, ì¦ì€ ì¶©ëŒë¡œ ì¸í•œ ë‚™ê´€ì  ë½ì˜ ì˜¤ë¥˜ ì²˜ë¦¬ ë¹„ìš©ìœ¼ë¡œ ì¸í•´ ì„±ëŠ¥ì— ë” ì˜í–¥ì„ ì¤„ ê²ƒì´ë¼ íŒë‹¨í•´ ë¹„ê´€ì  ë½ì„ íƒí•˜ì˜€ìŠµë‹ˆë‹¤.</p>\n<h2 id=\"ì½”ë“œ-ë°-ê²°ê³¼-1\" style=\"position:relative;\"><a href=\"#%EC%BD%94%EB%93%9C-%EB%B0%8F-%EA%B2%B0%EA%B3%BC-1\" aria-label=\"ì½”ë“œ ë° ê²°ê³¼ 1 permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì½”ë“œ ë° ê²°ê³¼</h2>\n<p>ë¹„ê´€ì  ë½ì„ ì ìš©í•œ ì½”ë“œëŠ” ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"java\" data-index=\"3\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">public</span><span class=\"mtk4\"> </span><span class=\"mtk9\">interface</span><span class=\"mtk4\"> </span><span class=\"mtk11\">GroupSearchRepository</span><span class=\"mtk4\"> </span><span class=\"mtk9\">extends</span><span class=\"mtk4\"> </span><span class=\"mtk11\">Repository</span><span class=\"mtk1\">&lt;</span><span class=\"mtk11\">Group</span><span class=\"mtk1\">,</span><span class=\"mtk4\"> </span><span class=\"mtk11\">Long</span><span class=\"mtk1\">&gt;,</span><span class=\"mtk4\"> </span><span class=\"mtk11\">GroupSearchRepositoryCustom</span><span class=\"mtk4\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk1\">@</span><span class=\"mtk11\">Lock</span><span class=\"mtk4\">(</span><span class=\"mtk7\">value</span><span class=\"mtk4\"> </span><span class=\"mtk8\">=</span><span class=\"mtk4\"> </span><span class=\"mtk11\">LockModeType</span><span class=\"mtk1\">.</span><span class=\"mtk4\">PESSIMISTIC_WRITE)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk1\">@</span><span class=\"mtk11\">Query</span><span class=\"mtk4\">(</span><span class=\"mtk6\">&quot;select g from Group g where g.id = :id&quot;</span><span class=\"mtk4\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk11\">Optional</span><span class=\"mtk1\">&lt;</span><span class=\"mtk11\">Group</span><span class=\"mtk1\">&gt;</span><span class=\"mtk3\"> findByIdForUpdate</span><span class=\"mtk1\">(@</span><span class=\"mtk11\">Param</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;id&quot;</span><span class=\"mtk1\">) </span><span class=\"mtk11\">Long</span><span class=\"mtk1\"> </span><span class=\"mtk4 mtki\">id</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk1\">...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"java\" data-index=\"4\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">RequiredArgsConstructor</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">Transactional</span><span class=\"mtk4\">(</span><span class=\"mtk7\">readOnly</span><span class=\"mtk4\"> </span><span class=\"mtk8\">=</span><span class=\"mtk4\"> </span><span class=\"mtk7\">true</span><span class=\"mtk4\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">Service</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">public</span><span class=\"mtk4\"> </span><span class=\"mtk9\">class</span><span class=\"mtk4\"> </span><span class=\"mtk11\">GroupFindService</span><span class=\"mtk4\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">private</span><span class=\"mtk4\"> </span><span class=\"mtk9\">final</span><span class=\"mtk4\"> </span><span class=\"mtk11\">GroupSearchRepository</span><span class=\"mtk4\"> groupSearchRepository</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">private</span><span class=\"mtk4\"> </span><span class=\"mtk9\">final</span><span class=\"mtk4\"> </span><span class=\"mtk11\">ParticipantRepository</span><span class=\"mtk4\"> participantRepository</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk1\">...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">public</span><span class=\"mtk3\"> </span><span class=\"mtk11\">Group</span><span class=\"mtk3\"> findByIdForUpdate</span><span class=\"mtk1\">(</span><span class=\"mtk11\">Long</span><span class=\"mtk1\"> </span><span class=\"mtk4 mtki\">id</span><span class=\"mtk1\">)</span><span class=\"mtk3\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk9\">return</span><span class=\"mtk1\"> </span><span class=\"mtk11\">groupSearchRepository</span><span class=\"mtk1\">.</span><span class=\"mtk3\">findByIdForUpdate</span><span class=\"mtk1\">(id)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                .</span><span class=\"mtk3\">orElseThrow</span><span class=\"mtk1\">(() </span><span class=\"mtk9\">-&gt;</span><span class=\"mtk1\"> </span><span class=\"mtk9\">new</span><span class=\"mtk1\"> </span><span class=\"mtk3\">GroupException</span><span class=\"mtk1\">(NOT_EXIST));</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk1\">...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"java\" data-index=\"5\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">RequiredArgsConstructor</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">Transactional</span><span class=\"mtk4\">(</span><span class=\"mtk7\">readOnly</span><span class=\"mtk4\"> </span><span class=\"mtk8\">=</span><span class=\"mtk4\"> </span><span class=\"mtk7\">true</span><span class=\"mtk4\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">Service</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">public</span><span class=\"mtk4\"> </span><span class=\"mtk9\">class</span><span class=\"mtk4\"> </span><span class=\"mtk11\">ParticipateService</span><span class=\"mtk4\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">private</span><span class=\"mtk4\"> </span><span class=\"mtk9\">final</span><span class=\"mtk4\"> </span><span class=\"mtk11\">MemberFindService</span><span class=\"mtk4\"> memberFindService</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">private</span><span class=\"mtk4\"> </span><span class=\"mtk9\">final</span><span class=\"mtk4\"> </span><span class=\"mtk11\">GroupFindService</span><span class=\"mtk4\"> groupFindService</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk1\">@</span><span class=\"mtk11\">Transactional</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">public</span><span class=\"mtk3\"> </span><span class=\"mtk9\">void</span><span class=\"mtk3\"> participate</span><span class=\"mtk1\">(</span><span class=\"mtk11\">Long</span><span class=\"mtk1\"> </span><span class=\"mtk4 mtki\">groupId</span><span class=\"mtk1\">, </span><span class=\"mtk11\">Long</span><span class=\"mtk1\"> </span><span class=\"mtk4 mtki\">memberId</span><span class=\"mtk1\">)</span><span class=\"mtk3\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">Group</span><span class=\"mtk1\"> </span><span class=\"mtk4\">group</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">groupFindService</span><span class=\"mtk1\">.</span><span class=\"mtk3\">findByIdForUpdate</span><span class=\"mtk1\">(groupId);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">Member</span><span class=\"mtk1\"> </span><span class=\"mtk4\">member</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">memberFindService</span><span class=\"mtk1\">.</span><span class=\"mtk3\">findMember</span><span class=\"mtk1\">(memberId);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">group</span><span class=\"mtk1\">.</span><span class=\"mtk3\">participate</span><span class=\"mtk1\">(member);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk1\">...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 964px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 13.666666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAoElEQVQI12WMSw6CMBiEOYNEV3oBDSxcuZDSliIq0scPBe5/kbFtTDRxMflmJpPJDheJsiGUklAIi/1ZYVvUf9oVHPmpQn6svvxo8+MzJiVU34GmGdO8gvwCQxNcyJHaEtw4p769P1ELhVoq8KYFl22iaG6Jsc8qJnDlDF3/gCMfDhz6QcOGMxPOYnbRO4Jf1pRf2qRuMC7sRtDoEwdt8Qbz1Gpf8ZGfDwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled\"\n        title=\"Untitled\"\n        src=\"/static/32a899415d77db829dc7ba99100d24e1/72aae/img_2.png\"\n        srcset=\"/static/32a899415d77db829dc7ba99100d24e1/5a46d/img_2.png 300w,\n/static/32a899415d77db829dc7ba99100d24e1/0a47e/img_2.png 600w,\n/static/32a899415d77db829dc7ba99100d24e1/72aae/img_2.png 964w\"\n        sizes=\"(max-width: 964px) 100vw, 964px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•œ ê²°ê³¼ ì •ìƒì ìœ¼ë¡œ í†µê³¼í•˜ë©° ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.</p>\n<h2 id=\"ë‚¨ì•„ìˆëŠ”-ë¬¸ì œ-1\" style=\"position:relative;\"><a href=\"#%EB%82%A8%EC%95%84%EC%9E%88%EB%8A%94-%EB%AC%B8%EC%A0%9C-1\" aria-label=\"ë‚¨ì•„ìˆëŠ” ë¬¸ì œ 1 permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë‚¨ì•„ìˆëŠ” ë¬¸ì œ</h2>\n<p>ë¹„ê´€ì  ë½ì„ ì ìš©í•˜ë©° ë‹¤ì¤‘ ì„œë²„ì—ì„œ ë™ì‹œì„± ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ëŠ” ìˆì—ˆìœ¼ë‚˜ ë°ì´í„° ë² ì´ìŠ¤ì— x-lockì„ ê±¸ê²Œ ë˜ë©° ì“°ê¸° ë¿ë§Œ ì•„ë‹ˆë¼ ë°ì´í„° ì¡°íšŒì—ë„ ì˜í–¥ì„ ì£¼ëŠ” ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"java\" data-index=\"6\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">RequiredArgsConstructor</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">Transactional</span><span class=\"mtk4\">(</span><span class=\"mtk7\">readOnly</span><span class=\"mtk4\"> </span><span class=\"mtk8\">=</span><span class=\"mtk4\"> </span><span class=\"mtk7\">true</span><span class=\"mtk4\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">Service</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">public</span><span class=\"mtk4\"> </span><span class=\"mtk9\">class</span><span class=\"mtk4\"> </span><span class=\"mtk11\">ParticipateService</span><span class=\"mtk4\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">private</span><span class=\"mtk4\"> </span><span class=\"mtk9\">final</span><span class=\"mtk4\"> </span><span class=\"mtk11\">MemberFindService</span><span class=\"mtk4\"> memberFindService</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">private</span><span class=\"mtk4\"> </span><span class=\"mtk9\">final</span><span class=\"mtk4\"> </span><span class=\"mtk11\">GroupFindService</span><span class=\"mtk4\"> groupFindService</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk1\">@</span><span class=\"mtk11\">Transactional</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">public</span><span class=\"mtk3\"> </span><span class=\"mtk9\">void</span><span class=\"mtk3\"> participate</span><span class=\"mtk1\">(</span><span class=\"mtk11\">Long</span><span class=\"mtk1\"> </span><span class=\"mtk4 mtki\">groupId</span><span class=\"mtk1\">, </span><span class=\"mtk11\">Long</span><span class=\"mtk1\"> </span><span class=\"mtk4 mtki\">memberId</span><span class=\"mtk1\">)</span><span class=\"mtk3\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk5 mtki\">// findByIdForUpdate -&gt; SELECT FOR UPDATEë¥¼ í†µí•œ x-lock íšë“</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">Group</span><span class=\"mtk1\"> </span><span class=\"mtk4\">group</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">groupFindService</span><span class=\"mtk1\">.</span><span class=\"mtk3\">findByIdForUpdate</span><span class=\"mtk1\">(groupId);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">Member</span><span class=\"mtk1\"> </span><span class=\"mtk4\">member</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">memberFindService</span><span class=\"mtk1\">.</span><span class=\"mtk3\">findMember</span><span class=\"mtk1\">(memberId);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk5 mtki\">// group ê°ì²´ëŠ” capacityì™€ ì°¸ì—¬ìì˜ ì •ë³´ë¥¼ ì–»ê¸° ìœ„í•œ ê·¸ë˜í”„ íƒìƒ‰ì„ í•˜ê¸° ìœ„í•´ íšë“</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk5 mtki\">// group í…Œì´ë¸”ì—ëŠ” ë³€ê²½ X, Participants í…Œì´ë¸”ì—ë§Œ ìƒˆë¡œìš´ ì°¸ê°€ì ë°ì´í„°ê°€ ì¶”ê°€ë¨</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">group</span><span class=\"mtk1\">.</span><span class=\"mtk3\">participate</span><span class=\"mtk1\">(member);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p>ìœ„ì˜ ë¡œì§ì„ ì‚´í´ë³´ë©´Â <code>participate()</code>Â ë©”ì„œë“œê°€ ì‹¤í–‰ë¨ê³¼ ë™ì‹œì—Â <code>SELECT FOR UPDATE</code>ë¥¼ í†µí•´ Groupì •ë³´ë¥¼ ì–»ìœ¼ë©° í•´ë‹¹ ë°ì´í„°ì— x-lockì„ ê±¸ë©° ë‹¤ë¥¸ ì½ê¸°, ì“°ê¸° ìš”ì²­ì— ëŒ€í•œ ëª¨ë“  ì ‘ê·¼ì„ ì œí•œí•˜ì˜€ìŠµë‹ˆë‹¤.Â <strong>ì¦‰, ëª¨ì„ ì°¸ì—¬ ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” ê³¼ì •ì—ì„œ ëª¨ì„ í…Œì´ë¸”ì— ë³€ë™ì„ ì£¼ì§€ ì•ŠìŒì—ë„ ë¶ˆêµ¬í•˜ê³  ëª¨ì„ ì¡°íšŒì— ëŒ€í•œ ì ‘ê·¼ë„ ë§‰ê²Œ ë˜ë©° ì¡°íšŒ ì„±ëŠ¥ì—ë„ ì˜í–¥ì„ ì£¼ê²Œ ëœê²ë‹ˆë‹¤.</strong></p>\n<h1 id=\"-reference\" style=\"position:relative;\"><a href=\"#-reference\" aria-label=\" reference permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ“šÂ Reference</h1>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .one-dark-pro {\n    background-color: #282c34;\n    color: #abb2bf;\n  }\n  .one-dark-pro .mtki { font-style: italic; }\n  .one-dark-pro .mtk1 { color: #ABB2BF; }\n  .one-dark-pro .mtk11 { color: #E5C07B; }\n  .one-dark-pro .mtk4 { color: #E06C75; }\n  .one-dark-pro .mtk7 { color: #D19A66; }\n  .one-dark-pro .mtk8 { color: #56B6C2; }\n  .one-dark-pro .mtk9 { color: #C678DD; }\n  .one-dark-pro .mtk3 { color: #61AFEF; }\n  .one-dark-pro .mtk6 { color: #98C379; }\n  .one-dark-pro .mtk5 { color: #7F848E; }\n  .one-dark-pro .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));\n  }\n</style>","tableOfContents":"<ul>\n<li>\n<p><a href=\"/Spring-MVC/20230528-%EB%AA%A8%EB%91%90%EB%AA%A8%EC%97%AC%EB%9D%BC_%ED%8C%80%EC%9D%98_%EB%8F%99%EC%8B%9C%EC%84%B1%EB%AC%B8%EC%A0%9C_%ED%95%B4%EA%B2%B0_%EA%B3%BC%EC%A0%95/#%ED%95%B4%EA%B2%B0-%EA%B3%BC%EC%A0%95-1---synchronized\">í•´ê²° ê³¼ì • 1 - synchronized</a></p>\n<ul>\n<li><a href=\"/Spring-MVC/20230528-%EB%AA%A8%EB%91%90%EB%AA%A8%EC%97%AC%EB%9D%BC_%ED%8C%80%EC%9D%98_%EB%8F%99%EC%8B%9C%EC%84%B1%EB%AC%B8%EC%A0%9C_%ED%95%B4%EA%B2%B0_%EA%B3%BC%EC%A0%95/#%EC%BD%94%EB%93%9C-%EB%B0%8F-%EA%B2%B0%EA%B3%BC\">ì½”ë“œ ë° ê²°ê³¼</a></li>\n<li><a href=\"/Spring-MVC/20230528-%EB%AA%A8%EB%91%90%EB%AA%A8%EC%97%AC%EB%9D%BC_%ED%8C%80%EC%9D%98_%EB%8F%99%EC%8B%9C%EC%84%B1%EB%AC%B8%EC%A0%9C_%ED%95%B4%EA%B2%B0_%EA%B3%BC%EC%A0%95/#%EB%82%A8%EC%95%84%EC%9E%88%EB%8A%94-%EB%AC%B8%EC%A0%9C\">ë‚¨ì•„ìˆëŠ” ë¬¸ì œ</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/Spring-MVC/20230528-%EB%AA%A8%EB%91%90%EB%AA%A8%EC%97%AC%EB%9D%BC_%ED%8C%80%EC%9D%98_%EB%8F%99%EC%8B%9C%EC%84%B1%EB%AC%B8%EC%A0%9C_%ED%95%B4%EA%B2%B0_%EA%B3%BC%EC%A0%95/#%ED%95%B4%EA%B2%B0-%EA%B3%BC%EC%A0%95-2---%EB%B9%84%EA%B4%80%EC%A0%81-%EB%9D%BD-vs-%EB%82%99%EA%B4%80%EC%A0%81-%EB%9D%BD\">í•´ê²° ê³¼ì • 2 - ë¹„ê´€ì  ë½ vs ë‚™ê´€ì  ë½</a></p>\n<ul>\n<li><a href=\"/Spring-MVC/20230528-%EB%AA%A8%EB%91%90%EB%AA%A8%EC%97%AC%EB%9D%BC_%ED%8C%80%EC%9D%98_%EB%8F%99%EC%8B%9C%EC%84%B1%EB%AC%B8%EC%A0%9C_%ED%95%B4%EA%B2%B0_%EA%B3%BC%EC%A0%95/#%EC%BD%94%EB%93%9C-%EB%B0%8F-%EA%B2%B0%EA%B3%BC-1\">ì½”ë“œ ë° ê²°ê³¼</a></li>\n<li><a href=\"/Spring-MVC/20230528-%EB%AA%A8%EB%91%90%EB%AA%A8%EC%97%AC%EB%9D%BC_%ED%8C%80%EC%9D%98_%EB%8F%99%EC%8B%9C%EC%84%B1%EB%AC%B8%EC%A0%9C_%ED%95%B4%EA%B2%B0_%EA%B3%BC%EC%A0%95/#%EB%82%A8%EC%95%84%EC%9E%88%EB%8A%94-%EB%AC%B8%EC%A0%9C-1\">ë‚¨ì•„ìˆëŠ” ë¬¸ì œ</a></li>\n</ul>\n</li>\n<li><a href=\"/Spring-MVC/20230528-%EB%AA%A8%EB%91%90%EB%AA%A8%EC%97%AC%EB%9D%BC_%ED%8C%80%EC%9D%98_%EB%8F%99%EC%8B%9C%EC%84%B1%EB%AC%B8%EC%A0%9C_%ED%95%B4%EA%B2%B0_%EA%B3%BC%EC%A0%95/#-reference\">ğŸ“šÂ Reference</a></li>\n</ul>","frontmatter":{"date":"2023ë…„ 05ì›” 28ì¼","title":"ëª¨ë‘ëª¨ì—¬ë¼ íŒ€ì˜ ë™ì‹œì„± ë¬¸ì œ í•´ê²° ê³¼ì • (feat. Redis, ë¶„ì‚°ë½)","tags":["SpringFramework","JPA","synchronized","ë¹„ê´€ì ë½","Pessimistic Lock","ë‚™ê´€ì ë½","Optimistic Lock","Redis","ë¶„ì‚°ë½","Reddisson"]}}},"pageContext":{"slug":"/Spring-MVC/20230528-ëª¨ë‘ëª¨ì—¬ë¼_íŒ€ì˜_ë™ì‹œì„±ë¬¸ì œ_í•´ê²°_ê³¼ì •/","previous":{"fields":{"slug":"/Database/20230515-ëª¨ëª¨íŒ€_Redisìºì‹œë¥¼_í†µí•œ_ì„±ëŠ¥_í–¥ìƒ/"},"frontmatter":{"title":"ëª¨ëª¨íŒ€ Redisìºì‹œë¥¼ í†µí•œ ì„±ëŠ¥ í–¥ìƒ"}},"next":null}},"staticQueryHashes":["3911196313","4111100897"]}