{"componentChunkName":"component---src-templates-blog-post-js","path":"/Spring-MVC/20230528-ëª¨ë‘ëª¨ì—¬ë¼_íŒ€ì˜_ë™ì‹œì„±ë¬¸ì œ_í•´ê²°_ê³¼ì •/","result":{"data":{"site":{"siteMetadata":{"author":"Seongwon","comment":{"utterances":"Seongwon97/Seongwon97.github.io"},"sponsor":{"buyMeACoffeeId":"seongwon"}}},"markdownRemark":{"excerpt":"ì´ë²ˆ ê²Œì‹œê¸€ì€ ëª¨ì„ í”Œë«í¼ì¸ ëª¨ë‘ëª¨ì—¬ë¼ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ë©° ë™ì‹œì„± ë¬¸ì œë¥¼ í•´ê²°í•œ ê³¼ì •ì— ëŒ€í•´ ì •ë¦¬í•œ ê²Œì‹œê¸€ì…ë‹ˆë‹¤. ë‹¨ì¼ ì„œë²„ì—ì„œ ê°„ë‹¨í•˜ê²Œ í•´ê²°í•œ ë°©ë²•ìœ¼ë¡œë¶€í„° ìµœì¢…ì ìœ¼ë¡œ ë¶„ì‚°ë½ì„ ì ìš©í•œ ê³¼ì •ê¹Œì§€ ì „ ê³¼ì •ì„ ì •ë¦¬í•˜ì˜€ìŠµë‹ˆë‹¤. (ì•ì˜ ê³¼ì •ì€ ê°„ë‹¨íˆ ì„¤ëª…í•˜ê³  ìµœì¢… ì ìš©í•œ ë¶„ì‚°ë½ì— ëŒ€í•´ ìì„¸íˆ ì„¤ëª…í•˜ë ¤ í•©ë‹ˆë‹¤.) ëª¨ë‘ëª¨ì—¬ë¼ ì„œë¹„ìŠ¤ì˜ ëª¨ì„ ì°¸ì—¬ ê¸°ëŠ¥ì€ ëª¨ì„ ë³„ë¡œ ì£¼ìµœâ€¦","html":"<p>ì´ë²ˆ ê²Œì‹œê¸€ì€ ëª¨ì„ í”Œë«í¼ì¸ ëª¨ë‘ëª¨ì—¬ë¼ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ë©° ë™ì‹œì„± ë¬¸ì œë¥¼ í•´ê²°í•œ ê³¼ì •ì— ëŒ€í•´ ì •ë¦¬í•œ ê²Œì‹œê¸€ì…ë‹ˆë‹¤. ë‹¨ì¼ ì„œë²„ì—ì„œ ê°„ë‹¨í•˜ê²Œ í•´ê²°í•œ ë°©ë²•ìœ¼ë¡œë¶€í„° ìµœì¢…ì ìœ¼ë¡œ ë¶„ì‚°ë½ì„ ì ìš©í•œ ê³¼ì •ê¹Œì§€ ì „ ê³¼ì •ì„ ì •ë¦¬í•˜ì˜€ìŠµë‹ˆë‹¤. (ì•ì˜ ê³¼ì •ì€ ê°„ë‹¨íˆ ì„¤ëª…í•˜ê³  ìµœì¢… ì ìš©í•œ ë¶„ì‚°ë½ì— ëŒ€í•´ ìì„¸íˆ ì„¤ëª…í•˜ë ¤ í•©ë‹ˆë‹¤.)</p>\n<p>ëª¨ë‘ëª¨ì—¬ë¼ ì„œë¹„ìŠ¤ì˜ ëª¨ì„ ì°¸ì—¬ ê¸°ëŠ¥ì€ ëª¨ì„ ë³„ë¡œ ì£¼ìµœìê°€ ì •í•œ ëª¨ì„ì˜ ì¸ì› ì œí•œì´ ìˆìŠµë‹ˆë‹¤. ë™ì‹œì„± ë¬¸ì œì— ëŒ€í•œ ì•„ë¬´ëŸ° ì²˜ë¦¬ê°€ ì—†ëŠ” ìƒí™©ì—ì„œ ì—¬ëŸ¬ ì°¸ì—¬ìê°€ ë™ì‹œì— ì°¸ì—¬ ìš”ì²­ì„ í•  ê²½ìš° ëª¨ì„ì˜ ì œí•œ ì¸ì›ì„ ë„˜ëŠ” ì°¸ì—¬ìê°€ ìƒê²¨ë‚˜ëŠ” ë¬¸ì œê°€ ë°œìƒí•˜ì˜€ìŠµë‹ˆë‹¤.</p>\n<p>ë¨¼ì € ë¬¸ì œ ìƒí™©ì„ ì•Œì•„ë³´ê³ ì ê¸°ì¡´ ë¡œì§ì„ ì‚´í´ë³´ê³  ëª¨ì„ ì°¸ì—¬ì— ëŒ€í•œ ë™ì‹œì„± í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•˜ë©° í…ŒìŠ¤íŠ¸ë¥¼ í•´ë³´ê² ìŠµë‹ˆë‹¤. ëª¨ì„ ì°¸ì—¬ ë¡œì§ì„ ì‚´í´ë³´ë©´ ì•„ë˜ì™€ ê°™ì´ JPAë¥¼ í†µí•´ ëª¨ì„(Group)ê³¼ íšŒì›(Member) ì •ë³´ë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì½ì–´ì˜¨ í›„ì— ëª¨ì„ ì°¸ì—¬ë¥¼ ì§„í–‰í•˜ì˜€ìŠµë‹ˆë‹¤.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"java\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">RequiredArgsConstructor</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">Transactional</span><span class=\"mtk4\">(</span><span class=\"mtk7\">readOnly</span><span class=\"mtk4\"> </span><span class=\"mtk8\">=</span><span class=\"mtk4\"> </span><span class=\"mtk7\">true</span><span class=\"mtk4\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">Service</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">public</span><span class=\"mtk4\"> </span><span class=\"mtk9\">class</span><span class=\"mtk4\"> </span><span class=\"mtk11\">ParticipateService</span><span class=\"mtk4\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">private</span><span class=\"mtk4\"> </span><span class=\"mtk9\">final</span><span class=\"mtk4\"> </span><span class=\"mtk11\">MemberFindService</span><span class=\"mtk4\"> memberFindService</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">private</span><span class=\"mtk4\"> </span><span class=\"mtk9\">final</span><span class=\"mtk4\"> </span><span class=\"mtk11\">GroupFindService</span><span class=\"mtk4\"> groupFindService</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk1\">@</span><span class=\"mtk11\">Transactional</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">public</span><span class=\"mtk3\"> </span><span class=\"mtk9\">void</span><span class=\"mtk3\"> participate</span><span class=\"mtk1\">(</span><span class=\"mtk11\">Long</span><span class=\"mtk1\"> </span><span class=\"mtk4 mtki\">groupId</span><span class=\"mtk1\">, </span><span class=\"mtk11\">Long</span><span class=\"mtk1\"> </span><span class=\"mtk4 mtki\">memberId</span><span class=\"mtk1\">)</span><span class=\"mtk3\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">Group</span><span class=\"mtk1\"> </span><span class=\"mtk4\">group</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">groupFindService</span><span class=\"mtk1\">.</span><span class=\"mtk3\">findGroup</span><span class=\"mtk1\">(groupId);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">Member</span><span class=\"mtk1\"> </span><span class=\"mtk4\">member</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">memberFindService</span><span class=\"mtk1\">.</span><span class=\"mtk3\">findMember</span><span class=\"mtk1\">(memberId);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">group</span><span class=\"mtk1\">.</span><span class=\"mtk3\">participate</span><span class=\"mtk1\">(member);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p>í…ŒìŠ¤íŠ¸ ì½”ë“œëŠ” ë™ì‹œì„± ë¬¸ì œë¥¼ í…ŒìŠ¤íŠ¸í•˜ê¸° ìœ„í•´ <code>CountDownLatch</code>ì™€ <code>ExecutorService</code>ë¥¼ í†µí•´ ë³„ë„ì˜ ìŠ¤ë ˆë“œì—ì„œ ì°¸ì—¬ë¡œì§ì´ ë™ì‹œì— ì²˜ë¦¬ë˜ë„ë¡ í•˜ì˜€ìŠµë‹ˆë‹¤.</p>\n<blockquote>\n<p><code>CountDownLatch</code>ëŠ” ë‹¤ë¥¸ ì“°ë ˆë“œì—ì„œ ì‘ì—…ì´ ì™„ë£Œë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦´ ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” í´ë˜ìŠ¤ì´ë©° <code>ExecutorService</code>ëŠ” ë³‘ë ¬ ì‘ì—…ì‹œ ì—¬ëŸ¬ ì‘ì—…ì„ íš¨ìœ¨ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ ì œê³µë˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ì…ë‹ˆë‹¤. <code>ExecutorService</code>ë¥¼ ì‚¬ìš©í•˜ë©´ ì‰½ê²Œ TreadPoolì„ êµ¬ì„±í•  ìˆ˜ ìˆìœ¼ë©° í•´ë‹¹ ìŠ¤ë ˆë“œë“¤ì˜ ë™ì‘ì˜ ì¢…ë£Œë¥¼<code>CountDownLatch</code>ë¥¼ í†µí•´ ê¸°ë‹¤ë¦°ë‹¤ê³  ìƒê°í•˜ì‹œë©´ ë©ë‹ˆë‹¤.</p>\n</blockquote>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"java\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">Sql</span><span class=\"mtk4\">(</span><span class=\"mtk7\">value</span><span class=\"mtk4\"> </span><span class=\"mtk8\">=</span><span class=\"mtk4\"> </span><span class=\"mtk6\">&quot;classpath:init.sql&quot;</span><span class=\"mtk1\">,</span><span class=\"mtk4\"> </span><span class=\"mtk7\">executionPhase</span><span class=\"mtk4\"> </span><span class=\"mtk8\">=</span><span class=\"mtk4\"> BEFORE_TEST_METHOD)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">Sql</span><span class=\"mtk4\">(</span><span class=\"mtk7\">value</span><span class=\"mtk4\"> </span><span class=\"mtk8\">=</span><span class=\"mtk4\"> </span><span class=\"mtk6\">&quot;classpath:truncate.sql&quot;</span><span class=\"mtk1\">,</span><span class=\"mtk4\"> </span><span class=\"mtk7\">executionPhase</span><span class=\"mtk4\"> </span><span class=\"mtk8\">=</span><span class=\"mtk4\"> AFTER_TEST_METHOD)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">TestConstructor</span><span class=\"mtk4\">(</span><span class=\"mtk7\">autowireMode</span><span class=\"mtk4\"> </span><span class=\"mtk8\">=</span><span class=\"mtk4\"> </span><span class=\"mtk11\">TestConstructor</span><span class=\"mtk1\">.</span><span class=\"mtk11\">AutowireMode</span><span class=\"mtk1\">.</span><span class=\"mtk4\">ALL)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">RequiredArgsConstructor</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">SpringBootTest</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">class</span><span class=\"mtk4\"> </span><span class=\"mtk11\">ParticipateServiceConcurrencyTest</span><span class=\"mtk4\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">private</span><span class=\"mtk4\"> </span><span class=\"mtk9\">final</span><span class=\"mtk4\"> </span><span class=\"mtk11\">ParticipateService</span><span class=\"mtk4\"> participateService</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">private</span><span class=\"mtk4\"> </span><span class=\"mtk9\">final</span><span class=\"mtk4\"> </span><span class=\"mtk11\">GroupRepository</span><span class=\"mtk4\"> groupRepository</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">private</span><span class=\"mtk4\"> </span><span class=\"mtk9\">final</span><span class=\"mtk4\"> </span><span class=\"mtk11\">MemberRepository</span><span class=\"mtk4\"> memberRepository</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">private</span><span class=\"mtk4\"> </span><span class=\"mtk11\">Member</span><span class=\"mtk4\"> host</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk1\">@</span><span class=\"mtk11\">BeforeEach</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">void</span><span class=\"mtk3\"> setUp</span><span class=\"mtk1\">()</span><span class=\"mtk3\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">this</span><span class=\"mtk1\">.</span><span class=\"mtk4\">host</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">memberRepository</span><span class=\"mtk1\">.</span><span class=\"mtk3\">save</span><span class=\"mtk1\">(</span><span class=\"mtk11\">MOMO</span><span class=\"mtk1\">.</span><span class=\"mtk3\">toMember</span><span class=\"mtk1\">());</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk1\">@</span><span class=\"mtk11\">DisplayName</span><span class=\"mtk4\">(</span><span class=\"mtk6\">&quot;ëª¨ì„ ì°¸ì—¬ ë™ì‹œ ìš”ì²­ì´ ì˜¬ ê²½ìš°ì—ë„ ì •ì›ì„ ë„˜ì–´ì„  ì¸ì›ì´ ëª¨ì„ì— ì°¸ì—¬í•  ìˆ˜ ì—†ë‹¤&quot;</span><span class=\"mtk4\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk1\">@</span><span class=\"mtk11\">Test</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">void</span><span class=\"mtk3\"> participateConcurrencyTest</span><span class=\"mtk1\">()</span><span class=\"mtk3\"> </span><span class=\"mtk9\">throws</span><span class=\"mtk3\"> </span><span class=\"mtk11\">InterruptedException</span><span class=\"mtk3\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk9\">int</span><span class=\"mtk1\"> </span><span class=\"mtk4\">capacity</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">3</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk9\">int</span><span class=\"mtk1\"> </span><span class=\"mtk4\">numOfParticipants</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">50</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk9\">long</span><span class=\"mtk1\"> </span><span class=\"mtk4\">groupId</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">groupRepository</span><span class=\"mtk1\">.</span><span class=\"mtk3\">save</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk11\">MOMO_STUDY</span><span class=\"mtk1\">.</span><span class=\"mtk3\">builder</span><span class=\"mtk1\">()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        .</span><span class=\"mtk3\">capacity</span><span class=\"mtk1\">(capacity)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        .</span><span class=\"mtk3\">toGroup</span><span class=\"mtk1\">(host)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        ).</span><span class=\"mtk3\">getId</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">List</span><span class=\"mtk1\">&lt;</span><span class=\"mtk11\">Long</span><span class=\"mtk1\">&gt; </span><span class=\"mtk4\">participantIds</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk9\">new</span><span class=\"mtk1\"> </span><span class=\"mtk11\">ArrayList</span><span class=\"mtk1\">&lt;&gt;();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk9\">for</span><span class=\"mtk1\"> (</span><span class=\"mtk9\">int</span><span class=\"mtk1\"> </span><span class=\"mtk4\">i</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">0</span><span class=\"mtk1\">; i </span><span class=\"mtk8\">&lt;</span><span class=\"mtk1\"> numOfParticipants; i++) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk11\">Member</span><span class=\"mtk1\"> </span><span class=\"mtk4\">savedMember</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">memberRepository</span><span class=\"mtk1\">.</span><span class=\"mtk3\">save</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span><span class=\"mtk9\">new</span><span class=\"mtk1\"> </span><span class=\"mtk3\">Member</span><span class=\"mtk1\">(</span><span class=\"mtk11\">UserId</span><span class=\"mtk1\">.</span><span class=\"mtk3\">momo</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;user&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk8\">+</span><span class=\"mtk1\"> i),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                            </span><span class=\"mtk11\">Password</span><span class=\"mtk1\">.</span><span class=\"mtk3\">encrypt</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;User123!&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk9\">new</span><span class=\"mtk1\"> </span><span class=\"mtk3\">SHA256Encoder</span><span class=\"mtk1\">()),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                            </span><span class=\"mtk11\">UserName</span><span class=\"mtk1\">.</span><span class=\"mtk3\">from</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;user&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk8\">+</span><span class=\"mtk1\"> i)));</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk11\">participantIds</span><span class=\"mtk1\">.</span><span class=\"mtk3\">add</span><span class=\"mtk1\">(</span><span class=\"mtk11\">savedMember</span><span class=\"mtk1\">.</span><span class=\"mtk3\">getId</span><span class=\"mtk1\">());</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">CountDownLatch</span><span class=\"mtk1\"> </span><span class=\"mtk4\">latch</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk9\">new</span><span class=\"mtk1\"> </span><span class=\"mtk3\">CountDownLatch</span><span class=\"mtk1\">(numOfParticipants);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">ExecutorService</span><span class=\"mtk1\"> </span><span class=\"mtk4\">executor</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Executors</span><span class=\"mtk1\">.</span><span class=\"mtk3\">newFixedThreadPool</span><span class=\"mtk1\">(numOfParticipants);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk9\">for</span><span class=\"mtk1\"> (</span><span class=\"mtk11\">Long</span><span class=\"mtk1\"> </span><span class=\"mtk4\">participantId</span><span class=\"mtk1\"> </span><span class=\"mtk9\">:</span><span class=\"mtk1\"> participantIds) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk11\">executor</span><span class=\"mtk1\">.</span><span class=\"mtk3\">submit</span><span class=\"mtk1\">(() </span><span class=\"mtk9\">-&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk9\">try</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span><span class=\"mtk11\">participateService</span><span class=\"mtk1\">.</span><span class=\"mtk3\">participate</span><span class=\"mtk1\">(groupId, participantId);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                } </span><span class=\"mtk9\">finally</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span><span class=\"mtk11\">latch</span><span class=\"mtk1\">.</span><span class=\"mtk3\">countDown</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            });</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">executor</span><span class=\"mtk1\">.</span><span class=\"mtk3\">shutdown</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">latch</span><span class=\"mtk1\">.</span><span class=\"mtk3\">await</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk9\">long</span><span class=\"mtk1\"> </span><span class=\"mtk4\">actual</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">participateService</span><span class=\"mtk1\">.</span><span class=\"mtk3\">findParticipants</span><span class=\"mtk1\">(groupId).</span><span class=\"mtk3\">size</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk3\">assertThat</span><span class=\"mtk1\">(actual).</span><span class=\"mtk3\">isEqualTo</span><span class=\"mtk1\">(capacity);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p>ê²°ê³¼ë¥¼ ì‚´í´ë³´ë©´ ì•„ë˜ì™€ ê°™ì´ 3ëª…ì˜ ì¸ì› ì œí•œì´ ìˆëŠ” ëª¨ì„ì¸ë° 11ëª…ì˜ ì°¸ì—¬ìê°€ ë°œìƒí•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ì¦‰, ë™ì‹œì„± ë¬¸ì œì— ëŒ€í•œ ì œì–´ê°€ í•„ìš”í•œ ìƒí™©ì…ë‹ˆë‹¤.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 13.999999999999998%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAoklEQVQI11XN2Q6CMBCFYV7HjVZwgUIXKIpUiVyY+P5P8luIF3rx5ZxMJjPJ9AxMrzfXMOL7QNffuQwPatdRWb+onUeZFt1e0K5FCYGWkny3Y7Ve/0lEaVE+cGrvnKPCPyi7kVMTOLphMc8P9oaor0jV4PaSPs8x8WghUoo0pYxPZom2DbW2PwxVtHTzFbuOaeJuqSq6LGM45FRSkG63X5slP4SjZTpQPH/1AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled\"\n        title=\"Untitled\"\n        src=\"/static/0ca2bac81c96d1e4f8331ad99a4ffe7d/c1b63/img.png\"\n        srcset=\"/static/0ca2bac81c96d1e4f8331ad99a4ffe7d/5a46d/img.png 300w,\n/static/0ca2bac81c96d1e4f8331ad99a4ffe7d/0a47e/img.png 600w,\n/static/0ca2bac81c96d1e4f8331ad99a4ffe7d/c1b63/img.png 1200w,\n/static/0ca2bac81c96d1e4f8331ad99a4ffe7d/5fada/img.png 1706w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<h1 id=\"í•´ê²°-ê³¼ì •-1---synchronized\" style=\"position:relative;\"><a href=\"#%ED%95%B4%EA%B2%B0-%EA%B3%BC%EC%A0%95-1---synchronized\" aria-label=\"í•´ê²° ê³¼ì • 1   synchronized permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>í•´ê²° ê³¼ì • 1 - synchronized</h1>\n<p>ì²«ë²ˆì§¸ í•´ê²° ì±…ìœ¼ë¡œëŠ” ìë°”ì—ì„œ í•˜ë‚˜ì˜ ìŠ¤ë ˆë“œë§Œì´ ì„ê³„ êµ¬ì—­(Critical Section)ì— ì ‘ê·¼í•˜ë„ë¡ ì§€ì›í•´ì£¼ëŠ” <code>synchronized</code>ë¥¼ í†µí•´ í•´ê²°í•˜ì˜€ìŠµë‹ˆë‹¤. ë‹¨ìˆœíˆ ê¸°ì¡´ ì°¸ì—¬ ë©”ì„œë“œì— <code>synchronized</code>ë§Œ ë¶™ì—¬ì£¼ëŠ” ì‘ì—…ë§Œìœ¼ë¡œë„ ê¸°ì¡´ì— ë°œìƒí•˜ë˜ ë™ì‹œì„± ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.</p>\n<h2 id=\"ì½”ë“œ-ë°-ê²°ê³¼\" style=\"position:relative;\"><a href=\"#%EC%BD%94%EB%93%9C-%EB%B0%8F-%EA%B2%B0%EA%B3%BC\" aria-label=\"ì½”ë“œ ë° ê²°ê³¼ permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì½”ë“œ ë° ê²°ê³¼</h2>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"java\" data-index=\"2\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">RequiredArgsConstructor</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">Transactional</span><span class=\"mtk4\">(</span><span class=\"mtk7\">readOnly</span><span class=\"mtk4\"> </span><span class=\"mtk8\">=</span><span class=\"mtk4\"> </span><span class=\"mtk7\">true</span><span class=\"mtk4\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">Service</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">public</span><span class=\"mtk4\"> </span><span class=\"mtk9\">class</span><span class=\"mtk4\"> </span><span class=\"mtk11\">ParticipateService</span><span class=\"mtk4\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">private</span><span class=\"mtk4\"> </span><span class=\"mtk9\">final</span><span class=\"mtk4\"> </span><span class=\"mtk11\">MemberFindService</span><span class=\"mtk4\"> memberFindService</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">private</span><span class=\"mtk4\"> </span><span class=\"mtk9\">final</span><span class=\"mtk4\"> </span><span class=\"mtk11\">GroupFindService</span><span class=\"mtk4\"> groupFindService</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk1\">@</span><span class=\"mtk11\">Transactional</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">public</span><span class=\"mtk3\"> </span><span class=\"mtk9\">synchronized</span><span class=\"mtk3\"> </span><span class=\"mtk9\">void</span><span class=\"mtk3\"> participate</span><span class=\"mtk1\">(</span><span class=\"mtk11\">Long</span><span class=\"mtk1\"> </span><span class=\"mtk4 mtki\">groupId</span><span class=\"mtk1\">, </span><span class=\"mtk11\">Long</span><span class=\"mtk1\"> </span><span class=\"mtk4 mtki\">memberId</span><span class=\"mtk1\">)</span><span class=\"mtk3\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">Group</span><span class=\"mtk1\"> </span><span class=\"mtk4\">group</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">groupFindService</span><span class=\"mtk1\">.</span><span class=\"mtk3\">findGroup</span><span class=\"mtk1\">(groupId);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">Member</span><span class=\"mtk1\"> </span><span class=\"mtk4\">member</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">memberFindService</span><span class=\"mtk1\">.</span><span class=\"mtk3\">findMember</span><span class=\"mtk1\">(memberId);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">group</span><span class=\"mtk1\">.</span><span class=\"mtk3\">participate</span><span class=\"mtk1\">(member);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1064px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 12%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAgElEQVQI1zWKSw6CMABEuQvRjUqM6AbRUiNQY4si9nf/gzyLxsXLm5lMtjw0FKKl6kfq20QpNetjz6ZWrKrum4uTYrFvyHdn8lL8mPO/J2/TZyYTjURcJEornPOEEHlbi/ceax0xxrQFXtOE1oZheGDMgEl+jiPaGO5pb9uOa+IDtJZHfqaweKkAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled\"\n        title=\"Untitled\"\n        src=\"/static/2c2fcb14468ed88dce4dff85028df3e4/dd104/img_1.png\"\n        srcset=\"/static/2c2fcb14468ed88dce4dff85028df3e4/5a46d/img_1.png 300w,\n/static/2c2fcb14468ed88dce4dff85028df3e4/0a47e/img_1.png 600w,\n/static/2c2fcb14468ed88dce4dff85028df3e4/dd104/img_1.png 1064w\"\n        sizes=\"(max-width: 1064px) 100vw, 1064px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<h2 id=\"ë‚¨ì•„ìˆëŠ”-ë¬¸ì œ\" style=\"position:relative;\"><a href=\"#%EB%82%A8%EC%95%84%EC%9E%88%EB%8A%94-%EB%AC%B8%EC%A0%9C\" aria-label=\"ë‚¨ì•„ìˆëŠ” ë¬¸ì œ permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë‚¨ì•„ìˆëŠ” ë¬¸ì œ</h2>\n<p>í•˜ì§€ë§Œ í•´ë‹¹ ë°©ë²•ì€ ë‹¨ì¼ ì„œë²„ì—ì„œëŠ” í•´ê²°ë²•ì´ ë  ìˆ˜ ìˆìœ¼ë‚˜, Nê°œì˜ ì„œë²„ë¥¼ ìš´ì˜í•˜ëŠ” ë¶„ì‚° í™˜ê²½ì—ì„œëŠ” ê°ê°ì˜ ì„œë²„ì—ì„œ 1ê°œì˜ ìš”ì²­ì”© ë™ì‘ì‹œí‚¨ë‹¤ í•˜ë”ë¼ë„ ì „ì²´ì ì¸ ì‹œìŠ¤í…œì„ ë³´ë©´ Nê°œì˜ ë™ì¼ ìš”ì²­ì´ ì‹¤í–‰ë˜ì–´ ë™ì‹œ ì ‘ê·¼ì„ ì œì–´í•˜ì§€ ëª»í•˜ê²Œ ë©ë‹ˆë‹¤.</p>\n<p>ê·¸ëŸ¼ ë‹¤ì¤‘ ì„œë²„ì—ì„œ ë™ì‹œì„± ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” ë°©ë²•ì€ ë¬´ì—‡ì´ ìˆì„ê¹Œìš”?? ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œëŠ” JPAì—ì„œ ì œê³µí•˜ëŠ” <strong>ë‚™ê´€ì ë½</strong>, ë°ì´í„°ë² ì´ìŠ¤ì— x-lockì„ ê±°ëŠ” <strong>ë¹„ê´€ì ë½</strong>, ë½ì€ ê´€ë¦¬í•˜ëŠ” ì™¸ë¶€ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì´ìš©í•œ <strong>ë¶„ì‚°ë½</strong>ì´ ì¡´ì¬í•©ë‹ˆë‹¤. ì´ ì¤‘ì—ì„œ ëª¨ë‘ëª¨ì—¬ë¼ íŒ€ì€ ë¨¼ì € ë‚™ê´€ì ë½ê³¼ ë¹„ê´€ì ë½ì„ ê³ ë ¤í•˜ë©° ë¡œì§ì„ ìˆ˜ì •í•´ë´¤ìŠµë‹ˆë‹¤.</p>\n<blockquote>\n<p>ğŸ“ŒÂ í•´ë‹¹ ê²Œì‹œê¸€ì€ í”„ë¡œì íŠ¸ì—ì„œ ë°œìƒí•œ ë¬¸ì œë¥¼ ê¸°ë¡í•˜ê³  ì •ë¦¬í•˜ëŠ” ê²Œì‹œê¸€ì¸ ë§Œí¼ ìì„¸í•œ ì´ë¡ ì— ëŒ€í•´ ë‹¤ë£¨ì§€ ì•Šê³  ìˆìŠµë‹ˆë‹¤. ë‚™ê´€ì ë½, ë¹„ê´€ì ë½, ë¶„ì‚°ë½ì— ëŒ€í•´ ìì„¸íˆ ì•Œê³ ì‹¶ìœ¼ì‹œë©´ ì•„ë˜ì˜ í¬ìŠ¤íŠ¸ë¥¼ í™•ì¸í•´ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤.</p>\n<ul>\n<li><a href=\"https://seongwon.dev/Spring-MVC/20230430-%EB%B9%84%EA%B4%80%EC%A0%81%EB%9D%BD%EA%B3%BC_%EB%82%99%EA%B4%80%EC%A0%81%EB%9D%BD/\">ë¹„ê´€ì  ë½(Pessimistic Lock)ê³¼ ë‚™ê´€ì  ë½(Optimistic Lock)</a></li>\n<li><a href=\"https://seongwon.dev/MSA/20230503-Redis%EB%A5%BC_%ED%86%B5%ED%95%9C_%EB%B6%84%EC%82%B0%EB%9D%BD%EC%9C%BC%EB%A1%9C_%EB%8F%99%EC%8B%9C%EC%84%B1_%EB%AC%B8%EC%A0%9C_%EC%A0%9C%EC%96%B4%ED%95%98%EA%B8%B0/\">Redisë¥¼ í†µí•œ ë¶„ì‚°ë½(Distribution Lock)ìœ¼ë¡œ ë™ì‹œì„± ë¬¸ì œ ì œì–´í•˜ê¸°</a></li>\n</ul>\n</blockquote>\n<h1 id=\"í•´ê²°-ê³¼ì •-2---ë¹„ê´€ì -ë½-vs-ë‚™ê´€ì -ë½\" style=\"position:relative;\"><a href=\"#%ED%95%B4%EA%B2%B0-%EA%B3%BC%EC%A0%95-2---%EB%B9%84%EA%B4%80%EC%A0%81-%EB%9D%BD-vs-%EB%82%99%EA%B4%80%EC%A0%81-%EB%9D%BD\" aria-label=\"í•´ê²° ê³¼ì • 2   ë¹„ê´€ì  ë½ vs ë‚™ê´€ì  ë½ permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>í•´ê²° ê³¼ì • 2 - ë¹„ê´€ì  ë½ vs ë‚™ê´€ì  ë½</h1>\n<p>ìš°ë¦¬ íŒ€ì€ ì„œë¹„ìŠ¤ì˜ íŠ¹ì„±ì„ ê³ ë ¤í•˜ì—¬ ë‚™ê´€ì  ë½ê³¼ ë¹„ê´€ì  ë½ ì¤‘ ë¹„ê´€ì  ë½ì„ ì„ íƒ ë° ì ìš©í•˜ì˜€ìŠµë‹ˆë‹¤. ì„ íƒ ì´ìœ ëŠ” ì¶©ëŒì— ëŒ€í•œ ì¦ì€ ë¡¤ë°± ì²˜ë¦¬ë¡œ ì¸í•´ ì„±ëŠ¥ì´ ë” ì•ˆ ì¢‹ì•„ì§ˆ ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ì—ˆë‹¤.</p>\n<p>ì´í•´ë¥¼ ë•ê¸° ìœ„í•´ ìƒí™© ì˜ˆì‹œë¥¼ í•œë²ˆ ë“¤ì–´ë³´ê² ìŠµë‹ˆë‹¤. 10ëª…ë§Œ ì°¸ì—¬ ê°€ëŠ¥í•œ ëª¨ì„ ì„œë¹„ìŠ¤ì— ë‚™ê´€ì  ë½ì´ ê±¸ë ¤ìˆê³  1000ëª…ì´ ë™ì‹œ ìš”ì²­ì„ í•˜ì˜€ë‹¤ ê°€ì •í•˜ë©´ ìµœì´ˆë¡œ ë°ì´í„°ë² ì´ìŠ¤ì— Commit ìš”ì²­ì´ ì²˜ë¦¬ëœ 1ëª…ì€ í†µê³¼í•˜ë©° ì—”í‹°í‹°ì˜ ë²„ì „ì„ ë³€ê²½í•˜ê²Œ ë©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ì´í›„ì˜ ë‚¨ì€ 999ëª…ì€ ì—…ë°ì´íŠ¸ ì‹œì ì— ë²„ì „ì„ í™•ì¸í•˜ì˜€ëŠ”ë° ë²„ì „ì´ ë³€ê²½ë˜ì—ˆê¸°ì— ì·¨ì†Œë˜ê³  ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì˜¤ë¥˜ ì²˜ë¦¬ ë¡œì§ì— ë”°ë¼ ë‹¤ì‹œ ì¬ì‹œë„ë¥¼ ìš”ì²­í•˜ê²Œ ë©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ë‹¤ìŒ í•œëª…ì´ ìš”ì²­ì„ ì²˜ë¦¬í•˜ê²Œë˜ê³  ë‚¨ì€ 998ëª…ì€ ë‹¤ì‹œ ìƒˆë¡œìš´ ë²„ì „ì„ ì½ê³  ì¬ì‹œë„ë¥¼ í•´ì•¼í•œë‹¤â€¦(ë°˜ë³µ)</p>\n<p>ì´ì™€ ê°™ì´ ì¸ê¸° ìˆëŠ” ëª¨ì„ì— ì°¸ì—¬ ë™ì‹œ ìš”ì²­ì´ ë°œìƒí•  ê²½ìš°, ì¦ì€ ì¶©ëŒë¡œ ì¸í•œ ë‚™ê´€ì  ë½ì˜ ì˜¤ë¥˜ ì²˜ë¦¬ ë¹„ìš©ìœ¼ë¡œ ì¸í•´ ì„±ëŠ¥ì— ë” ì˜í–¥ì„ ì¤„ ê²ƒì´ë¼ íŒë‹¨í•´ ë¹„ê´€ì  ë½ì„ íƒí•˜ì˜€ìŠµë‹ˆë‹¤.</p>\n<h2 id=\"ì½”ë“œ-ë°-ê²°ê³¼-1\" style=\"position:relative;\"><a href=\"#%EC%BD%94%EB%93%9C-%EB%B0%8F-%EA%B2%B0%EA%B3%BC-1\" aria-label=\"ì½”ë“œ ë° ê²°ê³¼ 1 permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì½”ë“œ ë° ê²°ê³¼</h2>\n<p>ë¹„ê´€ì  ë½ì„ ì ìš©í•œ ì½”ë“œëŠ” ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"java\" data-index=\"3\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">public</span><span class=\"mtk4\"> </span><span class=\"mtk9\">interface</span><span class=\"mtk4\"> </span><span class=\"mtk11\">GroupSearchRepository</span><span class=\"mtk4\"> </span><span class=\"mtk9\">extends</span><span class=\"mtk4\"> </span><span class=\"mtk11\">Repository</span><span class=\"mtk1\">&lt;</span><span class=\"mtk11\">Group</span><span class=\"mtk1\">,</span><span class=\"mtk4\"> </span><span class=\"mtk11\">Long</span><span class=\"mtk1\">&gt;,</span><span class=\"mtk4\"> </span><span class=\"mtk11\">GroupSearchRepositoryCustom</span><span class=\"mtk4\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk1\">@</span><span class=\"mtk11\">Lock</span><span class=\"mtk4\">(</span><span class=\"mtk7\">value</span><span class=\"mtk4\"> </span><span class=\"mtk8\">=</span><span class=\"mtk4\"> </span><span class=\"mtk11\">LockModeType</span><span class=\"mtk1\">.</span><span class=\"mtk4\">PESSIMISTIC_WRITE)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk1\">@</span><span class=\"mtk11\">Query</span><span class=\"mtk4\">(</span><span class=\"mtk6\">&quot;select g from Group g where g.id = :id&quot;</span><span class=\"mtk4\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk11\">Optional</span><span class=\"mtk1\">&lt;</span><span class=\"mtk11\">Group</span><span class=\"mtk1\">&gt;</span><span class=\"mtk3\"> findByIdForUpdate</span><span class=\"mtk1\">(@</span><span class=\"mtk11\">Param</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;id&quot;</span><span class=\"mtk1\">) </span><span class=\"mtk11\">Long</span><span class=\"mtk1\"> </span><span class=\"mtk4 mtki\">id</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk1\">...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"java\" data-index=\"4\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">RequiredArgsConstructor</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">Transactional</span><span class=\"mtk4\">(</span><span class=\"mtk7\">readOnly</span><span class=\"mtk4\"> </span><span class=\"mtk8\">=</span><span class=\"mtk4\"> </span><span class=\"mtk7\">true</span><span class=\"mtk4\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">Service</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">public</span><span class=\"mtk4\"> </span><span class=\"mtk9\">class</span><span class=\"mtk4\"> </span><span class=\"mtk11\">GroupFindService</span><span class=\"mtk4\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">private</span><span class=\"mtk4\"> </span><span class=\"mtk9\">final</span><span class=\"mtk4\"> </span><span class=\"mtk11\">GroupSearchRepository</span><span class=\"mtk4\"> groupSearchRepository</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">private</span><span class=\"mtk4\"> </span><span class=\"mtk9\">final</span><span class=\"mtk4\"> </span><span class=\"mtk11\">ParticipantRepository</span><span class=\"mtk4\"> participantRepository</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk1\">...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">public</span><span class=\"mtk3\"> </span><span class=\"mtk11\">Group</span><span class=\"mtk3\"> findByIdForUpdate</span><span class=\"mtk1\">(</span><span class=\"mtk11\">Long</span><span class=\"mtk1\"> </span><span class=\"mtk4 mtki\">id</span><span class=\"mtk1\">)</span><span class=\"mtk3\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk9\">return</span><span class=\"mtk1\"> </span><span class=\"mtk11\">groupSearchRepository</span><span class=\"mtk1\">.</span><span class=\"mtk3\">findByIdForUpdate</span><span class=\"mtk1\">(id)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                .</span><span class=\"mtk3\">orElseThrow</span><span class=\"mtk1\">(() </span><span class=\"mtk9\">-&gt;</span><span class=\"mtk1\"> </span><span class=\"mtk9\">new</span><span class=\"mtk1\"> </span><span class=\"mtk3\">GroupException</span><span class=\"mtk1\">(NOT_EXIST));</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk1\">...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"java\" data-index=\"5\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">RequiredArgsConstructor</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">Transactional</span><span class=\"mtk4\">(</span><span class=\"mtk7\">readOnly</span><span class=\"mtk4\"> </span><span class=\"mtk8\">=</span><span class=\"mtk4\"> </span><span class=\"mtk7\">true</span><span class=\"mtk4\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">Service</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">public</span><span class=\"mtk4\"> </span><span class=\"mtk9\">class</span><span class=\"mtk4\"> </span><span class=\"mtk11\">ParticipateService</span><span class=\"mtk4\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">private</span><span class=\"mtk4\"> </span><span class=\"mtk9\">final</span><span class=\"mtk4\"> </span><span class=\"mtk11\">MemberFindService</span><span class=\"mtk4\"> memberFindService</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">private</span><span class=\"mtk4\"> </span><span class=\"mtk9\">final</span><span class=\"mtk4\"> </span><span class=\"mtk11\">GroupFindService</span><span class=\"mtk4\"> groupFindService</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk1\">@</span><span class=\"mtk11\">Transactional</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">public</span><span class=\"mtk3\"> </span><span class=\"mtk9\">void</span><span class=\"mtk3\"> participate</span><span class=\"mtk1\">(</span><span class=\"mtk11\">Long</span><span class=\"mtk1\"> </span><span class=\"mtk4 mtki\">groupId</span><span class=\"mtk1\">, </span><span class=\"mtk11\">Long</span><span class=\"mtk1\"> </span><span class=\"mtk4 mtki\">memberId</span><span class=\"mtk1\">)</span><span class=\"mtk3\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk5 mtki\">// findByIdForUpdate -&gt; SELECT FOR UPDATEë¥¼ í†µí•œ x-lock íšë“</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">Group</span><span class=\"mtk1\"> </span><span class=\"mtk4\">group</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">groupFindService</span><span class=\"mtk1\">.</span><span class=\"mtk3\">findByIdForUpdate</span><span class=\"mtk1\">(groupId);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">Member</span><span class=\"mtk1\"> </span><span class=\"mtk4\">member</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">memberFindService</span><span class=\"mtk1\">.</span><span class=\"mtk3\">findMember</span><span class=\"mtk1\">(memberId);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk5 mtki\">// group ê°ì²´ëŠ” capacityì™€ ì°¸ì—¬ìì˜ ì •ë³´ë¥¼ ì–»ê¸° ìœ„í•œ ê·¸ë˜í”„ íƒìƒ‰ì„ í•˜ê¸° ìœ„í•´ íšë“</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk5 mtki\">// group í…Œì´ë¸”ì—ëŠ” ë³€ê²½ X, Participants í…Œì´ë¸”ì—ë§Œ ìƒˆë¡œìš´ ì°¸ê°€ì ë°ì´í„°ê°€ ì¶”ê°€ë¨</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">group</span><span class=\"mtk1\">.</span><span class=\"mtk3\">participate</span><span class=\"mtk1\">(member);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p>ìœ„ì˜ ë¡œì§ì„ ì‚´í´ë³´ë©´Â <code>participate()</code>Â ë©”ì„œë“œê°€ ì‹¤í–‰ë¨ê³¼ ë™ì‹œì—Â <code>SELECT FOR UPDATE</code>ë¥¼ í†µí•´ Groupì •ë³´ë¥¼ ì–»ìœ¼ë©° í•´ë‹¹ ë°ì´í„°ì— x-lockì„ ê±¸ë©° ë‹¤ë¥¸ ì½ê¸°, ì“°ê¸° ìš”ì²­ì— ëŒ€í•œ ëª¨ë“  ì ‘ê·¼ì„ ì œí•œí•˜ì˜€ìŠµë‹ˆë‹¤.Â </p>\n<p>ê·¸ ê²°ê³¼ í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•˜ì—¬ë„ ì •ìƒì ìœ¼ë¡œ í†µê³¼í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 964px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 13.666666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAoElEQVQI12WMSw6CMBiEOYNEV3oBDSxcuZDSliIq0scPBe5/kbFtTDRxMflmJpPJDheJsiGUklAIi/1ZYVvUf9oVHPmpQn6svvxo8+MzJiVU34GmGdO8gvwCQxNcyJHaEtw4p769P1ELhVoq8KYFl22iaG6Jsc8qJnDlDF3/gCMfDhz6QcOGMxPOYnbRO4Jf1pRf2qRuMC7sRtDoEwdt8Qbz1Gpf8ZGfDwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled\"\n        title=\"Untitled\"\n        src=\"/static/32a899415d77db829dc7ba99100d24e1/72aae/img_2.png\"\n        srcset=\"/static/32a899415d77db829dc7ba99100d24e1/5a46d/img_2.png 300w,\n/static/32a899415d77db829dc7ba99100d24e1/0a47e/img_2.png 600w,\n/static/32a899415d77db829dc7ba99100d24e1/72aae/img_2.png 964w\"\n        sizes=\"(max-width: 964px) 100vw, 964px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<h2 id=\"ë‚¨ì•„ìˆëŠ”-ë¬¸ì œ-1\" style=\"position:relative;\"><a href=\"#%EB%82%A8%EC%95%84%EC%9E%88%EB%8A%94-%EB%AC%B8%EC%A0%9C-1\" aria-label=\"ë‚¨ì•„ìˆëŠ” ë¬¸ì œ 1 permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë‚¨ì•„ìˆëŠ” ë¬¸ì œ</h2>\n<p>ë¹„ê´€ì  ë½ì„ ì ìš©ì„ í†µí•´ ë‹¤ì¤‘ ì„œë²„ì—ì„œ ë™ì‹œì„± ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ëŠ” ìˆì—ˆìœ¼ë‚˜, ë°ì´í„° ë² ì´ìŠ¤ì— x-lockì„ ê±¸ê²Œ ë˜ë©° ì“°ê¸° ë¿ë§Œ ì•„ë‹ˆë¼ ë‹¤ë¥¸ ë°ì´í„°ë² ì´ìŠ¤ ìš”ì²­ ì²˜ë¦¬ì—ë„ ì˜í–¥ì„ ì£¼ëŠ” ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p>ì‰¬ìš´ ì´í•´ë¥¼ ìœ„í•´ ìƒí™©ì„ ì„¤ëª…í•´ë“œë¦¬ê² ìŠµë‹ˆë‹¤. ë§Œì•½ 1000ëª…ì˜ ì‚¬ìš©ìê°€ í•˜ë‚˜ì˜ ëª¨ì„ì— ì°¸ì—¬ ìš”ì²­ì„ ë™ì‹œì— ì§„í–‰í•  ê²½ìš°, ëª¨ì„ ì°¸ì—¬ë¥¼ ìœ„í•œ ê²½í•©ì€ ë°ì´í„°ë² ì´ìŠ¤ì˜ x-lockì„ íšë“í•˜ëŠ” ë¶€ë¶„ì—ì„œ ë°œìƒí•˜ê²Œ ë©ë‹ˆë‹¤. ì¦‰, ë°ì´í„°ë² ì´ìŠ¤ì™€ì˜ ì»¤ë„¥ì…˜ì„ ë§ºê³  íŠ¸ëœì­ì…˜ì„ ì‹¤í–‰í•œ ì´í›„ì— 1000ê°œì˜ íŠ¸ëœì­ì…˜ì´ ê²½í•©í•˜ê²Œ ë©ë‹ˆë‹¤.</p>\n<p>ë¬¸ì œëŠ” ìš”ì²­ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ ê²½í•©ì„ ë°ì´í„°ë² ì´ìŠ¤ì˜ ì»¤ë„¥ì…˜ê³¼ íŠ¸ëœì­ì…˜ì„ ë§ºì€ ë‹¤ìŒì— ì§„í–‰í•˜ëŠ” ê²ƒ ì…ë‹ˆë‹¤. ë§Œì•½ 100000ê°œì˜ ë™ì‹œ ìš”ì²­ì´ë©´ ê²½í•©ì´ ëë‚  ë•Œê¹Œì§€ 100000ê°œì˜ ì»¤ë„¥ì…˜ì„ ìœ ì§€í•˜ê²Œ ë˜ëŠ” ê²ë‹ˆë‹¤.</p>\n<p>ì´ì™€ ê°™ì´ ì»¤ë„¥ì…˜ì„ ê¸¸ê²Œ ìœ ì§€í•˜ê³  ìˆëŠ” ë¬¸ì œëŠ” ì„œë¹„ìŠ¤ì˜ ì»¤ë„¥ì…˜ ë¶€ì¡± ë¬¸ì œë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<h1 id=\"í•´ê²°-ê³¼ì •-3---redis-ë¶„ì‚°ë½\" style=\"position:relative;\"><a href=\"#%ED%95%B4%EA%B2%B0-%EA%B3%BC%EC%A0%95-3---redis-%EB%B6%84%EC%82%B0%EB%9D%BD\" aria-label=\"í•´ê²° ê³¼ì • 3   redis ë¶„ì‚°ë½ permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>í•´ê²° ê³¼ì • 3 - Redis ë¶„ì‚°ë½</h1>\n<p>ë¹„ê´€ì  ë½ìœ¼ë¡œ ë°œìƒí•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ìµœì¢…ì ìœ¼ë¡œ ë¶„ì‚°ë½ ì ìš©ì„ ê³ ë ¤í•˜ê²Œ ëìŠµë‹ˆë‹¤. ë¶„ì‚°ë½ì€ ê¸°ì¡´ ì½”ë“œì²˜ëŸ¼ ë°ì´í„°ë² ì´ìŠ¤ rowì— Lockì„ ê±°ëŠ” ê²ƒì´ ì•„ë‹Œ ì§ì ‘ì ìœ¼ë¡œ ì°¸ì—¬í•˜ê¸° ë¡œì§ì„ ìˆ˜í–‰í•˜ëŠ” ë¶€ë¶„(Critical Section)ì— ì™¸ë¶€ ì €ì¥ì†Œë¥¼ ì‚¬ìš©í•´ ë½ì„ íšë“í•˜ê³  ìˆ˜í–‰í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤. ì¦‰, ì•ì„œ ì„¤ëª…í•œ ë¬¸ì œì˜ ê´€ì ìœ¼ë¡œ ìƒê°í•˜ë©´ ì‹¤ì œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë°ì´í„°ë² ì´ìŠ¤ê°€ ì•„ë‹Œ ë³„ë„ì˜ ì €ì¥ì†Œì—ì„œ ë½ì„ íšë“í•˜ê¸° ìœ„í•œ ê²½í•©ì„ í•˜ê²Œ ë˜ì–´ â€œx-lockíšë“ì„ ìœ„í•œ ê²½í•©ìœ¼ë¡œ ì¸í•´ ë°ì´í„°ë² ì´ìŠ¤ì˜ ì»¤ë„¥ì…˜ì„ ì˜¤ë˜ ìœ ì§€í•˜ëŠ” ë¬¸ì œâ€ë¥¼ ì—†ì•¨ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<blockquote>\n<p>ì´í›„ì— ì‚´í´ë³¼ ë°©ë²•ì€ Redisì˜ Pub/Subë°©ì‹ì„ ì‚¬ìš©í•˜ì—¬ Redisì— ë°œìƒí•˜ëŠ” ë¶€í•˜ë„ í¬ê²Œ ì¤„ì¼ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.</p>\n</blockquote>\n<blockquote>\n<p>ë¶„ì‚°ë½ì€ ì™¸ë¶€ ì €ì¥ì†Œë¥¼ ì‚¬ìš©í•´ì•¼í•˜ê¸°ì— ì¸í”„ë¼ êµ¬ì¶• ë¹„ìš©ì„ ê³ ë ¤í•´ë´ì•¼ í•œë‹¤. í•˜ì§€ë§Œ ëª¨ë‘ëª¨ì—¬ë¼ì˜ ê²½ìš° ìºì‹± ì‘ì—…ì„ ìœ„í•´ ì´ë¯¸ Redis ì„œë²„ë¥¼ êµ¬ì¶•í•˜ì˜€ê¸°ì— ë¶„ì‚°ë½ ì‘ì—…ë„ ìˆ˜í–‰í•˜ê²Œ ëë‹¤.</p>\n</blockquote>\n<p>í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•œ ê²°ê³¼ ì •ìƒì ìœ¼ë¡œ í†µê³¼í•˜ë©° ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.</p>\n<h2 id=\"ì‚¬ìš©-ê¸°ìˆ -ì„ ì •\" style=\"position:relative;\"><a href=\"#%EC%82%AC%EC%9A%A9-%EA%B8%B0%EC%88%A0-%EC%84%A0%EC%A0%95\" aria-label=\"ì‚¬ìš© ê¸°ìˆ  ì„ ì • permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì‚¬ìš© ê¸°ìˆ  ì„ ì •</h2>\n<p>ë¶„ì‚°ë½ì€ MySQL, Redis, Zookeeper ë“±ì„ í†µí•´ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì—¬ëŸ¬ ê¸°ì—…ë“¤ì´ ë¶„ì‚°ë½ì„ ì‚¬ìš© ì‚¬ë¡€ë¥¼ ë³´ë©´ ì¹´ì¹´ì˜¤, í† ìŠ¤ì™€ ë§ˆì¼“ ì»¬ë¦¬ ë“± ë§ì€ ê¸°ì—…ë“¤ì—ì„œ Redisë¥¼ í†µí•œ ë¶„ì‚°ë½ì„ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤. ê·¸ë ‡ë‹¤ê³  MySQLì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê²ƒì€ ì•„ë‹™ë‹ˆë‹¤. ìš°ì•„í•œí˜•ì œë“¤ì˜ ê¸°ìˆ  ë¸”ë¡œê·¸ë¥¼ ë³´ë©´ ê´‘ê³  ì‹œìŠ¤í…œì—ì„œëŠ” MySQLì„ ì‚¬ìš©í•œ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<blockquote>\n<p>ğŸ“ŒÂ IT ê¸°ì—…ë“¤ì˜ ë¶„ì‚°ë½ ì ìš© í¬ìŠ¤íŠ¸</p>\n<ul>\n<li><a href=\"https://helloworld.kurly.com/blog/distributed-redisson-lock/\">í’€í•„ë¨¼íŠ¸ ì…ê³  ì„œë¹„ìŠ¤íŒ€ì—ì„œ ë¶„ì‚°ë½ì„ ì‚¬ìš©í•˜ëŠ” ë°©ë²• - Spring Redisson</a></li>\n<li><a href=\"https://techblog.woowahan.com/2631/\">MySQLì„ ì´ìš©í•œ ë¶„ì‚°ë½ìœ¼ë¡œ ì—¬ëŸ¬ ì„œë²„ì— ê±¸ì¹œ ë™ì‹œì„± ê´€ë¦¬ | ìš°ì•„í•œí˜•ì œë“¤ ê¸°ìˆ ë¸”ë¡œê·¸</a></li>\n</ul>\n</blockquote>\n<p>ëª¨ëª¨íŒ€ì€ ìœ„ì˜ ì—¬ëŸ¬ ë°©ë²• ì¤‘ Redisë¥¼ íƒí–ˆìŠµë‹ˆë‹¤. Redisë¥¼ íƒí•œ ì´ìœ ëŠ” ì‚¬ì „ì— ê¸€ë¡œë²Œ ìºì‹œë¥¼ êµ¬ì¶•í•˜ë©° Redis í™˜ê²½ì„ êµ¬ì¶•í•˜ë©° ë³„ë„ì˜ ì¶”ê°€ì ì¸ ì¸í”„ë¼ êµ¬ì¶•ì´ í•„ìš”ì—†ë‹¤ëŠ” ì ì…ë‹ˆë‹¤. ë¬¼ë¡  MySQL ì„œë²„ë„ êµ¬ì¶•ë˜ì–´ ìˆìœ¼ë‚˜ Redisì™€ MySQLì„ ë¹„êµí•´ë´¤ì„ ë•Œ, Redisì˜ ì²˜ë¦¬ ì†ë„ê°€ ë” ë¹ ë¥´ê³  ë½ì„ ìœ„í•œ MySQLì˜ ë¶€í•˜ë¥¼ ë°œìƒì‹œí‚¤ì§€ ì•Šê¸° ìœ„í•´ ì´ì™€ ê°™ì€ ì„ íƒì„ í•˜ì˜€ìŠµë‹ˆë‹¤.</p>\n<h3 id=\"lettuce-vs-redisson\" style=\"position:relative;\"><a href=\"#lettuce-vs-redisson\" aria-label=\"lettuce vs redisson permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Lettuce vs Redisson</h3>\n<p>Redisë¥¼ í†µí•œ ë¶„ì‚°ë½ êµ¬í˜„ì€ ëŒ€í‘œì ìœ¼ë¡œ Lettuceì™€ Redissonì´ë¼ëŠ” RedisClient ì¤‘ í•˜ë‚˜ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ê°ê° ë¶„ì‚°ë½ì„ êµ¬í˜„í•˜ì˜€ì„ ë•Œ íŠ¹ì§•ì„ ê°„ë‹¨íˆ ì„¤ëª…í•˜ìë©´ LettuceëŠ” Spin Lock ë°©ì‹ìœ¼ë¡œ ë½ì— ëŒ€í•œ íšë“ ì‹œë„ë¥¼ ì§€ì†ì ìœ¼ë¡œ í•´ì•¼í•˜ë©° ë½ì— ëŒ€í•œ íƒ€ì„ ì•„ì›ƒì„ ì§€ì •í•  ìˆ˜ ì—†ë‹¤ëŠ” íŠ¹ì§•ì´ ìˆìŠµë‹ˆë‹¤. ë°˜ë©´ Redissonì€ pub/sub ë°©ì‹ìœ¼ë¡œ ë™ì‘í•´ ë ˆë””ìŠ¤ ì„œë²„ì˜ ë¶€í•˜ ë¬¸ì œë¥¼ ì¤„ì—¬ì¤„ ìˆ˜ ìˆê³  ë½ì— íƒ€ì„ ì•„ì›ƒì„ ì§€ì •í•  ìˆ˜ ìˆë‹¤ëŠ” íŠ¹ì§•ì´ ìˆìŠµë‹ˆë‹¤.</p>\n<p>ì´ëŸ¬í•œ íŠ¹ì§•ì„ ê³ ë ¤í•˜ì—¬ Reddisonì„ ìµœì¢…ì ìœ¼ë¡œ ì‚¬ìš©í•˜ì˜€ìŠµë‹ˆë‹¤.</p>\n<h2 id=\"ë¶„ì‚°ë½-ì ìš©\" style=\"position:relative;\"><a href=\"#%EB%B6%84%EC%82%B0%EB%9D%BD-%EC%A0%81%EC%9A%A9\" aria-label=\"ë¶„ì‚°ë½ ì ìš© permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë¶„ì‚°ë½ ì ìš©</h2>\n<p>ë¶„ì‚°ë½ì„ ì‚¬ìš©í•˜ëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ì½”ë“œì— Redissonì„ í†µí•´ ë½ì„ íšë“í•˜ê³  ë½ì„ í’€ì–´ì£¼ëŠ” ì½”ë“œë“¤ì´ ì¶”ê°€ë  ê²ƒì…ë‹ˆë‹¤. ì´ëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ì½”ë“œë¥¼ ë³µì¡í•˜ê²Œ ë§Œë“¤ê³  ë¶„ì‚°ë½ì„ ì‚¬ìš©í•˜ê²Œ ë˜ëŠ” ë¶€ë¶„ì— ì½”ë“œì˜ ì¤‘ë³µì´ ìƒê²¨ ìœ ì§€ë³´ìˆ˜ë¥¼ ì–´ë µê²Œ ë©ë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ AOPë¥¼ í†µí•´ ì–´ë…¸í…Œì´ì…˜ ê¸°ë°˜ìœ¼ë¡œ ë¶„ì‚°ë½ì„ ì‰½ê²Œ êµ¬í˜„í•˜ê³ ì í•©ë‹ˆë‹¤.</p>\n<h3 id=\"ì˜ì¡´ì„±-ì¶”ê°€\" style=\"position:relative;\"><a href=\"#%EC%9D%98%EC%A1%B4%EC%84%B1-%EC%B6%94%EA%B0%80\" aria-label=\"ì˜ì¡´ì„± ì¶”ê°€ permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì˜ì¡´ì„± ì¶”ê°€</h3>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"\" data-index=\"6\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">dependencies {</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">\t...</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">\timplementation &#39;org.redisson:redisson-spring-boot-starter:3.17.7&#39;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">}</span></span></code></pre>\n<p>Spring Data RedisëŠ” ê¸°ë³¸ í´ë¼ì´ì–¸íŠ¸ë¡œ Lettuceë¥¼ ì‚¬ìš©í•˜ê¸°ì— Redissonì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ì˜ì¡´ì„±ì„ ì¶”ê°€í•´ì¤ë‹ˆë‹¤.</p>\n<h3 id=\"distributionlock\" style=\"position:relative;\"><a href=\"#distributionlock\" aria-label=\"distributionlock permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>DistributionLock</h3>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"java\" data-index=\"7\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">import</span><span class=\"mtk4\"> </span><span class=\"mtk11\">java.lang.annotation.ElementType</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">import</span><span class=\"mtk4\"> </span><span class=\"mtk11\">java.lang.annotation.Retention</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">import</span><span class=\"mtk4\"> </span><span class=\"mtk11\">java.lang.annotation.RetentionPolicy</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">import</span><span class=\"mtk4\"> </span><span class=\"mtk11\">java.lang.annotation.Target</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">import</span><span class=\"mtk4\"> </span><span class=\"mtk11\">java.util.concurrent.TimeUnit</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">Target</span><span class=\"mtk4\">(</span><span class=\"mtk11\">ElementType</span><span class=\"mtk1\">.</span><span class=\"mtk4\">METHOD)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">Retention</span><span class=\"mtk4\">(</span><span class=\"mtk11\">RetentionPolicy</span><span class=\"mtk1\">.</span><span class=\"mtk4\">RUNTIME)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">public</span><span class=\"mtk4\"> </span><span class=\"mtk1\">@</span><span class=\"mtk9\">interface</span><span class=\"mtk4\"> </span><span class=\"mtk11\">DistributionLock</span><span class=\"mtk4\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk11\">String</span><span class=\"mtk4\"> </span><span class=\"mtk3\">key</span><span class=\"mtk4\">()</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">long</span><span class=\"mtk4\"> </span><span class=\"mtk3\">waitTime</span><span class=\"mtk4\">() </span><span class=\"mtk9\">default</span><span class=\"mtk4\"> </span><span class=\"mtk7\">5L</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">long</span><span class=\"mtk4\"> </span><span class=\"mtk3\">leaseTime</span><span class=\"mtk4\">() </span><span class=\"mtk9\">default</span><span class=\"mtk4\"> </span><span class=\"mtk7\">2L</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk11\">TimeUnit</span><span class=\"mtk4\"> </span><span class=\"mtk3\">timeUnit</span><span class=\"mtk4\">() </span><span class=\"mtk9\">default</span><span class=\"mtk4\"> </span><span class=\"mtk11\">TimeUnit</span><span class=\"mtk1\">.</span><span class=\"mtk4\">SECONDS</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">}</span></span></span></code></pre>\n<p>ë¶„ì‚°ë½ì„ í†µí•´ ë™ì‹œì„± ë¬¸ì œë¥¼ í•´ê²°í•  ë©”ì„œë“œì— ë¶™ì¼ ì–´ë…¸í…Œì´ì…˜ì„ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤. ìœ ì—°í•œ ì‚¬ìš©ì„ ìœ„í•´ ë½ì— ì‚¬ìš©ë  í‚¤ ê°’ê³¼ Redissonì—ì„œ ë½ì„ íšë“í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” ë©”ì„œë“œ(<code>tryLock()</code>)ì˜ íŒŒë¼ë¯¸í„° ê°’ë“¤ì„ ë³€ìˆ˜ë¡œ ë‘ì–´ ë½ì— ê´€í•œ ì„¤ì •ì„ ì‰½ê²Œ í•  ìˆ˜ ìˆê²Œ í•˜ì˜€ìŠµë‹ˆë‹¤.</p>\n<ul>\n<li>waitTime : ë½ì„ íšë“í•˜ê¸°ê¹Œì§€ ê¸°ë‹¤ë¦¬ëŠ” ìµœëŒ€ ì‹œê°„ (ì‹œê°„ì´ ì§€ë‚  ë•Œê¹Œì§€ ë½ì„ íšë“í•˜ì§€ ëª»í•˜ë©´ falseë¥¼ ë°˜í™˜)</li>\n<li>leaseTime : ë½ì˜ íƒ€ì„ì•„ì›ƒì„ ì„¤ì • (ì„¤ì • ì‹œê°„ë§Œí¼ ì§€ë‚˜ë©´ ë½ì´ ë§Œë£Œë˜ì–´ ìŠ¤ìŠ¤ë¡œ í•´ì œ)</li>\n<li>timeUnit : ë½ ì„¤ì • ê°’ì— ì‚¬ìš©ë  ì‹œê°„ íƒ€ì…</li>\n</ul>\n<h3 id=\"distributionlockkeygenerator\" style=\"position:relative;\"><a href=\"#distributionlockkeygenerator\" aria-label=\"distributionlockkeygenerator permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>DistributionLockKeyGenerator</h3>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"java\" data-index=\"8\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">import</span><span class=\"mtk4\"> </span><span class=\"mtk11\">org.springframework.expression.ExpressionParser</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">import</span><span class=\"mtk4\"> </span><span class=\"mtk11\">org.springframework.expression.spel.standard.SpelExpressionParser</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">import</span><span class=\"mtk4\"> </span><span class=\"mtk11\">org.springframework.expression.spel.support.StandardEvaluationContext</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">public</span><span class=\"mtk4\"> </span><span class=\"mtk9\">class</span><span class=\"mtk4\"> </span><span class=\"mtk11\">DistributionLockKeyGenerator</span><span class=\"mtk4\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">public</span><span class=\"mtk3\"> </span><span class=\"mtk9\">static</span><span class=\"mtk3\"> </span><span class=\"mtk11\">Object</span><span class=\"mtk3\"> generate</span><span class=\"mtk1\">(</span><span class=\"mtk11\">String</span><span class=\"mtk1\"> </span><span class=\"mtk4 mtki\">methodName</span><span class=\"mtk1\">, </span><span class=\"mtk11\">String</span><span class=\"mtk1\">[] </span><span class=\"mtk4 mtki\">parameterNames</span><span class=\"mtk1\">, </span><span class=\"mtk11\">Object</span><span class=\"mtk1\">[] </span><span class=\"mtk4 mtki\">args</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                                  </span><span class=\"mtk11\">String</span><span class=\"mtk1\"> </span><span class=\"mtk4 mtki\">key</span><span class=\"mtk1\">)</span><span class=\"mtk3\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">ExpressionParser</span><span class=\"mtk1\"> </span><span class=\"mtk4\">parser</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk9\">new</span><span class=\"mtk1\"> </span><span class=\"mtk3\">SpelExpressionParser</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">StandardEvaluationContext</span><span class=\"mtk1\"> </span><span class=\"mtk4\">context</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk9\">new</span><span class=\"mtk1\"> </span><span class=\"mtk3\">StandardEvaluationContext</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk9\">for</span><span class=\"mtk1\"> (</span><span class=\"mtk9\">int</span><span class=\"mtk1\"> </span><span class=\"mtk4\">i</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">0</span><span class=\"mtk1\">; i </span><span class=\"mtk8\">&lt;</span><span class=\"mtk1\"> </span><span class=\"mtk11\">parameterNames</span><span class=\"mtk1\">.</span><span class=\"mtk4\">length</span><span class=\"mtk1\">; i++) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk11\">context</span><span class=\"mtk1\">.</span><span class=\"mtk3\">setVariable</span><span class=\"mtk1\">(parameterNames[i], args[i]);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk9\">return</span><span class=\"mtk1\"> methodName </span><span class=\"mtk8\">+</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;-&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk8\">+</span><span class=\"mtk1\"> </span><span class=\"mtk11\">parser</span><span class=\"mtk1\">.</span><span class=\"mtk3\">parseExpression</span><span class=\"mtk1\">(key).</span><span class=\"mtk3\">getValue</span><span class=\"mtk1\">(context, </span><span class=\"mtk11\">Object</span><span class=\"mtk1\">.</span><span class=\"mtk4\">class</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p>Lockì— ì‚¬ìš©ë  í‚¤ë¥¼ ìƒì„±í•˜ëŠ” í´ë˜ìŠ¤ì…ë‹ˆë‹¤. í‚¤ ê°’ì€ ì „ë‹¬ë°›ì€ ë©”ì„œë“œì˜ ì´ë¦„ê³¼ springframeworkì˜ <code>ExpressionParser</code>ë¥¼ í†µí•´  íŒŒì‹±í•œ ê°’ì„ í†µí•´ ìƒì„±í•©ë‹ˆë‹¤.</p>\n<h3 id=\"distributionlockaop\" style=\"position:relative;\"><a href=\"#distributionlockaop\" aria-label=\"distributionlockaop permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>DistributionLockAop</h3>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"java\" data-index=\"9\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">import</span><span class=\"mtk4\"> </span><span class=\"mtk11\">java.lang.reflect.Method</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">import</span><span class=\"mtk4\"> </span><span class=\"mtk11\">org.aspectj.lang.ProceedingJoinPoint</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">import</span><span class=\"mtk4\"> </span><span class=\"mtk11\">org.aspectj.lang.annotation.Around</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">import</span><span class=\"mtk4\"> </span><span class=\"mtk11\">org.aspectj.lang.annotation.Aspect</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">import</span><span class=\"mtk4\"> </span><span class=\"mtk11\">org.aspectj.lang.reflect.MethodSignature</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">import</span><span class=\"mtk4\"> </span><span class=\"mtk11\">org.redisson.api.RLock</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">import</span><span class=\"mtk4\"> </span><span class=\"mtk11\">org.redisson.api.RedissonClient</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">import</span><span class=\"mtk4\"> </span><span class=\"mtk11\">org.springframework.stereotype.Component</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">import</span><span class=\"mtk4\"> </span><span class=\"mtk11\">lombok.RequiredArgsConstructor</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">import</span><span class=\"mtk4\"> </span><span class=\"mtk11\">lombok.extern.slf4j.Slf4j</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">import</span><span class=\"mtk4\"> </span><span class=\"mtk11\">com.woowacourse.momo.global.exception.exception.GlobalErrorCode</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">import</span><span class=\"mtk4\"> </span><span class=\"mtk11\">com.woowacourse.momo.global.exception.exception.MomoException</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">Component</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">Aspect</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">RequiredArgsConstructor</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">Slf4j</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">public</span><span class=\"mtk4\"> </span><span class=\"mtk9\">class</span><span class=\"mtk4\"> </span><span class=\"mtk11\">DistributionLockAop</span><span class=\"mtk4\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">private</span><span class=\"mtk4\"> </span><span class=\"mtk9\">static</span><span class=\"mtk4\"> </span><span class=\"mtk9\">final</span><span class=\"mtk4\"> </span><span class=\"mtk11\">String</span><span class=\"mtk4\"> LOCK_PREFIX </span><span class=\"mtk8\">=</span><span class=\"mtk4\"> </span><span class=\"mtk6\">&quot;LOCK: &quot;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">private</span><span class=\"mtk4\"> </span><span class=\"mtk9\">final</span><span class=\"mtk4\"> </span><span class=\"mtk11\">RedissonClient</span><span class=\"mtk4\"> redissonClient</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">private</span><span class=\"mtk4\"> </span><span class=\"mtk9\">final</span><span class=\"mtk4\"> </span><span class=\"mtk11\">TransactionGeneratorAop</span><span class=\"mtk4\"> transactionGeneratorAop</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk1\">@</span><span class=\"mtk11\">Around</span><span class=\"mtk4\">(</span><span class=\"mtk6\">&quot;@annotation(com.woowacourse.momo.support.distributionlock.DistributionLock)&quot;</span><span class=\"mtk4\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">public</span><span class=\"mtk3\"> </span><span class=\"mtk11\">Object</span><span class=\"mtk3\"> lock</span><span class=\"mtk1\">(</span><span class=\"mtk11\">ProceedingJoinPoint</span><span class=\"mtk1\"> </span><span class=\"mtk4 mtki\">joinPoint</span><span class=\"mtk1\">)</span><span class=\"mtk3\"> </span><span class=\"mtk9\">throws</span><span class=\"mtk3\"> </span><span class=\"mtk11\">Throwable</span><span class=\"mtk3\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">MethodSignature</span><span class=\"mtk1\"> </span><span class=\"mtk4\">methodSignature</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> (MethodSignature) </span><span class=\"mtk11\">joinPoint</span><span class=\"mtk1\">.</span><span class=\"mtk3\">getSignature</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">Method</span><span class=\"mtk1\"> </span><span class=\"mtk4\">method</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">methodSignature</span><span class=\"mtk1\">.</span><span class=\"mtk3\">getMethod</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">DistributionLock</span><span class=\"mtk1\"> </span><span class=\"mtk4\">distributionLock</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">method</span><span class=\"mtk1\">.</span><span class=\"mtk3\">getAnnotation</span><span class=\"mtk1\">(</span><span class=\"mtk11\">DistributionLock</span><span class=\"mtk1\">.</span><span class=\"mtk4\">class</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">String</span><span class=\"mtk1\"> </span><span class=\"mtk4\">key</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> LOCK_PREFIX </span><span class=\"mtk8\">+</span><span class=\"mtk1\"> </span><span class=\"mtk11\">DistributionLockKeyGenerator</span><span class=\"mtk1\">.</span><span class=\"mtk3\">generate</span><span class=\"mtk1\">(</span><span class=\"mtk11\">methodSignature</span><span class=\"mtk1\">.</span><span class=\"mtk3\">getName</span><span class=\"mtk1\">(),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk11\">methodSignature</span><span class=\"mtk1\">.</span><span class=\"mtk3\">getParameterNames</span><span class=\"mtk1\">(), </span><span class=\"mtk11\">joinPoint</span><span class=\"mtk1\">.</span><span class=\"mtk3\">getArgs</span><span class=\"mtk1\">(), </span><span class=\"mtk11\">distributionLock</span><span class=\"mtk1\">.</span><span class=\"mtk3\">key</span><span class=\"mtk1\">());</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">RLock</span><span class=\"mtk1\"> </span><span class=\"mtk4\">lock</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">redissonClient</span><span class=\"mtk1\">.</span><span class=\"mtk3\">getLock</span><span class=\"mtk1\">(key);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk9\">try</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk9\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk8\">!</span><span class=\"mtk11\">lock</span><span class=\"mtk1\">.</span><span class=\"mtk3\">tryLock</span><span class=\"mtk1\">(</span><span class=\"mtk11\">distributionLock</span><span class=\"mtk1\">.</span><span class=\"mtk3\">waitTime</span><span class=\"mtk1\">(), </span><span class=\"mtk11\">distributionLock</span><span class=\"mtk1\">.</span><span class=\"mtk3\">leaseTime</span><span class=\"mtk1\">(), </span><span class=\"mtk11\">distributionLock</span><span class=\"mtk1\">.</span><span class=\"mtk3\">timeUnit</span><span class=\"mtk1\">())) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk9\">throw</span><span class=\"mtk1\"> </span><span class=\"mtk9\">new</span><span class=\"mtk1\"> </span><span class=\"mtk3\">MomoException</span><span class=\"mtk1\">(</span><span class=\"mtk11\">GlobalErrorCode</span><span class=\"mtk1\">.</span><span class=\"mtk4\">LOCK_ACQUISITION_FAILED_ERROR</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk11\">log</span><span class=\"mtk1\">.</span><span class=\"mtk3\">info</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;lock - &quot;</span><span class=\"mtk1\"> </span><span class=\"mtk8\">+</span><span class=\"mtk1\"> key);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk9\">return</span><span class=\"mtk1\"> </span><span class=\"mtk11\">transactionGeneratorAop</span><span class=\"mtk1\">.</span><span class=\"mtk3\">proceed</span><span class=\"mtk1\">(joinPoint);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        } </span><span class=\"mtk9\">catch</span><span class=\"mtk1\"> (</span><span class=\"mtk11\">InterruptedException</span><span class=\"mtk1\"> </span><span class=\"mtk4 mtki\">e</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk11\">log</span><span class=\"mtk1\">.</span><span class=\"mtk3\">error</span><span class=\"mtk1\">(</span><span class=\"mtk11\">e</span><span class=\"mtk1\">.</span><span class=\"mtk3\">getMessage</span><span class=\"mtk1\">());</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk9\">throw</span><span class=\"mtk1\"> </span><span class=\"mtk9\">new</span><span class=\"mtk1\"> </span><span class=\"mtk3\">MomoException</span><span class=\"mtk1\">(</span><span class=\"mtk11\">GlobalErrorCode</span><span class=\"mtk1\">.</span><span class=\"mtk4\">LOCK_INTERRUPTED_ERROR</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        } </span><span class=\"mtk9\">finally</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk11\">log</span><span class=\"mtk1\">.</span><span class=\"mtk3\">info</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;unlock - &quot;</span><span class=\"mtk1\"> </span><span class=\"mtk8\">+</span><span class=\"mtk1\"> key);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk11\">lock</span><span class=\"mtk1\">.</span><span class=\"mtk3\">unlock</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p>ì•ì„œ ìƒì„±í•œ <code>@DistributionLock</code> ì–´ë…¸í…Œì´ì…˜ì„ í†µí•´ ìˆ˜í–‰í•  AOP ì„¤ì • í´ë˜ìŠ¤ ì…ë‹ˆë‹¤. ë™ì‘ê³¼ì •ì€ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.</p>\n<ol>\n<li><code>DistributionLockKeyGenerator.generate()</code> ë©”ì„œë“œë¥¼ í†µí•´ Lockì— ì‚¬ìš©ë  í‚¤ ê°’ì„ ìƒì„±í•œë‹¤.</li>\n<li>redissonClientë¥¼ í†µí•´ <code>RLock</code> ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.</li>\n<li><code>RLock.tryLock()</code> ë©”ì„œë“œë¥¼ í†µí•´ ìµœëŒ€ waitTime ì‹œê°„ë§Œí¼ ë½ì˜ íšë“ì„ ê¸°ë‹¤ë¦°ë‹¤.</li>\n<li>ë½ì˜ íšë“ì´ ê°€ëŠ¥í•˜ë‹¤ë©´ leaseTimeì„ íƒ€ì„ì•„ì›ƒìœ¼ë¡œ ì„¤ì •í•˜ë©° ë½ì„ íšë“í•œë‹¤.</li>\n<li>\n<p>transactionGeneratorAopë¥¼ í†µí•´ ìƒˆë¡œìš´ íŠ¸ëœì­ì…˜ì„ ìƒì„±í•˜ë©° ë¡œì§ì„ ìˆ˜í–‰í•œë‹¤.</p>\n<blockquote>\n<p>í•´ë‹¹ ë‚´ìš©ì€ <code>TransactionGeneratorAop</code> í´ë˜ìŠ¤ì˜ ì„¤ëª…ì„ í•˜ë©° ìì„¸íˆ ë‹¤ë£¨ê² ìŠµë‹ˆë‹¤.</p>\n</blockquote>\n</li>\n</ol>\n<h3 id=\"transactiongeneratoraop\" style=\"position:relative;\"><a href=\"#transactiongeneratoraop\" aria-label=\"transactiongeneratoraop permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TransactionGeneratorAop</h3>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"java\" data-index=\"10\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">Component</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">public</span><span class=\"mtk4\"> </span><span class=\"mtk9\">class</span><span class=\"mtk4\"> </span><span class=\"mtk11\">TransactionGeneratorAop</span><span class=\"mtk4\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk1\">@</span><span class=\"mtk11\">Transactional</span><span class=\"mtk4\">(</span><span class=\"mtk7\">propagation</span><span class=\"mtk4\"> </span><span class=\"mtk8\">=</span><span class=\"mtk4\"> </span><span class=\"mtk11\">Propagation</span><span class=\"mtk1\">.</span><span class=\"mtk4\">REQUIRES_NEW)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">public</span><span class=\"mtk3\"> </span><span class=\"mtk11\">Object</span><span class=\"mtk3\"> proceed</span><span class=\"mtk1\">(</span><span class=\"mtk11\">ProceedingJoinPoint</span><span class=\"mtk1\"> </span><span class=\"mtk4 mtki\">joinPoint</span><span class=\"mtk1\">)</span><span class=\"mtk3\"> </span><span class=\"mtk9\">throws</span><span class=\"mtk3\"> </span><span class=\"mtk11\">Throwable</span><span class=\"mtk3\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk9\">return</span><span class=\"mtk1\"> </span><span class=\"mtk11\">joinPoint</span><span class=\"mtk1\">.</span><span class=\"mtk3\">proceed</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p><code>@Transactional(propagation = Propagation.REQUIRES_NEW)</code>ë¥¼ í†µí•´ ìƒˆë¡œìš´ íŠ¸ëœì­ì…˜ì„ ë§Œë“¤ì–´ ë¡œì§ì„ ìˆ˜í–‰í•˜ëŠ” AOP í´ë˜ìŠ¤ì…ë‹ˆë‹¤.</p>\n<p>í•´ë‹¹ AOPë¥¼ í†µí•´ ìƒˆë¡œìš´ íŠ¸ëœì­ì…˜ì„ ìƒì„±í•˜ì§€ ì•Šë”ë¼ë„ ë¶„ì‚°ë½ í…ŒìŠ¤íŠ¸ëŠ” ì •ìƒì ìœ¼ë¡œ í†µê³¼í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ ì´ëŸ´ ê²½ìš° ë¶„ì‚°ë½ì˜ ë°˜ë‚©ì´ ì§„í–‰ëœ ì´í›„ì— íŠ¸ëœì­ì…˜ì˜ ì»¤ë°‹ì´ ë°œìƒí•˜ê¸°ì— í¬ë°•í•œ ê°€ëŠ¥ì„±ìœ¼ë¡œ ì˜ˆìƒí•˜ì§€ ëª»í•œ ë™ì‘ìœ¼ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´í•´ë¥¼ ìœ„í•´ ê·¸ë¦¼ìœ¼ë¡œ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 84%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAACqklEQVQ4y5VUS08TURTu7/Ev6MpfoTuXxoUxbhDdGIUoEQKJ4iPBADGYgGEBacKCiIIiBqEwZaaddt7PzqMTihT6nH7eO840NAUfJzm5M3PufOe753znpnzfh2VZ8DwPhmmiXC6DWqfTiVaWZZHNZiGKIgRB6Mao8zyPfD4feS6Xg23bSFEAGtjd2QHHMLBLpeinMAyjlSYSRQGapiIIAgrXTZaQoWCO46BSqSCF2FxDB0wN59lxtUE213qYJys1CpZYKmEiFXhYBwxc4o6qwiHMPNeFrjtgMvNQhPkYKOwemXqr1YJJSpUkSSWZFEUhNSC19D3Uaqdo1Guo107IM2CIT2BLtxHt7LR7GLbb7V7AhGGRFHxwYgZ3Rqfx7F0aI7PLGJtL4/nCF+SYYbjq/Qiw8zfAJCBJElY/b2Bj6wc+rn/FQVGAoOsQjEPI/AhK8sC/ASYMBUHEo1dzGJiYxcPJOYy+WMDLqSW8nvkEbu8xYXivC5jU748MNU0Hw4tgZR35ggJ+JQM+vY3iqgCZGyGN+s8jG6Sz4dEh0cgR0GzEIoiTFYah5m72MoyjF3ZZLBSgZfdh5TnYmhapvkRcU02w3BoR8Fa/QE+qaCsiLE3rB7TIzxeZzaWRXR2H6waoBB6ZmDICXUOZZVDa34VIJq0PkNJuNZvRR9qoyNtN0JbpK9ehvL+EotMErxoQDZc8+9jkeKxlGBRF6RyGZCb77XfMWb8FffEyxj98IyqYxtCbeTx9MIWxwbcYujuJvUy2O/9dQLlYgLX9HT6ZFp9cGPRSKPsuTPcEwvI1uMtX0CR069UK8WPUnQCNUoBTy4NlGOePXoXUplqtnvGfODoF8ks3IC1ejVmHPWegIpJkuR+Q3nXhmRvkrJVMCbrEdo8VySZeqWzsuKH0/Re/1fOqIBfl2QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled\"\n        title=\"Untitled\"\n        src=\"/static/4a2a052553939efe95e1a1354a6b1170/c1b63/img_3.png\"\n        srcset=\"/static/4a2a052553939efe95e1a1354a6b1170/5a46d/img_3.png 300w,\n/static/4a2a052553939efe95e1a1354a6b1170/0a47e/img_3.png 600w,\n/static/4a2a052553939efe95e1a1354a6b1170/c1b63/img_3.png 1200w,\n/static/4a2a052553939efe95e1a1354a6b1170/9f9a4/img_3.png 1560w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>ë¶„ì‚°ë½ì„ íšë“í•˜ê³  ë°˜ë‚©ì´ íŠ¸ëœì­ì…˜ ì•ˆì—ì„œ ì²˜ë¦¬ë˜ë©´ ìœ„ì™€ ê°™ì´ ì´ì „ì— ë™ë½í•œ íŠ¸ëœì­ì…˜(1ë²ˆ íŠ¸ëœì­ì…˜)ì˜ ì»¤ë°‹ì´ ë˜ì§€ ì•Šì•„ ë½ì„ íšë“í•œ íŠ¸ëœì­ì…˜(2ë²ˆ íŠ¸ëœì­ì…˜)ì—ì„œ ì—…ë°ì´íŠ¸ ëœ ë°ì´í„°ê°€ ì•„ë‹Œ ì–¸ë‘ë¡œê·¸ì˜ ë°ì´í„°ë¥¼ ì½ì–´ì™€ ì •í•©ì„±ì´ ê¹¨ì§€ëŠ” ìƒí™©ì´ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ë¬¸ì œëŠ” ë½ì„ íšë“í•˜ê³  ë°˜ë‚©í•˜ëŠ” ë¡œì§ ë‚´ì—ì„œ íŠ¸ëœì­ì…˜ì˜ ì»¤ë°‹ê¹Œì§€ ì´ë£¨ì–´ì§€ë„ë¡ ë³€ê²½í•˜ë©´ ë©ë‹ˆë‹¤.</p>\n<p>ìœ„ì—ì„œ ì§€ì •í•œ <code>TransactionGeneratorAop</code>ë¥¼ í†µí•´ ë¶„ì‚°ë½ì„ í†µí•´ ë™ì‘í•˜ëŠ” ë¡œì§ì„ ìƒˆë¡œìš´ íŠ¸ëœì­ì­ì…˜ ë‚´ì—ì„œ ìˆ˜í–‰í•˜ë„ë¡ ë³€ê²½í•˜ë©´ ë½ì„ ë°˜ë‚©í•˜ê¸° ì´ì „ì— íŠ¸ëœì­ì…˜ì˜ ì»¤ë°‹ì´ ì´ë£¨ì–´ì ¸ ì•„ë˜ì™€ ê°™ì´ ë™ì‘í•˜ê²Œ ë©ë‹ˆë‹¤.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 82.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAACnElEQVQ4y5VUbU/TUBQm8Q8Y/4i/xMRvGuNvMPEr4SP6ATWGSAwhihjnywwyiATNdASIRGCsBkcLW5e9tOvrum6rY1C27vHcbq0ShnEnuWly77lPz3nO89yR3d1d8IKAvXQah6KIjuchiHK5jEQiAZ7nwXEcGo1GeKYoCra2tpBKpfwvy2HnIw3HQSGXQ2ZnG9r+TzRUBc2jFprNpp8gyzLy+QJc10Wn0/HBut2uv9iepmn+Ymdsb4QlmIaB3PZ3WLIETVWh6Tp0nRJ1C8L+GvL8HfqB3QfzQlAW7Ke1Wi3c8wGtSgWermBQOLU9VEvXYVeVgYAMzLbt84ALX9YRS2widVhAOq/goKRCKNkQcxsEeJMuaf8PWK/ZeDwbxfjMO0y9Xcbkq0VMv1/B0+hXbGzOw1FuoTpshUsrcSx+XsXipwTWkxwysgK+aCIrrsGWbtAldbgKJ55HMToVwcRcDPfHZjA5NotHoxGsrkTg6LdRtYap0LJgq2WgzaTRRsd20DZocrVTGBJN3+fwT4WBbC4ErJBsbC4JVGnapy5YqofeBVNPQhOvhRx6Xg/Q+xegRqrnSYeKsA8pm4FMDimToIvFEjngB7IHcVwUDhljYMsOOWNQnLhtSEoDhmmS2HWYNECDnKGTqyq08lwKdr1+fsr1cLPfktezWaWUBP/yKlRJZP2ifdJCxz2GS9S4chE6dXUekCoMjB8Q3u0DmmIc9deXkBF5JDNlEn4RXE7Gxp6A+dVvWNuhR2MYQCMbh7twGR+WP+Lugzk8jCxh/N4snoy9IGnN4c2zGNHlnAVk3PxtcP8bAJL1hOkrcKqB10mHxCvqLaB5CktSfF7PTplIDiYVyqL/Lh63jlAQ032pwJeL14PtyYY6++U44d3fhWvz1fp+ip4AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled\"\n        title=\"Untitled\"\n        src=\"/static/b1d24674e3fe62ada9ba8eba77550712/c1b63/img_4.png\"\n        srcset=\"/static/b1d24674e3fe62ada9ba8eba77550712/5a46d/img_4.png 300w,\n/static/b1d24674e3fe62ada9ba8eba77550712/0a47e/img_4.png 600w,\n/static/b1d24674e3fe62ada9ba8eba77550712/c1b63/img_4.png 1200w,\n/static/b1d24674e3fe62ada9ba8eba77550712/7be33/img_4.png 1558w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<h3 id=\"ë¹„ì¦ˆë‹ˆìŠ¤-ë¡œì§\" style=\"position:relative;\"><a href=\"#%EB%B9%84%EC%A6%88%EB%8B%88%EC%8A%A4-%EB%A1%9C%EC%A7%81\" aria-label=\"ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§</h3>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"java\" data-index=\"11\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">RequiredArgsConstructor</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">Service</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">public</span><span class=\"mtk4\"> </span><span class=\"mtk9\">class</span><span class=\"mtk4\"> </span><span class=\"mtk11\">ParticipateService</span><span class=\"mtk4\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">private</span><span class=\"mtk4\"> </span><span class=\"mtk9\">final</span><span class=\"mtk4\"> </span><span class=\"mtk11\">MemberFindService</span><span class=\"mtk4\"> memberFindService</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">private</span><span class=\"mtk4\"> </span><span class=\"mtk9\">final</span><span class=\"mtk4\"> </span><span class=\"mtk11\">GroupFindService</span><span class=\"mtk4\"> groupFindService</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk1\">@</span><span class=\"mtk11\">DistributionLock</span><span class=\"mtk4\">(</span><span class=\"mtk7\">key</span><span class=\"mtk4\"> </span><span class=\"mtk8\">=</span><span class=\"mtk4\"> </span><span class=\"mtk6\">&quot;#groupId&quot;</span><span class=\"mtk4\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">public</span><span class=\"mtk3\"> </span><span class=\"mtk9\">void</span><span class=\"mtk3\"> participate</span><span class=\"mtk1\">(</span><span class=\"mtk11\">Long</span><span class=\"mtk1\"> </span><span class=\"mtk4 mtki\">groupId</span><span class=\"mtk1\">, </span><span class=\"mtk11\">Long</span><span class=\"mtk1\"> </span><span class=\"mtk4 mtki\">memberId</span><span class=\"mtk1\">)</span><span class=\"mtk3\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">Group</span><span class=\"mtk1\"> </span><span class=\"mtk4\">group</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">groupFindService</span><span class=\"mtk1\">.</span><span class=\"mtk3\">findGroup</span><span class=\"mtk1\">(groupId);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">Member</span><span class=\"mtk1\"> </span><span class=\"mtk4\">member</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">memberFindService</span><span class=\"mtk1\">.</span><span class=\"mtk3\">findMember</span><span class=\"mtk1\">(memberId);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">group</span><span class=\"mtk1\">.</span><span class=\"mtk3\">participate</span><span class=\"mtk1\">(member);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p>ì´ì œ ì•ì„œ ìƒì„±í•œ ë¶„ì‚°ë½ ì–´ë…¸í…Œì´ì…˜ì„ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì— ì ìš©í•˜ê³  í…ŒìŠ¤íŠ¸í•´ë³´ê² ìŠµë‹ˆë‹¤. ê¸°ì¡´ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ê³¼ ë‹¤ë¥´ê²Œ ë‚´ë¶€ ë¡œì§ì—ì„œ ìƒˆë¡œìš´ íŠ¸ëœì­ì…˜ì„ ë§Œë“¤ê¸°ì— <code>@Transacitonal</code>ì„ ì œê±°í•˜ì˜€ìŠµë‹ˆë‹¤. <code>@Transactional</code>ì„ ê·¸ëŒ€ë¡œ ë¶™ì—¬ë‘¬ë„ ë˜ì§€ë§Œ ë¶ˆí•„ìš”í•˜ê²Œ ë” ë§ì€ ë°ì´í„°ë² ì´ìŠ¤ ì»¤ë„¥ì…˜ì„ ì‚¬ìš©í•˜ì—¬ ì»¤ë„¥ì…˜ ê³ ê°ˆ ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<h3 id=\"ê²°ê³¼-í™•ì¸\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EA%B3%BC-%ED%99%95%EC%9D%B8\" aria-label=\"ê²°ê³¼ í™•ì¸ permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ê²°ê³¼ í™•ì¸</h3>\n<p>ìœ„ì˜ ë¡œì§ì„ ì ìš© í›„ í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•´ë³¸ ê²°ê³¼ëŠ” ì•„ë˜ì™€ ê°™ì´ ì„±ê³µì ìœ¼ë¡œ í†µê³¼í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ ë¡œê·¸ë¥¼ í™•ì¸í•´ë³´ë©´ Lockì˜ íšë“ê³¼ Lockì˜ ë°˜ë‚©ì´ ìˆœì°¨ì ìœ¼ë¡œ ì§„í–‰ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 24%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAm0lEQVQY042QSw7CMAxEc55uW9TEnzgpKhJC4v63GeICLa1YdDGy45GfJg71/oTOD+SmVG6INi/1ohNSSiAijOMIVV3fZgZmRtd1GIZhmblPxAiUK9imncSuiJwRPwAHfYEOKqUcgNx8gYgiqBVoPsgqSLZEMcZzCdssSFve6QTwmNB7kTVhxa82YF5ADvHqC/8S9n3/Pknz/esvlUSozLWzkVkAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled\"\n        title=\"Untitled\"\n        src=\"/static/7702e63f293866267cd800c41d933edd/c1b63/img_5.png\"\n        srcset=\"/static/7702e63f293866267cd800c41d933edd/5a46d/img_5.png 300w,\n/static/7702e63f293866267cd800c41d933edd/0a47e/img_5.png 600w,\n/static/7702e63f293866267cd800c41d933edd/c1b63/img_5.png 1200w,\n/static/7702e63f293866267cd800c41d933edd/d61c2/img_5.png 1800w,\n/static/7702e63f293866267cd800c41d933edd/97a96/img_5.png 2400w,\n/static/7702e63f293866267cd800c41d933edd/79daf/img_5.png 2792w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<h2 id=\"ë°œìƒí•œ-ë¬¸ì œ\" style=\"position:relative;\"><a href=\"#%EB%B0%9C%EC%83%9D%ED%95%9C-%EB%AC%B8%EC%A0%9C\" aria-label=\"ë°œìƒí•œ ë¬¸ì œ permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë°œìƒí•œ ë¬¸ì œ</h2>\n<h3 id=\"ë¬¸ì œ---íŠ¸ëœì­ì…˜ì„-ìƒˆë¡œ-ë¶„ë¦¬í•˜ë©°-ì‹¤íŒ¨í•˜ëŠ”-í…ŒìŠ¤íŠ¸\" style=\"position:relative;\"><a href=\"#%EB%AC%B8%EC%A0%9C---%ED%8A%B8%EB%9E%9C%EC%9E%AD%EC%85%98%EC%9D%84-%EC%83%88%EB%A1%9C-%EB%B6%84%EB%A6%AC%ED%95%98%EB%A9%B0-%EC%8B%A4%ED%8C%A8%ED%95%98%EB%8A%94-%ED%85%8C%EC%8A%A4%ED%8A%B8\" aria-label=\"ë¬¸ì œ   íŠ¸ëœì­ì…˜ì„ ìƒˆë¡œ ë¶„ë¦¬í•˜ë©° ì‹¤íŒ¨í•˜ëŠ” í…ŒìŠ¤íŠ¸ permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë¬¸ì œ - íŠ¸ëœì­ì…˜ì„ ìƒˆë¡œ ë¶„ë¦¬í•˜ë©° ì‹¤íŒ¨í•˜ëŠ” í…ŒìŠ¤íŠ¸</h3>\n<p>íŠ¸ëœì­ì…˜ì„ ë¶„ë¦¬í•˜ë©° ê¸°ì¡´ì— ì„±ê³µí•˜ë˜ ê´€ë ¨ ë¡œì§ë“¤ì´ ì‹¤íŒ¨í•˜ëŠ” ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë¨¼ì € ì‹¤íŒ¨í•˜ëŠ” í…ŒìŠ¤íŠ¸ ì¤‘ í•œê°œë¥¼ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"java\" data-index=\"12\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">Transactional</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">TestConstructor</span><span class=\"mtk4\">(</span><span class=\"mtk7\">autowireMode</span><span class=\"mtk4\"> </span><span class=\"mtk8\">=</span><span class=\"mtk4\"> </span><span class=\"mtk11\">TestConstructor</span><span class=\"mtk1\">.</span><span class=\"mtk11\">AutowireMode</span><span class=\"mtk1\">.</span><span class=\"mtk4\">ALL)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">RequiredArgsConstructor</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">SpringBootTest</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">class</span><span class=\"mtk4\"> </span><span class=\"mtk11\">ParticipateServiceTest</span><span class=\"mtk4\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk1\">...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">private</span><span class=\"mtk4\"> </span><span class=\"mtk11\">Group</span><span class=\"mtk4\"> group</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">private</span><span class=\"mtk4\"> </span><span class=\"mtk11\">Member</span><span class=\"mtk4\"> host</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">private</span><span class=\"mtk4\"> </span><span class=\"mtk11\">Member</span><span class=\"mtk4\"> participant</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk1\">@</span><span class=\"mtk11\">BeforeEach</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">void</span><span class=\"mtk3\"> setUp</span><span class=\"mtk1\">()</span><span class=\"mtk3\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">this</span><span class=\"mtk1\">.</span><span class=\"mtk4\">host</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">memberRepository</span><span class=\"mtk1\">.</span><span class=\"mtk3\">save</span><span class=\"mtk1\">(</span><span class=\"mtk11\">MOMO</span><span class=\"mtk1\">.</span><span class=\"mtk3\">toMember</span><span class=\"mtk1\">());</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">this</span><span class=\"mtk1\">.</span><span class=\"mtk4\">group</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">groupRepository</span><span class=\"mtk1\">.</span><span class=\"mtk3\">save</span><span class=\"mtk1\">(</span><span class=\"mtk11\">MOMO_STUDY</span><span class=\"mtk1\">.</span><span class=\"mtk3\">toGroup</span><span class=\"mtk1\">(host));</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">this</span><span class=\"mtk1\">.</span><span class=\"mtk4\">participant</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">memberRepository</span><span class=\"mtk1\">.</span><span class=\"mtk3\">save</span><span class=\"mtk1\">(</span><span class=\"mtk11\">DUDU</span><span class=\"mtk1\">.</span><span class=\"mtk3\">toMember</span><span class=\"mtk1\">());</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk1\">@</span><span class=\"mtk11\">DisplayName</span><span class=\"mtk4\">(</span><span class=\"mtk6\">&quot;ëª¨ì„ì— ì°¸ì—¬í•œë‹¤&quot;</span><span class=\"mtk4\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk1\">@</span><span class=\"mtk11\">Test</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">void</span><span class=\"mtk3\"> participate</span><span class=\"mtk1\">()</span><span class=\"mtk3\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk9\">long</span><span class=\"mtk1\"> </span><span class=\"mtk4\">groupId</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">group</span><span class=\"mtk1\">.</span><span class=\"mtk3\">getId</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk9\">long</span><span class=\"mtk1\"> </span><span class=\"mtk4\">participantId</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">participant</span><span class=\"mtk1\">.</span><span class=\"mtk3\">getId</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">participateService</span><span class=\"mtk1\">.</span><span class=\"mtk3\">participate</span><span class=\"mtk1\">(groupId, participantId);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">List</span><span class=\"mtk1\">&lt;</span><span class=\"mtk11\">MemberResponse</span><span class=\"mtk1\">&gt; </span><span class=\"mtk4\">participants</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">participateService</span><span class=\"mtk1\">.</span><span class=\"mtk3\">findParticipants</span><span class=\"mtk1\">(groupId);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk3\">assertThat</span><span class=\"mtk1\">(participants).</span><span class=\"mtk3\">hasSize</span><span class=\"mtk1\">(</span><span class=\"mtk7\">2</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk1\">...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 10.666666666666668%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAhUlEQVQI1w3Juw6CMABAUX5HoC9pCzVWUUyjJJgoPkZ3Jx38/muHs9xbpOub++vH8flhP3/ZrA/slKA3hlZKrBAspaLULbWyaKXQubvcg8xPSBaVoKwFVVashgvbNGc3YnrQ2ECvJJNznLPRNpklOc8pm1rP4D1j1xFdQNtI2URqE6ik4Q9loUMtDF/liwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled\"\n        title=\"Untitled\"\n        src=\"/static/23081617bd7b91af464bc4157f20af8d/c1b63/img_6.png\"\n        srcset=\"/static/23081617bd7b91af464bc4157f20af8d/5a46d/img_6.png 300w,\n/static/23081617bd7b91af464bc4157f20af8d/0a47e/img_6.png 600w,\n/static/23081617bd7b91af464bc4157f20af8d/c1b63/img_6.png 1200w,\n/static/23081617bd7b91af464bc4157f20af8d/d61c2/img_6.png 1800w,\n/static/23081617bd7b91af464bc4157f20af8d/037ab/img_6.png 2274w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>ê¸°ì¡´ì— ì •ìƒì ìœ¼ë¡œ í†µê³¼í•˜ë˜ í…ŒìŠ¤íŠ¸ê°€ â€œì¡´ì¬í•˜ì§€ ì•ŠëŠ” ëª¨ì„ì…ë‹ˆë‹¤.â€ ë¼ëŠ” ì˜ˆì™¸ì™€ í•¨ê»˜ ì‹¤íŒ¨í•˜ê²Œ ëìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ë¬¸ì œê°€ ë°œìƒí•œ ì´ìœ ëŠ” íŠ¸ëœì­ì…˜ê³¼ ì—°ê´€ìˆìŠµë‹ˆë‹¤.</p>\n<p>í…ŒìŠ¤íŠ¸ëŠ” ê°ê°ì˜ í…ŒìŠ¤íŠ¸ë³„ ê²©ë¦¬ë¥¼ ìœ„í•´ í´ë˜ìŠ¤ ë ˆë²¨ì— <code>@Transactional</code> ì„ ë¶™ì´ë©° í…ŒìŠ¤íŠ¸ì˜ ìˆ˜í–‰ í›„ Rollbackì´ ë˜ì–´ ì´í›„ í…ŒìŠ¤íŠ¸ì— ì˜í–¥ì´ ê°€ì§€ ì•Šë„ë¡ í–ˆìŠµë‹ˆë‹¤. í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•˜ëŠ” <code>participate()</code>ë©”ì„œë“œëŠ” ë¶„ì‚°ë½ì„ ì ìš©í•˜ê¸° ì „ì—ëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì— <code>@Transactional</code>ì´ ë¶™ì–´ìˆë”ë¼ë„ Default ì„¤ì •ê°’ì¸ <code>Propagation.REQUIRED</code>ìœ¼ë¡œ ë™ì‘í•˜ë©° í…ŒìŠ¤íŠ¸ ë©”ì„œë“œì˜ ê°™ì€ íŠ¸ëœì­ì…˜ ë‚´ì—ì„œ ë¡œì§ì´ ìˆ˜í–‰ë˜ê²Œ ë˜ì–´ ë¬¸ì œê°€ ì—†ì—ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ë¶„ì‚°ë½ì´ ê±¸ë¦° ë¡œì§ ë‚´ì—ì„œ <code>Propagation.REQUIRES_NEW</code>ë¥¼ í†µí•´ <strong>ìƒˆë¡œìš´ íŠ¸ëœì­ì…˜ì„ ë§Œë“¤ì–´ ìˆ˜í–‰í•˜ë‹¤ë³´ë‹ˆ íŠ¸ëœì­ì…˜ ê²©ë¦¬ì— ì˜í•´ ì»¤ë°‹ë˜ì§€ ì•Šì€ ë¶€ëª¨ íŠ¸ëœì­ì…˜ì˜ ë°ì´í„°ë¥¼ ì½ì§€ ëª»í•´ ëª¨ì„ì„ ì°¾ì§€ ëª»í•˜ëŠ” ë¬¸ì œê°€ ë°œìƒí•œ ê²ƒì…ë‹ˆë‹¤.</strong></p>\n<p>ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ í…ŒìŠ¤íŠ¸ ê²©ë¦¬ ë°©ë²•ì„ <code>@Transactional</code>ì„ í†µí•´ ë¡¤ë°±í•˜ëŠ” ë°©ì‹ì´ ì•„ë‹Œ <code>@Sql</code>ì„ í†µí•´ í…ŒìŠ¤íŠ¸ì˜ ì‹¤í–‰ ì „ì— ë°ì´í„°ë² ì´ìŠ¤ì˜ í…Œì´ë¸”ì„ ì´ˆê¸°í™”ëŠ” ë°©ì‹ìœ¼ë¡œ ë³€ê²½í•˜ë©° ë¬¸ì œë¥¼ í•´ê²°í–ˆìŠµë‹ˆë‹¤.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"java\" data-index=\"13\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">Sql</span><span class=\"mtk4\">(</span><span class=\"mtk7\">value</span><span class=\"mtk4\"> </span><span class=\"mtk8\">=</span><span class=\"mtk4\"> </span><span class=\"mtk6\">&quot;classpath:init.sql&quot;</span><span class=\"mtk1\">,</span><span class=\"mtk4\"> </span><span class=\"mtk7\">executionPhase</span><span class=\"mtk4\"> </span><span class=\"mtk8\">=</span><span class=\"mtk4\"> BEFORE_TEST_METHOD)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">Sql</span><span class=\"mtk4\">(</span><span class=\"mtk7\">value</span><span class=\"mtk4\"> </span><span class=\"mtk8\">=</span><span class=\"mtk4\"> </span><span class=\"mtk6\">&quot;classpath:truncate.sql&quot;</span><span class=\"mtk1\">,</span><span class=\"mtk4\"> </span><span class=\"mtk7\">executionPhase</span><span class=\"mtk4\"> </span><span class=\"mtk8\">=</span><span class=\"mtk4\"> AFTER_TEST_METHOD)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">TestConstructor</span><span class=\"mtk4\">(</span><span class=\"mtk7\">autowireMode</span><span class=\"mtk4\"> </span><span class=\"mtk8\">=</span><span class=\"mtk4\"> </span><span class=\"mtk11\">TestConstructor</span><span class=\"mtk1\">.</span><span class=\"mtk11\">AutowireMode</span><span class=\"mtk1\">.</span><span class=\"mtk4\">ALL)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">RequiredArgsConstructor</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">SpringBootTest</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">class</span><span class=\"mtk4\"> </span><span class=\"mtk11\">ParticipateServiceTest</span><span class=\"mtk4\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk1\">...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk1\">@</span><span class=\"mtk11\">DisplayName</span><span class=\"mtk4\">(</span><span class=\"mtk6\">&quot;ëª¨ì„ì— ì°¸ì—¬í•œë‹¤&quot;</span><span class=\"mtk4\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk1\">@</span><span class=\"mtk11\">Test</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">void</span><span class=\"mtk3\"> participate</span><span class=\"mtk1\">()</span><span class=\"mtk3\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk9\">long</span><span class=\"mtk1\"> </span><span class=\"mtk4\">groupId</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">group</span><span class=\"mtk1\">.</span><span class=\"mtk3\">getId</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk9\">long</span><span class=\"mtk1\"> </span><span class=\"mtk4\">participantId</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">participant</span><span class=\"mtk1\">.</span><span class=\"mtk3\">getId</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">participateService</span><span class=\"mtk1\">.</span><span class=\"mtk3\">participate</span><span class=\"mtk1\">(groupId, participantId);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">List</span><span class=\"mtk1\">&lt;</span><span class=\"mtk11\">MemberResponse</span><span class=\"mtk1\">&gt; </span><span class=\"mtk4\">participants</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">participateService</span><span class=\"mtk1\">.</span><span class=\"mtk3\">findParticipants</span><span class=\"mtk1\">(groupId);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk3\">assertThat</span><span class=\"mtk1\">(participants).</span><span class=\"mtk3\">hasSize</span><span class=\"mtk1\">(</span><span class=\"mtk7\">2</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk1\">...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<h1 id=\"reference\" style=\"position:relative;\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ“šReference</h1>\n<ul>\n<li><a href=\"https://helloworld.kurly.com/blog/distributed-redisson-lock/\">í’€í•„ë¨¼íŠ¸ ì…ê³  ì„œë¹„ìŠ¤íŒ€ì—ì„œ ë¶„ì‚°ë½ì„ ì‚¬ìš©í•˜ëŠ” ë°©ë²• - Spring Redisson</a></li>\n<li><a href=\"https://github.com/redisson/redisson\">Redisson Repo</a></li>\n<li><a href=\"https://velog.io/@chullll/JPA-%EB%9D%BD%EC%9D%84-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EC%9E%AC%EA%B3%A0-%EA%B4%80%EB%A6%AC\">[JPA] ë½ì„ ì´ìš©í•œ ì¬ê³  ê´€ë¦¬</a></li>\n<li><a href=\"https://devfunny.tistory.com/888\">SpringBoot ì¬ê³  ê°ì†Œ ë™ì‹œì„± ì œì–´ - Redisson ì‚¬ìš© (+ AOP ì ìš©)</a></li>\n<li><a href=\"https://velog.io/@ohzzi/Redis%EB%A5%BC-%ED%99%9C%EC%9A%A9%ED%95%98%EC%97%AC-%EB%8F%99%EC%8B%9C%EC%84%B1-%EB%AC%B8%EC%A0%9C-%ED%95%B4%EA%B2%B0%ED%95%98%EA%B8%B0\">Redisë¥¼ í™œìš©í•˜ì—¬ ë™ì‹œì„± ë¬¸ì œ í•´ê²°í•˜ê¸°</a></li>\n<li><a href=\"https://thalals.tistory.com/370\">[Spring &#x26; Java] ğŸš€ ì¬ê³ ì‹œìŠ¤í…œìœ¼ë¡œ ì•Œì•„ë³´ëŠ” ë™ì‹œì„±ì´ìŠˆ í•´ê²°ë°©ë²•</a></li>\n</ul>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .one-dark-pro {\n    background-color: #282c34;\n    color: #abb2bf;\n  }\n  .one-dark-pro .mtki { font-style: italic; }\n  .one-dark-pro .mtk1 { color: #ABB2BF; }\n  .one-dark-pro .mtk11 { color: #E5C07B; }\n  .one-dark-pro .mtk4 { color: #E06C75; }\n  .one-dark-pro .mtk7 { color: #D19A66; }\n  .one-dark-pro .mtk8 { color: #56B6C2; }\n  .one-dark-pro .mtk9 { color: #C678DD; }\n  .one-dark-pro .mtk3 { color: #61AFEF; }\n  .one-dark-pro .mtk6 { color: #98C379; }\n  .one-dark-pro .mtk5 { color: #7F848E; }\n  .one-dark-pro .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));\n  }\n</style>","tableOfContents":"<ul>\n<li>\n<p><a href=\"/Spring-MVC/20230528-%EB%AA%A8%EB%91%90%EB%AA%A8%EC%97%AC%EB%9D%BC_%ED%8C%80%EC%9D%98_%EB%8F%99%EC%8B%9C%EC%84%B1%EB%AC%B8%EC%A0%9C_%ED%95%B4%EA%B2%B0_%EA%B3%BC%EC%A0%95/#%ED%95%B4%EA%B2%B0-%EA%B3%BC%EC%A0%95-1---synchronized\">í•´ê²° ê³¼ì • 1 - synchronized</a></p>\n<ul>\n<li><a href=\"/Spring-MVC/20230528-%EB%AA%A8%EB%91%90%EB%AA%A8%EC%97%AC%EB%9D%BC_%ED%8C%80%EC%9D%98_%EB%8F%99%EC%8B%9C%EC%84%B1%EB%AC%B8%EC%A0%9C_%ED%95%B4%EA%B2%B0_%EA%B3%BC%EC%A0%95/#%EC%BD%94%EB%93%9C-%EB%B0%8F-%EA%B2%B0%EA%B3%BC\">ì½”ë“œ ë° ê²°ê³¼</a></li>\n<li><a href=\"/Spring-MVC/20230528-%EB%AA%A8%EB%91%90%EB%AA%A8%EC%97%AC%EB%9D%BC_%ED%8C%80%EC%9D%98_%EB%8F%99%EC%8B%9C%EC%84%B1%EB%AC%B8%EC%A0%9C_%ED%95%B4%EA%B2%B0_%EA%B3%BC%EC%A0%95/#%EB%82%A8%EC%95%84%EC%9E%88%EB%8A%94-%EB%AC%B8%EC%A0%9C\">ë‚¨ì•„ìˆëŠ” ë¬¸ì œ</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/Spring-MVC/20230528-%EB%AA%A8%EB%91%90%EB%AA%A8%EC%97%AC%EB%9D%BC_%ED%8C%80%EC%9D%98_%EB%8F%99%EC%8B%9C%EC%84%B1%EB%AC%B8%EC%A0%9C_%ED%95%B4%EA%B2%B0_%EA%B3%BC%EC%A0%95/#%ED%95%B4%EA%B2%B0-%EA%B3%BC%EC%A0%95-2---%EB%B9%84%EA%B4%80%EC%A0%81-%EB%9D%BD-vs-%EB%82%99%EA%B4%80%EC%A0%81-%EB%9D%BD\">í•´ê²° ê³¼ì • 2 - ë¹„ê´€ì  ë½ vs ë‚™ê´€ì  ë½</a></p>\n<ul>\n<li><a href=\"/Spring-MVC/20230528-%EB%AA%A8%EB%91%90%EB%AA%A8%EC%97%AC%EB%9D%BC_%ED%8C%80%EC%9D%98_%EB%8F%99%EC%8B%9C%EC%84%B1%EB%AC%B8%EC%A0%9C_%ED%95%B4%EA%B2%B0_%EA%B3%BC%EC%A0%95/#%EC%BD%94%EB%93%9C-%EB%B0%8F-%EA%B2%B0%EA%B3%BC-1\">ì½”ë“œ ë° ê²°ê³¼</a></li>\n<li><a href=\"/Spring-MVC/20230528-%EB%AA%A8%EB%91%90%EB%AA%A8%EC%97%AC%EB%9D%BC_%ED%8C%80%EC%9D%98_%EB%8F%99%EC%8B%9C%EC%84%B1%EB%AC%B8%EC%A0%9C_%ED%95%B4%EA%B2%B0_%EA%B3%BC%EC%A0%95/#%EB%82%A8%EC%95%84%EC%9E%88%EB%8A%94-%EB%AC%B8%EC%A0%9C-1\">ë‚¨ì•„ìˆëŠ” ë¬¸ì œ</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/Spring-MVC/20230528-%EB%AA%A8%EB%91%90%EB%AA%A8%EC%97%AC%EB%9D%BC_%ED%8C%80%EC%9D%98_%EB%8F%99%EC%8B%9C%EC%84%B1%EB%AC%B8%EC%A0%9C_%ED%95%B4%EA%B2%B0_%EA%B3%BC%EC%A0%95/#%ED%95%B4%EA%B2%B0-%EA%B3%BC%EC%A0%95-3---redis-%EB%B6%84%EC%82%B0%EB%9D%BD\">í•´ê²° ê³¼ì • 3 - Redis ë¶„ì‚°ë½</a></p>\n<ul>\n<li>\n<p><a href=\"/Spring-MVC/20230528-%EB%AA%A8%EB%91%90%EB%AA%A8%EC%97%AC%EB%9D%BC_%ED%8C%80%EC%9D%98_%EB%8F%99%EC%8B%9C%EC%84%B1%EB%AC%B8%EC%A0%9C_%ED%95%B4%EA%B2%B0_%EA%B3%BC%EC%A0%95/#%EC%82%AC%EC%9A%A9-%EA%B8%B0%EC%88%A0-%EC%84%A0%EC%A0%95\">ì‚¬ìš© ê¸°ìˆ  ì„ ì •</a></p>\n<ul>\n<li><a href=\"/Spring-MVC/20230528-%EB%AA%A8%EB%91%90%EB%AA%A8%EC%97%AC%EB%9D%BC_%ED%8C%80%EC%9D%98_%EB%8F%99%EC%8B%9C%EC%84%B1%EB%AC%B8%EC%A0%9C_%ED%95%B4%EA%B2%B0_%EA%B3%BC%EC%A0%95/#lettuce-vs-redisson\">Lettuce vs Redisson</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/Spring-MVC/20230528-%EB%AA%A8%EB%91%90%EB%AA%A8%EC%97%AC%EB%9D%BC_%ED%8C%80%EC%9D%98_%EB%8F%99%EC%8B%9C%EC%84%B1%EB%AC%B8%EC%A0%9C_%ED%95%B4%EA%B2%B0_%EA%B3%BC%EC%A0%95/#%EB%B6%84%EC%82%B0%EB%9D%BD-%EC%A0%81%EC%9A%A9\">ë¶„ì‚°ë½ ì ìš©</a></p>\n<ul>\n<li><a href=\"/Spring-MVC/20230528-%EB%AA%A8%EB%91%90%EB%AA%A8%EC%97%AC%EB%9D%BC_%ED%8C%80%EC%9D%98_%EB%8F%99%EC%8B%9C%EC%84%B1%EB%AC%B8%EC%A0%9C_%ED%95%B4%EA%B2%B0_%EA%B3%BC%EC%A0%95/#%EC%9D%98%EC%A1%B4%EC%84%B1-%EC%B6%94%EA%B0%80\">ì˜ì¡´ì„± ì¶”ê°€</a></li>\n<li><a href=\"/Spring-MVC/20230528-%EB%AA%A8%EB%91%90%EB%AA%A8%EC%97%AC%EB%9D%BC_%ED%8C%80%EC%9D%98_%EB%8F%99%EC%8B%9C%EC%84%B1%EB%AC%B8%EC%A0%9C_%ED%95%B4%EA%B2%B0_%EA%B3%BC%EC%A0%95/#distributionlock\">DistributionLock</a></li>\n<li><a href=\"/Spring-MVC/20230528-%EB%AA%A8%EB%91%90%EB%AA%A8%EC%97%AC%EB%9D%BC_%ED%8C%80%EC%9D%98_%EB%8F%99%EC%8B%9C%EC%84%B1%EB%AC%B8%EC%A0%9C_%ED%95%B4%EA%B2%B0_%EA%B3%BC%EC%A0%95/#distributionlockkeygenerator\">DistributionLockKeyGenerator</a></li>\n<li><a href=\"/Spring-MVC/20230528-%EB%AA%A8%EB%91%90%EB%AA%A8%EC%97%AC%EB%9D%BC_%ED%8C%80%EC%9D%98_%EB%8F%99%EC%8B%9C%EC%84%B1%EB%AC%B8%EC%A0%9C_%ED%95%B4%EA%B2%B0_%EA%B3%BC%EC%A0%95/#distributionlockaop\">DistributionLockAop</a></li>\n<li><a href=\"/Spring-MVC/20230528-%EB%AA%A8%EB%91%90%EB%AA%A8%EC%97%AC%EB%9D%BC_%ED%8C%80%EC%9D%98_%EB%8F%99%EC%8B%9C%EC%84%B1%EB%AC%B8%EC%A0%9C_%ED%95%B4%EA%B2%B0_%EA%B3%BC%EC%A0%95/#transactiongeneratoraop\">TransactionGeneratorAop</a></li>\n<li><a href=\"/Spring-MVC/20230528-%EB%AA%A8%EB%91%90%EB%AA%A8%EC%97%AC%EB%9D%BC_%ED%8C%80%EC%9D%98_%EB%8F%99%EC%8B%9C%EC%84%B1%EB%AC%B8%EC%A0%9C_%ED%95%B4%EA%B2%B0_%EA%B3%BC%EC%A0%95/#%EB%B9%84%EC%A6%88%EB%8B%88%EC%8A%A4-%EB%A1%9C%EC%A7%81\">ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§</a></li>\n<li><a href=\"/Spring-MVC/20230528-%EB%AA%A8%EB%91%90%EB%AA%A8%EC%97%AC%EB%9D%BC_%ED%8C%80%EC%9D%98_%EB%8F%99%EC%8B%9C%EC%84%B1%EB%AC%B8%EC%A0%9C_%ED%95%B4%EA%B2%B0_%EA%B3%BC%EC%A0%95/#%EA%B2%B0%EA%B3%BC-%ED%99%95%EC%9D%B8\">ê²°ê³¼ í™•ì¸</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/Spring-MVC/20230528-%EB%AA%A8%EB%91%90%EB%AA%A8%EC%97%AC%EB%9D%BC_%ED%8C%80%EC%9D%98_%EB%8F%99%EC%8B%9C%EC%84%B1%EB%AC%B8%EC%A0%9C_%ED%95%B4%EA%B2%B0_%EA%B3%BC%EC%A0%95/#%EB%B0%9C%EC%83%9D%ED%95%9C-%EB%AC%B8%EC%A0%9C\">ë°œìƒí•œ ë¬¸ì œ</a></p>\n<ul>\n<li><a href=\"/Spring-MVC/20230528-%EB%AA%A8%EB%91%90%EB%AA%A8%EC%97%AC%EB%9D%BC_%ED%8C%80%EC%9D%98_%EB%8F%99%EC%8B%9C%EC%84%B1%EB%AC%B8%EC%A0%9C_%ED%95%B4%EA%B2%B0_%EA%B3%BC%EC%A0%95/#%EB%AC%B8%EC%A0%9C---%ED%8A%B8%EB%9E%9C%EC%9E%AD%EC%85%98%EC%9D%84-%EC%83%88%EB%A1%9C-%EB%B6%84%EB%A6%AC%ED%95%98%EB%A9%B0-%EC%8B%A4%ED%8C%A8%ED%95%98%EB%8A%94-%ED%85%8C%EC%8A%A4%ED%8A%B8\">ë¬¸ì œ - íŠ¸ëœì­ì…˜ì„ ìƒˆë¡œ ë¶„ë¦¬í•˜ë©° ì‹¤íŒ¨í•˜ëŠ” í…ŒìŠ¤íŠ¸</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"/Spring-MVC/20230528-%EB%AA%A8%EB%91%90%EB%AA%A8%EC%97%AC%EB%9D%BC_%ED%8C%80%EC%9D%98_%EB%8F%99%EC%8B%9C%EC%84%B1%EB%AC%B8%EC%A0%9C_%ED%95%B4%EA%B2%B0_%EA%B3%BC%EC%A0%95/#reference\">ğŸ“šReference</a></li>\n</ul>","frontmatter":{"date":"2023ë…„ 05ì›” 28ì¼","title":"ëª¨ë‘ëª¨ì—¬ë¼ íŒ€ì˜ ë™ì‹œì„± ë¬¸ì œ í•´ê²° ê³¼ì • (feat. Redis, ë¶„ì‚°ë½, AOP)","tags":["SpringFramework","JPA","synchronized","ë¹„ê´€ì ë½","Pessimistic Lock","ë‚™ê´€ì ë½","Optimistic Lock","Redis","ë¶„ì‚°ë½","Reddisson","AOP"]}}},"pageContext":{"slug":"/Spring-MVC/20230528-ëª¨ë‘ëª¨ì—¬ë¼_íŒ€ì˜_ë™ì‹œì„±ë¬¸ì œ_í•´ê²°_ê³¼ì •/","previous":{"fields":{"slug":"/Database/20230515-ëª¨ëª¨íŒ€_Redisìºì‹œë¥¼_í†µí•œ_ì„±ëŠ¥_í–¥ìƒ/"},"frontmatter":{"title":"ëª¨ëª¨íŒ€ Redisìºì‹œë¥¼ í†µí•œ ì„±ëŠ¥ í–¥ìƒ"}},"next":null}},"staticQueryHashes":["3911196313","4111100897"]}